(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{BaBC:function(e,n,t){"use strict";t.d(n,"a",(function(){return p}));var i,s,o,a,c=t("fXoL"),r=t("UYTu"),d=Object(r.a)(i||(o=["\n    query suppliersList (\n        $isManufacturer: Boolean\n    ) {\n        suppliers (\n            isManufacturer: $isManufacturer\n        ) {\n            edges  {\n                node {\n                    id\n                    company\n                    contactName\n                    email\n                    telephone\n                    parent {\n                        id\n                        company\n                    }\n                    isManufacturer\n                }\n            }\n        }\n    }\n"],a=["\n    query suppliersList (\n        $isManufacturer: Boolean\n    ) {\n        suppliers (\n            isManufacturer: $isManufacturer\n        ) {\n            edges  {\n                node {\n                    id\n                    company\n                    contactName\n                    email\n                    telephone\n                    parent {\n                        id\n                        company\n                    }\n                    isManufacturer\n                }\n            }\n        }\n    }\n"],Object.defineProperty?Object.defineProperty(o,"raw",{value:a}):o.raw=a,i=o)),u=Object(r.a)(s||(s=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(['\n    mutation createSupplier(\n        $company: String!\n        $contactName: String!\n        $email: String\n        $telephone: String\n        $address: String\n        $notes: String\n        $isManufacturer: Boolean!\n    ) {\n        createSupplier(input: {\n            clientMutationId: ""\n            company: $company\n            contactName: $contactName\n            email: $email\n            telephone: $telephone\n            address: $address\n            notes: $notes\n            isManufacturer: $isManufacturer\n        }) {\n            supplier {\n                id\n            }\n        }\n    }\n'],['\n    mutation createSupplier(\n        $company: String!\n        $contactName: String!\n        $email: String\n        $telephone: String\n        $address: String\n        $notes: String\n        $isManufacturer: Boolean!\n    ) {\n        createSupplier(input: {\n            clientMutationId: ""\n            company: $company\n            contactName: $contactName\n            email: $email\n            telephone: $telephone\n            address: $address\n            notes: $notes\n            isManufacturer: $isManufacturer\n        }) {\n            supplier {\n                id\n            }\n        }\n    }\n']))),l=t("/IUn"),p=function(){function e(e){this.apollo=e}return e.prototype.list=function(e){return this.apollo.query({variables:{isManufacturer:e},query:d})},e.prototype.create=function(e){return this.apollo.mutate({mutation:u,variables:e})},e.\u0275fac=function(n){return new(n||e)(c.wc(l.b))},e.\u0275prov=c.fc({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},QVjv:function(e,n,t){"use strict";t.d(n,"a",(function(){return S}));var i,s,o,a,c,r,d,u,l=t("fXoL"),p=t("UYTu"),m=Object(p.a)(i||(d=["\n    query jobList(\n        $after: String\n        $complete: Boolean\n        $inProduction: Boolean\n        $jobId: Int\n        $submissionId: Int\n        $customerName: String\n        $eventName: String\n        $castingCode: String\n        $incomingBatch: String\n        $outgoingBatch: String\n        $incomingBatched: Boolean\n        $onHold: Boolean\n        $dueOrder: String\n        $first: Int\n    ) {\n        jobs (\n            first: $first\n            after: $after\n            complete: $complete\n            status_inProduction: $inProduction\n            id: $jobId\n            submission_id: $submissionId\n            submission_customer_fullName: $customerName\n            submission_customer_event_name: $eventName\n            submission_castingCode: $castingCode\n            incomingBatch: $incomingBatch\n            outgoingBatch: $outgoingBatch\n            status_incomingBatched: $incomingBatched\n            onHold: $onHold\n            order: {due: $dueOrder},\n        ) {\n            totalCount\n            edges  {\n                node {\n                    id\n                    submission {\n                        id\n                        customer {\n                            id\n                            fullName\n                            address1\n                            address2\n                            city\n                            county\n                            country\n                            postcode\n                            phone\n                            email\n                            event {\n                                id\n                                name\n                                eventType {\n                                    id\n                                    name\n                                }\n                            }\n                        }\n                        status {\n                            id\n                            name\n                        }\n                        jewelleryType {\n                            id\n                            name\n                        }\n                        batch {\n                            id\n                        }\n                        waxWeight\n                        metalWeight\n                        baseMetal {\n                            id\n                            name\n                        }\n                        plating {\n                            id\n                            name\n                        }\n                        finish {\n                            id\n                            name\n                        }\n                        castingCode\n                        kit {\n                            id\n                            regCode\n                            starred\n                            kitType {\n                                id\n                                name\n                            }\n                        }\n                        ringThickness {\n                            id\n                            name\n                        }\n                        ringResize\n                        originalRingSize {\n                            id\n                            name\n                        }\n                        ringSizeCustom {\n                            id\n                            name\n                        }\n                        measuredRingSize {\n                            id\n                            name\n                        }\n                        expectedFinishWeight\n                        jumpRing\n                        jumpRingPlacement\n                        chainType {\n                            id\n                            name\n                        }\n                        chainLength {\n                            id\n                            name\n                        }\n                        chainPlating {\n                            id\n                            name\n                        }\n                        earringConfig {\n                            id\n                            name\n                        }\n                        engravingFont\n                        engravingText\n                        stoneDescription\n                        duplicates\n                        customerNotes\n                        totalPrice\n                        submittedAt\n                        hardDeadline\n                        specialDate\n                        submissionPhotos {\n                            edges {\n                                node {\n                                    id\n                                    objectName\n                                    exifDate\n                                    signedDownloadUrl\n                                    signedMidsizeDownloadUrl\n                                    signedThumbnailDownloadUrl\n                                }\n                            }\n                        }\n                    }\n                    manufacturer {\n                        id\n                        company\n                    }\n                    currentlyWith {\n                        id\n                        company\n                    }\n                    status {\n                        id\n                        name\n                    }\n                    complete\n                    due\n                    rush\n                    onHold\n                    outgoingBatch {\n                        id\n                        dateSent\n                    }\n                    incomingBatch {\n                        id\n                    }\n                }\n                cursor\n            }\n            pageInfo {\n                endCursor\n                hasNextPage\n            }\n        }\n    }\n"],u=["\n    query jobList(\n        $after: String\n        $complete: Boolean\n        $inProduction: Boolean\n        $jobId: Int\n        $submissionId: Int\n        $customerName: String\n        $eventName: String\n        $castingCode: String\n        $incomingBatch: String\n        $outgoingBatch: String\n        $incomingBatched: Boolean\n        $onHold: Boolean\n        $dueOrder: String\n        $first: Int\n    ) {\n        jobs (\n            first: $first\n            after: $after\n            complete: $complete\n            status_inProduction: $inProduction\n            id: $jobId\n            submission_id: $submissionId\n            submission_customer_fullName: $customerName\n            submission_customer_event_name: $eventName\n            submission_castingCode: $castingCode\n            incomingBatch: $incomingBatch\n            outgoingBatch: $outgoingBatch\n            status_incomingBatched: $incomingBatched\n            onHold: $onHold\n            order: {due: $dueOrder},\n        ) {\n            totalCount\n            edges  {\n                node {\n                    id\n                    submission {\n                        id\n                        customer {\n                            id\n                            fullName\n                            address1\n                            address2\n                            city\n                            county\n                            country\n                            postcode\n                            phone\n                            email\n                            event {\n                                id\n                                name\n                                eventType {\n                                    id\n                                    name\n                                }\n                            }\n                        }\n                        status {\n                            id\n                            name\n                        }\n                        jewelleryType {\n                            id\n                            name\n                        }\n                        batch {\n                            id\n                        }\n                        waxWeight\n                        metalWeight\n                        baseMetal {\n                            id\n                            name\n                        }\n                        plating {\n                            id\n                            name\n                        }\n                        finish {\n                            id\n                            name\n                        }\n                        castingCode\n                        kit {\n                            id\n                            regCode\n                            starred\n                            kitType {\n                                id\n                                name\n                            }\n                        }\n                        ringThickness {\n                            id\n                            name\n                        }\n                        ringResize\n                        originalRingSize {\n                            id\n                            name\n                        }\n                        ringSizeCustom {\n                            id\n                            name\n                        }\n                        measuredRingSize {\n                            id\n                            name\n                        }\n                        expectedFinishWeight\n                        jumpRing\n                        jumpRingPlacement\n                        chainType {\n                            id\n                            name\n                        }\n                        chainLength {\n                            id\n                            name\n                        }\n                        chainPlating {\n                            id\n                            name\n                        }\n                        earringConfig {\n                            id\n                            name\n                        }\n                        engravingFont\n                        engravingText\n                        stoneDescription\n                        duplicates\n                        customerNotes\n                        totalPrice\n                        submittedAt\n                        hardDeadline\n                        specialDate\n                        submissionPhotos {\n                            edges {\n                                node {\n                                    id\n                                    objectName\n                                    exifDate\n                                    signedDownloadUrl\n                                    signedMidsizeDownloadUrl\n                                    signedThumbnailDownloadUrl\n                                }\n                            }\n                        }\n                    }\n                    manufacturer {\n                        id\n                        company\n                    }\n                    currentlyWith {\n                        id\n                        company\n                    }\n                    status {\n                        id\n                        name\n                    }\n                    complete\n                    due\n                    rush\n                    onHold\n                    outgoingBatch {\n                        id\n                        dateSent\n                    }\n                    incomingBatch {\n                        id\n                    }\n                }\n                cursor\n            }\n            pageInfo {\n                endCursor\n                hasNextPage\n            }\n        }\n    }\n"],Object.defineProperty?Object.defineProperty(d,"raw",{value:u}):d.raw=u,i=d)),g=Object(p.a)(s||(s=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(['\n    mutation updateJob(\n        $id: ID!,\n        $currentlyWith: String,\n        $due: String,\n        $rush: Boolean,\n        $onHold: Boolean,\n    ) {\n        updateJob(input: {\n            id: $id\n            currentlyWith: $currentlyWith,\n            due: $due,\n            rush: $rush,\n            onHold: $onHold,\n            clientMutationId: "",\n        }) {\n            job {\n                id\n            }\n        }\n    }\n'],['\n    mutation updateJob(\n        $id: ID!,\n        $currentlyWith: String,\n        $due: String,\n        $rush: Boolean,\n        $onHold: Boolean,\n    ) {\n        updateJob(input: {\n            id: $id\n            currentlyWith: $currentlyWith,\n            due: $due,\n            rush: $rush,\n            onHold: $onHold,\n            clientMutationId: "",\n        }) {\n            job {\n                id\n            }\n        }\n    }\n']))),h=Object(p.a)(o||(o=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(['\n    mutation updateOutgoingBatch(\n        $id: ID!,\n        $outgoingBatch: String\n        $status: String\n    ) {\n        updateJob(input: {\n            id: $id,\n            outgoingBatch: $outgoingBatch,\n            status: $status,\n            clientMutationId: "",\n        }) {\n            job {\n                id\n                submission {\n                    id\n                }\n            }\n        }\n    }\n'],['\n    mutation updateOutgoingBatch(\n        $id: ID!,\n        $outgoingBatch: String\n        $status: String\n    ) {\n        updateJob(input: {\n            id: $id,\n            outgoingBatch: $outgoingBatch,\n            status: $status,\n            clientMutationId: "",\n        }) {\n            job {\n                id\n                submission {\n                    id\n                }\n            }\n        }\n    }\n']))),b=Object(p.a)(a||(a=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(['\n    mutation createJob(\n        $submission: String!,\n        $manufacturer: String!,\n        $status: String!,\n        $outgoingBatch: String,\n        $complete: Boolean!,\n        $rush: Boolean!,\n        $onHold: Boolean!,\n        $due: String,\n        $createdAt: String!,\n    ) {\n        createJob(input: {\n            clientMutationId: ""\n            submission: $submission,\n            manufacturer: $manufacturer,\n            status: $status,\n            outgoingBatch: $outgoingBatch,\n            complete: $complete,\n            rush: $rush,\n            onHold: $onHold,\n            due: $due,\n            createdAt: $createdAt,\n        }) {\n            job {\n                id\n                submission {\n                    id\n                }\n            }\n        }\n    }\n'],['\n    mutation createJob(\n        $submission: String!,\n        $manufacturer: String!,\n        $status: String!,\n        $outgoingBatch: String,\n        $complete: Boolean!,\n        $rush: Boolean!,\n        $onHold: Boolean!,\n        $due: String,\n        $createdAt: String!,\n    ) {\n        createJob(input: {\n            clientMutationId: ""\n            submission: $submission,\n            manufacturer: $manufacturer,\n            status: $status,\n            outgoingBatch: $outgoingBatch,\n            complete: $complete,\n            rush: $rush,\n            onHold: $onHold,\n            due: $due,\n            createdAt: $createdAt,\n        }) {\n            job {\n                id\n                submission {\n                    id\n                }\n            }\n        }\n    }\n']))),f=Object(p.a)(c||(c=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n    query jobsByBatch(\n        $first: Int,\n        $outgoingBatch: String,\n        $incomingBatch: String\n    ) {\n        jobs(\n            first: $first,\n            outgoingBatch: $outgoingBatch,\n            incomingBatch: $incomingBatch,\n\n        ) {\n            edges  {\n                node {\n                    id\n                    complete\n                    rush\n                    due\n                    createdAt\n                    submission {\n                        id\n                        hardDeadline\n                        specialDate\n                        status {\n                            id\n                            name\n                        }\n                        customer {\n                            id\n                            fullName\n                            address1\n                            address2\n                            city\n                            county\n                            postcode\n                            country\n                            email\n                            phone\n                            event {\n                                id\n                                name\n                                eventType {\n                                    id\n                                    name\n                                }\n                            }\n                        }\n                        jewelleryType {\n                            id\n                            name\n                        }\n                        kit {\n                            id\n                            kitType {\n                                id\n                                name\n                            }\n                        }\n                        castingCode\n                        ringThickness {\n                            id\n                            name\n                        }\n                        ringSize {\n                            id\n                            name\n                        }\n                        ringResize\n                        originalRingSize {\n                            id\n                            name\n                        }\n                        ringSizeCustom {\n                            id\n                            name\n                        }\n                        measuredRingSize {\n                            id\n                            name\n                        }\n                        chainType {\n                            id\n                            name\n                        }\n                        chainLength {\n                            id\n                            name\n                        }\n                        chainPlating {\n                            id\n                            name\n                        }\n                        earringConfig {\n                            id\n                            name\n                        }\n                        engravingFont\n                        engravingText\n                        baseMetal {\n                            id\n                            name\n                        }\n                        baseMetalPaid\n                        baseMetalPrice\n                        plating {\n                            id\n                            name\n                        }\n                        finish {\n                            id\n                            name\n                        }\n                        stoneDescription\n                        upsellAdditionalItem\n                        upsellPlating\n                        upsellEngraving\n                        upsellStoneSetting\n                        upsellBaseMetal\n                        upsellEarring\n                        submittedAt\n                        updatedAt\n                        duplicates\n                        customerNotes\n                        totalPrice\n                        amountPaid\n                        estimatedLaborCost\n                        estimatedMetalCost\n                        waxWeight\n                        metalWeight\n                        jumpRing\n                        jumpRingPlacement\n                        submissionPhotos {\n                            edges {\n                                node {\n                                    id\n                                    objectName\n                                    exifDate\n                                    signedDownloadUrl\n                                    signedMidsizeDownloadUrl\n                                    signedThumbnailDownloadUrl\n                                }\n                            }\n                        }\n                        payments {\n                            edges {\n                                node {\n                                    id\n                                    amount\n                                    success\n                                }\n                            }\n                        }\n                        jobs {\n                            edges {\n                                node {\n                                    id\n                                }\n                            }\n                        }\n                    }\n                    jobActions {\n                        edges {\n                            node {\n                                id\n                                action {\n                                    id\n                                    name\n                                }\n                                supplier {\n                                    id\n                                    company\n                                }\n                                started\n                                startedAt\n                                completed\n                                completedAt\n                                estimatedLaborCost\n                                estimatedMetalCost\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n"],["\n    query jobsByBatch(\n        $first: Int,\n        $outgoingBatch: String,\n        $incomingBatch: String\n    ) {\n        jobs(\n            first: $first,\n            outgoingBatch: $outgoingBatch,\n            incomingBatch: $incomingBatch,\n\n        ) {\n            edges  {\n                node {\n                    id\n                    complete\n                    rush\n                    due\n                    createdAt\n                    submission {\n                        id\n                        hardDeadline\n                        specialDate\n                        status {\n                            id\n                            name\n                        }\n                        customer {\n                            id\n                            fullName\n                            address1\n                            address2\n                            city\n                            county\n                            postcode\n                            country\n                            email\n                            phone\n                            event {\n                                id\n                                name\n                                eventType {\n                                    id\n                                    name\n                                }\n                            }\n                        }\n                        jewelleryType {\n                            id\n                            name\n                        }\n                        kit {\n                            id\n                            kitType {\n                                id\n                                name\n                            }\n                        }\n                        castingCode\n                        ringThickness {\n                            id\n                            name\n                        }\n                        ringSize {\n                            id\n                            name\n                        }\n                        ringResize\n                        originalRingSize {\n                            id\n                            name\n                        }\n                        ringSizeCustom {\n                            id\n                            name\n                        }\n                        measuredRingSize {\n                            id\n                            name\n                        }\n                        chainType {\n                            id\n                            name\n                        }\n                        chainLength {\n                            id\n                            name\n                        }\n                        chainPlating {\n                            id\n                            name\n                        }\n                        earringConfig {\n                            id\n                            name\n                        }\n                        engravingFont\n                        engravingText\n                        baseMetal {\n                            id\n                            name\n                        }\n                        baseMetalPaid\n                        baseMetalPrice\n                        plating {\n                            id\n                            name\n                        }\n                        finish {\n                            id\n                            name\n                        }\n                        stoneDescription\n                        upsellAdditionalItem\n                        upsellPlating\n                        upsellEngraving\n                        upsellStoneSetting\n                        upsellBaseMetal\n                        upsellEarring\n                        submittedAt\n                        updatedAt\n                        duplicates\n                        customerNotes\n                        totalPrice\n                        amountPaid\n                        estimatedLaborCost\n                        estimatedMetalCost\n                        waxWeight\n                        metalWeight\n                        jumpRing\n                        jumpRingPlacement\n                        submissionPhotos {\n                            edges {\n                                node {\n                                    id\n                                    objectName\n                                    exifDate\n                                    signedDownloadUrl\n                                    signedMidsizeDownloadUrl\n                                    signedThumbnailDownloadUrl\n                                }\n                            }\n                        }\n                        payments {\n                            edges {\n                                node {\n                                    id\n                                    amount\n                                    success\n                                }\n                            }\n                        }\n                        jobs {\n                            edges {\n                                node {\n                                    id\n                                }\n                            }\n                        }\n                    }\n                    jobActions {\n                        edges {\n                            node {\n                                id\n                                action {\n                                    id\n                                    name\n                                }\n                                supplier {\n                                    id\n                                    company\n                                }\n                                started\n                                startedAt\n                                completed\n                                completedAt\n                                estimatedLaborCost\n                                estimatedMetalCost\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n"]))),v=Object(p.a)(r||(r=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(['\n    mutation updateIncomingBatch(\n        $id: ID!,\n        $incomingBatch: String,\n        $status: String,\n\n    ) {\n        updateJob(input: {\n            id: $id,\n            incomingBatch: $incomingBatch,\n            status: $status,\n            clientMutationId: "",\n        }) {\n            job {\n                id\n                submission {\n                    id\n                }\n            }\n        }\n    }\n'],['\n    mutation updateIncomingBatch(\n        $id: ID!,\n        $incomingBatch: String,\n        $status: String,\n\n    ) {\n        updateJob(input: {\n            id: $id,\n            incomingBatch: $incomingBatch,\n            status: $status,\n            clientMutationId: "",\n        }) {\n            job {\n                id\n                submission {\n                    id\n                }\n            }\n        }\n    }\n']))),y=t("/IUn"),S=function(){function e(e){this.apollo=e}return e.prototype.create=function(e){return this.apollo.mutate({mutation:b,variables:e})},e.prototype.list=function(e,n,t,i,s,o,a,c,r,d,u,l,p,g){return void 0===n&&(n=null),void 0===t&&(t=null),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===c&&(c=null),void 0===r&&(r=null),void 0===d&&(d=null),void 0===u&&(u=null),void 0===l&&(l=null),void 0===p&&(p="ASC"),void 0===g&&(g=5),this.apollo.watchQuery({query:m,fetchPolicy:"network-only",variables:{after:t,complete:e,inProduction:n,jobId:i,submissionId:s,customerName:o,eventName:a,castingCode:c,incomingBatch:r,outgoingBatch:d,incomingBatched:u,onHold:l,dueOrder:p,first:g}}).valueChanges},e.prototype.listByOutgoingBatch=function(e,n){return this.apollo.query({query:f,variables:{first:n,outgoingBatch:e},fetchPolicy:"network-only"})},e.prototype.listByIncomingBatch=function(e,n){return this.apollo.query({query:f,variables:{first:n,incomingBatch:e},fetchPolicy:"network-only"})},e.prototype.update=function(e){return this.apollo.mutate({mutation:g,variables:e})},e.prototype.updateOutgoingBatch=function(e){return this.apollo.mutate({mutation:h,variables:e})},e.prototype.updateIncomingBatch=function(e){return this.apollo.mutate({mutation:v,variables:e})},e.\u0275fac=function(n){return new(n||e)(l.wc(y.b))},e.\u0275prov=l.fc({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},c3nT:function(e,n,t){"use strict";t.r(n),t.d(n,"SubmissionModule",(function(){return Bn}));var i,s=t("fXoL"),o=t("ofXK"),a=t("3Pt+"),c=t("PCNd"),r=t("HKlZ"),d=t("5Ndf"),u={id:"/base_metals/6",name:"Silver"},l=t("w44T"),p=t("1uah"),m=t("KPdS"),g=t("bCT2"),h=t("PTlN"),b=t("Nlbt"),f=t("9TxS"),v=t("uzfv"),y=t("rYPC"),S=t("QVjv"),C=t("1kSV"),w=t("cXB8"),I=t("tyNb"),M=t("CIHE"),k=t("uA1o"),x=t("Vf4f"),B=t("S6Vu"),$=t("BaBC"),P=t("5eHb"),T=t("n4kJ"),j=t("SGUZ"),A=t("JEAg"),V=t("XhFI"),O=t("PxxC"),F=t("wOBz"),D=t("Xv7A"),_=t("r1eF"),J=t("ZOsW"),N=t("1QgP"),z=t("VdD3"),L=t("sMau"),R=t("SjCM"),E=t("zVvu"),G=t("9tk/"),W=t("XXSO"),U=(i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])})(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),q=function(e,n,t,i){return new(t||(t=Promise))((function(s,o){function a(e){try{r(i.next(e))}catch(n){o(n)}}function c(e){try{r(i.throw(e))}catch(n){o(n)}}function r(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,c)}r((i=i.apply(e,n||[])).next())}))},H=function(e,n){var t,i,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,i&&(s=2&o[0]?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=n.call(e,a)}catch(c){o=[6,c],i=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},K=["submissionWeightModal"],Y=["actionRequiredModal"];function X(e,n){if(1&e){var t=s.qc();s.nc(0),s.pc(1,"button",43),s.yc("click",(function(){s.Wc(t);var e=s.Cc(2),n=s.Tc(72);return e.modalService.open(n)})),s.id(2," Create Manufacture Batch "),s.oc(),s.pc(3,"button",43),s.yc("click",(function(){s.Wc(t);var e=s.Cc(2),n=s.Tc(74);return e.modalService.open(n)})),s.id(4," Add to Existing Batch "),s.oc(),s.pc(5,"button",43),s.yc("click",(function(){return s.Wc(t),s.Cc(2).exportAddressData()})),s.id(6," Export Address Data "),s.oc(),s.mc()}}function Q(e,n){1&e&&(s.pc(0,"button",44),s.id(1," No Available Actions "),s.oc())}function Z(e,n){if(1&e&&(s.nc(0),s.gd(1,X,7,0,"ng-container",22),s.gd(2,Q,2,0,"button",23),s.mc()),2&e){var t=s.Cc();s.Vb(1),s.Jc("ngIf",t.isAdmin),s.Vb(1),s.Jc("ngIf",!t.isAdmin)}}function ee(e,n){1&e&&(s.pc(0,"button",44),s.id(1," Loading Actions... "),s.oc())}function ne(e,n){if(1&e){var t=s.qc();s.pc(0,"div",45),s.pc(1,"input",46),s.yc("click",(function(){return s.Wc(t),s.Cc().selectAll()}))("ngModelChange",(function(e){return s.Wc(t),s.Cc().state.allSelected=e})),s.oc(),s.kc(2,"label",47),s.oc()}if(2&e){var i=s.Cc();s.Vb(1),s.Jc("ngModel",i.state.allSelected)("value",i.state.allSelected)}}function te(e,n){1&e&&s.kc(0,"i",67)}function ie(e,n){1&e&&s.kc(0,"i",68)}function se(e,n){if(1&e&&(s.pc(0,"td"),s.pc(1,"a",69),s.Dc(2,"numericId"),s.id(3),s.oc(),s.oc()),2&e){var t=s.Cc().$implicit;s.Vb(1),s.Lc("routerLink","/event/view/",s.Ec(2,3,t.submission.node.customer.event.id),""),s.Vb(2),s.ld(" ",t.submission.node.customer.event.name," ","wedding"===t.submission.node.customer.event.eventType.name?" (Wedding)":""," ")}}function oe(e,n){if(1&e&&(s.pc(0,"td"),s.id(1),s.Dc(2,"uppercase"),s.oc()),2&e){var t=s.Cc().$implicit;s.Vb(1),s.jd(s.Ec(2,1,t.submission.node.castingCode))}}function ae(e,n){if(1&e&&(s.pc(0,"span"),s.id(1," BMU "),s.kc(2,"i",70),s.oc()),2&e){var t=s.Cc().$implicit;s.bc("color-danger",!t.submission.node.baseMetalPaid)("color-success",!0===t.submission.node.baseMetalPaid),s.Vb(2),s.bc("fa-check",!0===t.submission.node.baseMetalPaid)("fa-times",!t.submission.node.baseMetalPaid)}}function ce(e,n){if(1&e&&(s.pc(0,"span"),s.id(1),s.Dc(2,"date"),s.oc()),2&e){var t=s.Cc(3);s.Vb(1),s.kd(" Elapsed: ",s.Gc(2,1,1e3*t.timeElapsed,"mm:ss","UTC"),"s \xa0 ")}}function re(e,n){1&e&&s.kc(0,"span",73)}function de(e,n){if(1&e){var t=s.qc();s.pc(0,"button",71),s.yc("click",(function(){s.Wc(t);var e=s.Cc().$implicit;return s.Cc(2).toggleSubmissionPhotoTimer(e.submission.node.id)})),s.gd(1,re,1,0,"span",72),s.oc()}if(2&e){var i=s.Cc().$implicit,o=s.Cc(2);s.bc("fa-stop",o.model.submissionPhotoTimingMap[i.submission.node.id]&&!1===o.submitting)("fa-stopwatch-20",!o.model.submissionPhotoTimingMap[i.submission.node.id]&&!1===o.submitting)("hover",!o.model.submissionPhotoTimingMap[i.submission.node.id]||!1===o.submitting),s.Jc("disabled",o.submitting),s.Vb(1),s.Jc("ngIf",!0===o.submitting)}}function ue(e,n){if(1&e){var t=s.qc();s.pc(0,"button",74),s.yc("click",(function(){s.Wc(t);var e=s.Cc().$implicit;return s.Cc(2).openWeightModal(e.submission.node)})),s.oc()}if(2&e){var i=s.Cc(3);s.Jc("disabled",i.submitting)}}function le(e,n){if(1&e){var t=s.qc();s.pc(0,"button",75),s.yc("click",(function(){s.Wc(t);var e=s.Cc().$implicit;return s.Cc(2).openActionRequiredModal(e.submission.node)})),s.oc()}if(2&e){var i=s.Cc(3);s.Jc("disabled",i.submitting)}}function pe(e,n){if(1&e&&s.kc(0,"view-submission-modal",76),2&e){var t=s.Cc().$implicit,i=s.Cc(2);s.Jc("buttonStyle",!0)("castingCode",t.castingCodes.length?t.castingCodes[0]:null)("isAdmin",i.isAdmin)("loadingCastingCode",i.loadingCastingCode)("loadingStones",i.loadingStones)("photos",t.submission.node.submissionPhotos.edges)("stones",t.stones)("submission",t.submission.node)("jobs",t.submission.node.jobs)}}function me(e,n){if(1&e){var t=s.qc();s.nc(0),s.pc(1,"tr"),s.Dc(2,"lowercaseDashes"),s.pc(3,"td",52),s.yc("click",(function(){var e=s.Wc(t).$implicit;return s.Cc(2).selectRow(e)})),s.pc(4,"div",45),s.pc(5,"input",53),s.yc("click",(function(){var e=s.Wc(t).$implicit;return s.Cc(2).selectRow(e)}))("ngModelChange",(function(e){return s.Wc(t).$implicit.selected=e})),s.oc(),s.kc(6,"label",54),s.oc(),s.oc(),s.pc(7,"td"),s.gd(8,te,1,0,"i",55),s.kc(9,"i",56),s.gd(10,ie,1,0,"i",57),s.oc(),s.pc(11,"td",58),s.yc("click",(function(){var e=s.Wc(t).$implicit;return s.Cc(2).selectRow(e)})),s.id(12),s.oc(),s.pc(13,"td"),s.id(14),s.oc(),s.gd(15,se,4,5,"td",22),s.gd(16,oe,3,3,"td",22),s.pc(17,"td"),s.id(18),s.Dc(19,"titlecase"),s.kc(20,"br"),s.gd(21,ae,3,8,"span",59),s.oc(),s.pc(22,"td"),s.id(23),s.Dc(24,"currency"),s.oc(),s.pc(25,"td"),s.id(26),s.Dc(27,"simpleDateTime"),s.oc(),s.pc(28,"td",60),s.pc(29,"span"),s.id(30),s.oc(),s.oc(),s.pc(31,"td",35),s.gd(32,ce,3,5,"span",22),s.pc(33,"div",61),s.gd(34,de,2,8,"button",62),s.gd(35,ue,1,1,"button",63),s.kc(36,"view-submission-comms-modal",64),s.gd(37,le,1,1,"button",65),s.oc(),s.gd(38,pe,1,9,"view-submission-modal",66),s.oc(),s.oc(),s.mc()}if(2&e){var i=n.$implicit,o=s.Cc(2);s.Vb(1),s.Yb("status-",s.Ec(2,37,i.submission.node.status.name),""),s.bc("row-blocked",!o.model.submissionPhotoTimingMap[i.submission.node.id]&&!0===o.imageLoggingSessionState)("selected",i.selected),s.Vb(4),s.Lc("id","sub-cb-",i.submission.node.id,""),s.Jc("ngModel",i.selected)("name","submission"+i.submission.node.id),s.Vb(1),s.Lc("for","sub-cb-",i.submission.node.id,""),s.Vb(2),s.Jc("ngIf",i.submission.node.kit&&i.submission.node.kit.starred),s.Vb(1),s.bc("text-muted",0===i.submission.node.submissionPhotos.edges.length)("text-success",i.submission.node.submissionPhotos.edges.length>0),s.Vb(1),s.Jc("ngIf",(null==i.submission.node.customer||null==i.submission.node.customer.event?null:i.submission.node.customer.event.eventType.name)===o.eventTypeWedding),s.Vb(2),s.jd(i.submission.node.customer.fullName),s.Vb(2),s.jd(null===i.submission.node.customer.event?"Kit":"Event"),s.Vb(1),s.Jc("ngIf",null!==i.submission.node.customer.event),s.Vb(1),s.Jc("ngIf",null===i.submission.node.customer.event),s.Vb(2),s.kd(" ",s.Ec(19,39,i.submission.node.jewelleryType.name),""),s.Vb(3),s.Jc("ngIf",i.submission.node.baseMetal&&i.submission.node.baseMetal.id!==o.metalSilver.id),s.Vb(2),s.jd(s.Ec(24,41,i.submissionPaymentTotal)),s.Vb(3),s.jd(s.Ec(27,43,i.submission.node.submittedAt)),s.Vb(4),s.jd(i.submission.node.status.name),s.Vb(2),s.Jc("ngIf",o.model.submissionPhotoTimingMap[i.submission.node.id]),s.Vb(2),s.Jc("ngIf",!1===o.imageLoggingSessionState||o.model.submissionPhotoTimingMap[i.submission.node.id]),s.Vb(1),s.Jc("ngIf",null===i.submission.node.customer.event&&i.submission.node.status.id===o.statusSubmissionCreated.id),s.Vb(1),s.Jc("hover",!i.submission.node.customerNotes&&i.notes&&!i.notes.length)("loadingNotes",o.loadingNotes)("submissionId",i.submission.node.id)("notes",i.notes)("customerNote",i.submission.node.customerNotes)("isAdmin",o.isAdmin),s.Vb(1),s.Jc("ngIf",null===i.submission.node.customer.event&&i.submission.node.status.id===o.statusActionRequired.id),s.Vb(1),s.Jc("ngIf",!1===o.imageLoggingSessionState)}}function ge(e,n){1&e&&(s.pc(0,"tr"),s.pc(1,"td",77),s.pc(2,"p",78),s.id(3,"No submissions found"),s.oc(),s.oc(),s.oc())}function he(e,n){if(1&e&&(s.pc(0,"tbody"),s.pc(1,"tr",48),s.pc(2,"td",49),s.kc(3,"p",50),s.oc(),s.oc(),s.gd(4,me,39,45,"ng-container",51),s.gd(5,ge,4,0,"tr",22),s.oc()),2&e){var t=s.Cc();s.Vb(4),s.Jc("ngForOf",t.data.submissionAndInfos),s.Vb(1),s.Jc("ngIf",!t.data.submissionAndInfos.length)}}function be(e,n){1&e&&(s.pc(0,"tr"),s.pc(1,"td"),s.pc(2,"app-loading-shimmer"),s.pc(3,"div",79),s.pc(4,"div",80),s.kc(5,"div",81),s.oc(),s.oc(),s.oc(),s.oc(),s.pc(6,"td"),s.pc(7,"app-loading-shimmer"),s.pc(8,"div",82),s.pc(9,"div",80),s.kc(10,"div",81),s.oc(),s.oc(),s.oc(),s.oc(),s.pc(11,"td"),s.pc(12,"app-loading-shimmer"),s.pc(13,"div",82),s.pc(14,"div",83),s.kc(15,"div",81),s.oc(),s.oc(),s.oc(),s.oc(),s.pc(16,"td"),s.pc(17,"app-loading-shimmer"),s.pc(18,"div",82),s.pc(19,"div",84),s.kc(20,"div",81),s.oc(),s.oc(),s.oc(),s.oc(),s.pc(21,"td"),s.pc(22,"app-loading-shimmer"),s.pc(23,"div",82),s.pc(24,"div",85),s.kc(25,"div",81),s.oc(),s.oc(),s.oc(),s.oc(),s.pc(26,"td"),s.pc(27,"app-loading-shimmer"),s.pc(28,"div",82),s.pc(29,"div",85),s.kc(30,"div",81),s.oc(),s.pc(31,"div",86),s.kc(32,"div",87),s.oc(),s.oc(),s.oc(),s.oc(),s.pc(33,"td"),s.pc(34,"app-loading-shimmer"),s.pc(35,"div",82),s.pc(36,"div",85),s.kc(37,"div",81),s.oc(),s.oc(),s.oc(),s.oc(),s.pc(38,"td"),s.pc(39,"app-loading-shimmer"),s.pc(40,"div",82),s.pc(41,"div",83),s.kc(42,"div",81),s.oc(),s.oc(),s.oc(),s.oc(),s.pc(43,"td"),s.pc(44,"app-loading-shimmer"),s.pc(45,"div",82),s.pc(46,"div",88),s.kc(47,"div",81),s.oc(),s.oc(),s.oc(),s.oc(),s.pc(48,"td",35),s.pc(49,"app-loading-shimmer"),s.pc(50,"div",79),s.pc(51,"div",85),s.kc(52,"div",81),s.oc(),s.oc(),s.oc(),s.oc(),s.oc())}function fe(e,n){1&e&&(s.pc(0,"tbody"),s.pc(1,"tr",48),s.pc(2,"td",49),s.kc(3,"p",50),s.oc(),s.oc(),s.gd(4,be,53,0,"tr",51),s.oc()),2&e&&(s.Vb(4),s.Jc("ngForOf"," ".repeat(3).split("")))}function ve(e,n){1&e&&(s.pc(0,"div",89),s.kc(1,"loading-ring",90),s.oc()),2&e&&(s.Vb(1),s.Jc("size",40))}function ye(e,n){if(1&e){var t=s.qc();s.pc(0,"table-controls",91),s.yc("nextPage",(function(){return s.Wc(t),s.Cc().nextPage()}))("previousPage",(function(){return s.Wc(t),s.Cc().previousPage()})),s.oc()}if(2&e){var i=s.Cc();s.Jc("state",i.state)}}function Se(e,n){1&e&&s.kc(0,"loading-ring",90),2&e&&s.Jc("size",30)}function Ce(e,n){if(1&e&&(s.pc(0,"ng-option",101),s.id(1),s.Dc(2,"titlecase"),s.oc()),2&e){var t=n.$implicit;s.Jc("value",t),s.Vb(1),s.kd("",s.Ec(2,2,t.node.company)," ")}}function we(e,n){if(1&e&&(s.pc(0,"label",105),s.id(1),s.Dc(2,"titlecase"),s.oc()),2&e){var t=s.Cc(3);s.Vb(1),s.kd(" Notes for ",s.Ec(2,1,t.model.selectedSupplier.node.company)," ")}}function Ie(e,n){if(1&e){var t=s.qc();s.nc(0),s.gd(1,we,3,3,"label",102),s.pc(2,"textarea",103,104),s.yc("ngModelChange",(function(e){return s.Wc(t),s.Cc(2).model.batchNotes=e})),s.id(4,"                    "),s.oc(),s.mc()}if(2&e){var i=s.Cc(2);s.Vb(1),s.Jc("ngIf",i.model.selectedSupplier),s.Vb(1),s.Jc("ngModel",i.model.batchNotes)}}function Me(e,n){if(1&e){var t=s.qc();s.kc(0,"modal-header",92),s.pc(1,"div",93),s.pc(2,"form",2,94),s.pc(4,"div",95),s.pc(5,"label",96),s.id(6,"Which Supplier?"),s.oc(),s.pc(7,"ng-select",97,98),s.yc("ngModelChange",(function(e){return s.Wc(t),s.Cc().model.selectedSupplier=e})),s.gd(9,Ce,3,4,"ng-option",99),s.oc(),s.gd(10,Ie,5,2,"ng-container",22),s.oc(),s.oc(),s.oc(),s.pc(11,"modal-footer",100),s.yc("modalSaved",(function(){return s.Wc(t),s.Cc().createManufactureBatch()})),s.oc()}if(2&e){var i=n.$implicit,o=s.Tc(3),a=s.Cc();s.Jc("modal",i),s.Vb(7),s.Jc("ngModel",a.model.selectedSupplier)("searchable",!1),s.Vb(2),s.Jc("ngForOf",a.data.suppliers),s.Vb(1),s.Jc("ngIf",a.model.selectedSupplier),s.Vb(1),s.Jc("form",o)("modal",i)("saveButtonName","Create")}}function ke(e,n){if(1&e&&(s.pc(0,"ng-option",101),s.id(1),s.Dc(2,"numericId"),s.oc()),2&e){var t=n.$implicit;s.Jc("value",t.node),s.Vb(1),s.kd("Batch #",s.Ec(2,2,t.node.id)," ")}}function xe(e,n){if(1&e){var t=s.qc();s.kc(0,"modal-header",106),s.pc(1,"div",93),s.pc(2,"form",2,107),s.pc(4,"div",95),s.pc(5,"label",96),s.id(6,"Which Batch?"),s.oc(),s.pc(7,"ng-select",108,98),s.yc("ngModelChange",(function(e){return s.Wc(t),s.Cc().data.mutationBatch=e})),s.gd(9,ke,3,4,"ng-option",99),s.oc(),s.oc(),s.oc(),s.oc(),s.pc(10,"modal-footer",100),s.yc("modalSaved",(function(){return s.Wc(t),s.Cc().addSelectedToManufactureBatch()})),s.oc()}if(2&e){var i=n.$implicit,o=s.Tc(3),a=s.Cc();s.Jc("modal",i),s.Vb(7),s.Jc("ngModel",a.data.mutationBatch)("searchable",!1),s.Vb(2),s.Jc("ngForOf",a.data.availableBatches),s.Vb(1),s.Jc("form",o)("modal",i)("saveButtonName","Add")}}function Be(e,n){if(1&e&&(s.pc(0,"ng-option",101),s.id(1),s.Dc(2,"uppercase"),s.oc()),2&e){var t=s.Cc().$implicit;s.Jc("value",t),s.Vb(1),s.kd(" ",s.Ec(2,2,t.node.name)," ")}}function $e(e,n){if(1&e&&(s.nc(0),s.gd(1,Be,3,4,"ng-option",119),s.mc()),2&e){var t=n.$implicit;s.Vb(1),s.Jc("ngIf","Leave as is"!==t.node.name)}}function Pe(e,n){if(1&e){var t=s.qc();s.pc(0,"div",111),s.pc(1,"label",115),s.id(2,"Measured Ring Size (optional)"),s.oc(),s.pc(3,"ng-select",116,117),s.yc("ngModelChange",(function(e){return s.Wc(t),s.Cc(2).model.measuredRingSize=e})),s.gd(5,$e,2,1,"ng-container",51),s.oc(),s.kc(6,"app-error-messages",118),s.oc()}if(2&e){var i=s.Tc(4),o=s.Cc(2);s.Vb(3),s.Jc("ngModel",o.model.measuredRingSize)("notFoundText",o.loadingActions?"Loading":"Nothing found")("searchable",!0),s.Vb(2),s.Jc("ngForOf",o.data.ringSizeCustoms),s.Vb(1),s.Jc("field",i)}}function Te(e,n){if(1&e){var t=s.qc();s.kc(0,"modal-header",109),s.Dc(1,"numericId"),s.pc(2,"div",93),s.pc(3,"form",2,110),s.pc(5,"div",111),s.pc(6,"label",112),s.id(7,"Wax Weight"),s.oc(),s.pc(8,"input",113),s.yc("ngModelChange",(function(e){return s.Wc(t),s.Cc().model.waxWeight=e})),s.oc(),s.oc(),s.gd(9,Pe,7,5,"div",114),s.oc(),s.oc(),s.pc(10,"modal-footer",100),s.yc("modalSaved",(function(){return s.Wc(t),s.Cc().markAsReceived()})),s.oc()}if(2&e){var i=n.$implicit,o=s.Tc(4),a=s.Cc();s.Lc("title","Check In Item - #",s.Ec(1,7,a.data.submission.id),""),s.Jc("modal",i),s.Vb(8),s.Jc("ngModel",a.model.waxWeight),s.Vb(1),s.Jc("ngIf",a.data.submission.jewelleryType.id===a.TYPE_RING),s.Vb(1),s.Jc("form",o)("modal",i)("saveButtonName","Confirm")}}function je(e,n){if(1&e){var t=s.qc();s.pc(0,"div",121),s.pc(1,"button",127),s.yc("click",(function(){return s.Wc(t),s.Cc(2).markAsActioned()})),s.id(2," Skip & Mark Processed "),s.oc(),s.oc()}if(2&e){var i=s.Cc(2);s.Vb(1),s.Jc("disabled",i.submitting)}}function Ae(e,n){if(1&e){var t=s.qc();s.kc(0,"modal-header",109),s.Dc(1,"numericId"),s.pc(2,"div",93),s.pc(3,"div",120),s.pc(4,"div",121),s.pc(5,"b"),s.id(6,"Metal: "),s.oc(),s.id(7),s.oc(),s.pc(8,"div",121),s.pc(9,"b"),s.id(10,"Weight: "),s.oc(),s.id(11),s.oc(),s.pc(12,"div",121),s.pc(13,"b"),s.id(14,"Base Metal Paid: "),s.oc(),s.id(15),s.oc(),s.pc(16,"div",121),s.pc(17,"b"),s.id(18,"Casting Type: "),s.oc(),s.id(19),s.oc(),s.pc(20,"div",122),s.pc(21,"b"),s.id(22,"Customer Email: "),s.oc(),s.pc(23,"a",123),s.id(24),s.oc(),s.oc(),s.oc(),s.pc(25,"div",124),s.gd(26,je,3,1,"div",125),s.pc(27,"div",121),s.pc(28,"button",126),s.yc("click",(function(){return s.Wc(t),s.Cc().sendGenericBaseMetalEmail()})),s.id(29," Email Customer "),s.oc(),s.oc(),s.oc(),s.oc()}if(2&e){var i=n.$implicit,o=s.Cc();s.Lc("title","Action Required - #",s.Ec(1,10,o.data.submission.id),""),s.Jc("modal",i),s.Vb(7),s.kd(" ",o.data.submission.baseMetal.name," "),s.Vb(4),s.kd(" ",o.data.submission.waxWeight,"g "),s.Vb(4),s.kd(" ",o.data.submission.baseMetalPaid," "),s.Vb(4),s.kd(" ",o.data.submission.castingType.name," "),s.Vb(4),s.Jc("href","mailto:"+o.data.submission.customer.email,s.Zc),s.Vb(1),s.jd(o.data.submission.customer.email),s.Vb(2),s.Jc("ngIf",o.data.submission.baseMetal.name===o.metalSilver.name||o.data.submission.baseMetalPaid),s.Vb(2),s.Jc("disabled",o.submitting)}}var Ve,Oe,Fe,De=function(e){function n(n,t,i,s,o,a,c,r,p,g,b,f,v,y){var S=e.call(this)||this;return S.appUserService=n,S.castingCodeService=t,S.exportDataService=i,S.imageLoggingSessionService=s,S.jobService=o,S.modalService=a,S.ringSizeCustomService=c,S.router=r,S.stoneSubmissionService=p,S.submissionBatchService=g,S.submissionNoteService=b,S.submissionService=f,S.supplierService=v,S.toastrService=y,S.statusGroupNotStarted="notStarted",S.statusGroupInProgress="inProgress",S.statusGroupComplete="complete",S.statusGroupDispatched="dispatched",S.statusGroupReturned="returned",S.statusGroupCancelled="cancelled",S.statusGroupStarred="starred",S.statusGroupAll="all",S.eventTypeWedding=h.a,S.submissionId=m.f,S.customerName=m.d,S.eventName=m.e,S.castingCode=m.c,S.TYPE_RING=l.b,S.statusSubmissionCreated=d.g,S.statusActionRequired=d.a,S.metalSilver=u,S.model={batchNotes:null,createImageLoggingSessionMap:{},currentSubmissionSearch:null,searchInfo:null,selectedSupplier:null,starred:null,statusGroup:S.statusGroupNotStarted,submissionPhotoTimingMap:{},waxWeight:null,measuredRingSize:null},S.data={availableBatches:[],mutationBatch:null,selections:[],submissionAndInfos:[],suppliers:[],submission:null,ringSizeCustoms:[]},S.imageLoggingSessionState=!1,S.isAdmin=!1,S.loadingActions=!0,S.loadingStones=!0,S.loadingCastingCode=!0,S.loadingNotes=!0,S.submitting=!1,S.timeElapsed=0,S.statusesFilter={statusPending:{type:d.q,selected:!1},statusUpdating:{type:d.w,selected:!1},statusAwaitingBatching:{type:d.b,selected:!1},statusCustomerSubmitted:{type:d.g,selected:!1},statusPartnerBatchCreated:{type:d.n,selected:!1},statusPartnerBatchInTransit:{type:d.o,selected:!1},statusPartnerBatchReceived:{type:d.p,selected:!1},statusActionRequired:{type:d.a,selected:!1},statusSubmissionProcessed:{type:d.v,selected:!1},statusManufacturerBatchCreated:{type:d.k,selected:!1},statusManufacturerBatchInTransit:{type:d.l,selected:!1},statusManufacturerBatchReceived:{type:d.m,selected:!1},statusInProduction:{type:d.j,selected:!1},statusProductionComplete:{type:d.r,selected:!1},statusCompletedBatchCreated:{type:d.d,selected:!1},statusCompletedBatchInTransit:{type:d.e,selected:!1},statusCompletedBatchReceived:{type:d.f,selected:!1},statusDeliveryPending:{type:d.h,selected:!1},statusSentToCustomer:{type:d.u,selected:!1},statusCancelled:{type:d.c,selected:!1},statusFailedDelivery:{type:d.i,selected:!1},statusReturnExpected:{type:d.s,selected:!1},statusReturnReceived:{type:d.t,selected:!1}},S.searchFields=[{name:S.submissionId,allowedType:m.b.integer,searchPath:"submission.node.id"},{name:S.customerName,allowedType:m.b.any,searchPath:"submission.node.customer.fullName"},{name:S.castingCode,allowedType:m.b.any,searchPath:"submission.node.castingCode"},{name:S.eventName,allowedType:m.b.any,searchPath:"submission.node.customer.event.name"}],S.defaultSearch={searchField:S.searchFields[1],searchQuery:null},S}return U(n,e),n.prototype.unloadNotification=function(e){var n=this;this.data.submissionAndInfos.some((function(e){return n.model.submissionPhotoTimingMap[e.submission.node.id]}))&&(e.returnValue=!0)},n.prototype.ngOnDestroy=function(){return q(this,void 0,void 0,(function(){var e,n,t;return H(this,(function(i){switch(i.label){case 0:e=0,n=this.data.submissionAndInfos,i.label=1;case 1:return e<n.length?this.model.submissionPhotoTimingMap[(t=n[e]).submission.node.id]?[4,this.endImageLoggingSession(t.submission.node)]:[3,3]:[3,4];case 2:i.sent(),i.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))},n.prototype.ngOnInit=function(){return q(this,void 0,void 0,(function(){var e=this;return H(this,(function(n){switch(n.label){case 0:return this.appUserService.getMe().subscribe((function(n){e.isAdmin=e.appUserService.isAdmin(n.data.appUser.roles),e.isAdmin?Object(p.a)(e.submissionBatchService.list(null,null,!1,!0,"DESC",!1),e.supplierService.list(!0),e.ringSizeCustomService.list()).subscribe((function(n){var t=n[0],i=n[2];e.data.suppliers=n[1].data.suppliers.edges,e.data.availableBatches=t.data.submissionBatches.edges,e.data.ringSizeCustoms=i.data.ringSizeCustoms.edges,e.loadingActions=!1})):e.loadingActions=!1})),this.liveTimeInterval=setInterval((function(){e.liveTimeCreate()}),500),[4,this.onChangeStatusGroupFilter()];case 1:return n.sent(),[2]}}))}))},n.prototype.updateTable=function(e){return q(this,void 0,void 0,(function(){var n,t,i,s,o,a=this;return H(this,(function(c){for(this.state.loading=!0,this.state.allSelected=!1,this.data.selections=[],this.model.currentSubmissionSearch&&this.model.currentSubmissionSearch.unsubscribe(),n=[],t=!(!this.model.searchInfo||!this.model.searchInfo.searchQuery),i=0,s=Object.values(this.statusesFilter);i<s.length;i++)o=s[i],(t||o.selected)&&n.push(o.type.id);return t?(this.model.starred=null,this.searchLocally()):this.model.starred?this.getStarredLocally():this.filterLocally(),this.model.currentSubmissionSearch=this.submissionService.listByStatusIds(e,n,this.model.searchInfo,this.model.starred).subscribe((function(e){var n=JSON.parse(JSON.stringify(a.data.submissionAndInfos));t||(a.data.submissionAndInfos=[]);for(var i=function(e){if(a.data.submissionAndInfos.some((function(n){return n.submission.node.id===e.node.id})))return"continue";for(var t=0,i=0,s=e.node.payments.edges;i<s.length;i++){var o=s[i];o.node.success&&(t+=o.node.amount)}for(var c=!1,r=0,d=n;r<d.length;r++){var u=d[r];u.submission.node.id===e.node.id&&(c=u.selected)}a.data.submissionAndInfos.push({submissionPaymentTotal:t,submission:JSON.parse(JSON.stringify(e)),selected:c,stones:[],castingCodes:[],notes:[]})},s=0,o=e.data.submissions.edges;s<o.length;s++)i(o[s]);for(var c=[],r=[],d=0,u=a.data.submissionAndInfos;d<u.length;d++){var l=u[d];l.submission.node.kit&&r.push(l.submission.node.kit.id),c.push(l.submission.node.id.replace(/^\D+/,""))}a.castingCodeService.listByKitIds(r).subscribe((function(e){for(var n=0,t=a.data.submissionAndInfos;n<t.length;n++)for(var i=t[n],s=0,o=e.data.castingCodes.edges;s<o.length;s++){var c=o[s];i.submission.node.castingCode===c.node.code&&i.castingCodes.push(c.node)}a.loadingCastingCode=!1})),a.stoneSubmissionService.listBySubmission(c).subscribe((function(e){for(var n=0,t=a.data.submissionAndInfos;n<t.length;n++)for(var i=t[n],s=0,o=e.data.stoneSubmissions.edges;s<o.length;s++){var c=o[s];i.submission.node.id===c.node.submission.id&&i.stones.push(c)}a.loadingStones=!1})),a.submissionNoteService.listBySubmission(c).subscribe((function(e){for(var n=0,t=a.data.submissionAndInfos;n<t.length;n++)for(var i=t[n],s=0,o=e.data.submissionNotes.edges;s<o.length;s++){var c=o[s];i.submission.node.id===c.node.submission.id&&i.notes.push(c)}a.loadingNotes=!1})),a.handlePagination(e.data.submissions)})),[2]}))}))},n.prototype.searchLocally=function(){for(var e=[],n=0,t=this.data.submissionAndInfos;n<t.length;n++){var i=t[n],s=Object(g.b)(i,this.model.searchInfo.searchField.searchPath);s&&s.toLowerCase().includes(this.model.searchInfo.searchQuery.toLowerCase())&&e.push(i)}this.data.submissionAndInfos=e},n.prototype.getStarredLocally=function(){for(var e=[],n=0,t=this.data.submissionAndInfos;n<t.length;n++){var i=t[n];i.submission.node.kit&&i.submission.node.kit.starred&&e.push(i)}this.data.submissionAndInfos=e},n.prototype.filterLocally=function(){for(var e=[],n=0,t=this.data.submissionAndInfos;n<t.length;n++)for(var i=t[n],s=0,o=Object.values(this.statusesFilter);s<o.length;s++){var a=o[s];if(a.type.id===i.submission.node.status.id){a.selected&&e.push(i);break}}this.data.submissionAndInfos=e},n.prototype.onChangeStatusGroupFilter=function(){return q(this,void 0,void 0,(function(){var e,n,t,i;return H(this,(function(s){for(this.softReset(),e=0,n=Object.values(this.statusesFilter);e<n.length;e++)n[e].selected=!1;switch(this.model.starred=null,this.model.statusGroup){case this.statusGroupNotStarted:this.statusesFilter.statusAwaitingBatching.selected=!0,this.statusesFilter.statusCustomerSubmitted.selected=!0,this.statusesFilter.statusActionRequired.selected=!0;break;case this.statusGroupInProgress:this.statusesFilter.statusPartnerBatchCreated.selected=!0,this.statusesFilter.statusPartnerBatchInTransit.selected=!0,this.statusesFilter.statusPartnerBatchReceived.selected=!0,this.statusesFilter.statusActionRequired.selected=!0,this.statusesFilter.statusSubmissionProcessed.selected=!0,this.statusesFilter.statusManufacturerBatchCreated.selected=!0,this.statusesFilter.statusManufacturerBatchInTransit.selected=!0,this.statusesFilter.statusManufacturerBatchReceived.selected=!0,this.statusesFilter.statusInProduction.selected=!0,this.statusesFilter.statusProductionComplete.selected=!0,this.statusesFilter.statusCompletedBatchCreated.selected=!0,this.statusesFilter.statusCompletedBatchInTransit.selected=!0,this.statusesFilter.statusCompletedBatchReceived.selected=!0,this.statusesFilter.statusFailedDelivery.selected=!0,this.statusesFilter.statusReturnExpected.selected=!0,this.statusesFilter.statusReturnReceived.selected=!0;break;case this.statusGroupComplete:this.statusesFilter.statusSentToCustomer.selected=!0;break;case this.statusGroupDispatched:this.statusesFilter.statusManufacturerBatchInTransit.selected=!0,this.statusesFilter.statusManufacturerBatchReceived.selected=!0,this.statusesFilter.statusInProduction.selected=!0,this.statusesFilter.statusProductionComplete.selected=!0,this.statusesFilter.statusCompletedBatchCreated.selected=!0,this.statusesFilter.statusCompletedBatchInTransit.selected=!0;break;case this.statusGroupReturned:this.statusesFilter.statusFailedDelivery.selected=!0,this.statusesFilter.statusReturnExpected.selected=!0,this.statusesFilter.statusReturnReceived.selected=!0;break;case this.statusGroupCancelled:this.statusesFilter.statusCancelled.selected=!0;break;case this.statusGroupStarred:this.model.starred=!0;case this.statusGroupAll:default:for(t=0,i=Object.values(this.statusesFilter);t<i.length;t++)i[t].selected=!0}return this.updateTable(null),[2]}))}))},n.prototype.startTimer=function(){var e=this;this.timeElapsed=0,this.interval=setInterval((function(){e.timeElapsed++}),1e3)},n.prototype.endTimer=function(){clearInterval(this.interval)},n.prototype.liveTimeCreate=function(){var e=new Date;this.liveTime=("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)},n.prototype.toggleSubmissionPhotoTimer=function(e){return q(this,void 0,void 0,(function(){var n,t,i;return H(this,(function(s){switch(s.label){case 0:this.submitting=!0,n=0,t=this.data.submissionAndInfos,s.label=1;case 1:return n<t.length?(i=t[n]).submission.node.id!==e?[3,6]:this.model.submissionPhotoTimingMap[i.submission.node.id]?[3,3]:[4,this.createImageLoggingSession(i.submission.node)]:[3,9];case 2:return s.sent(),[3,5];case 3:return[4,this.endImageLoggingSession(i.submission.node)];case 4:s.sent(),s.label=5;case 5:return[3,8];case 6:return this.model.submissionPhotoTimingMap[i.submission.node.id]?(this.model.submissionPhotoTimingMap[i.submission.node.id]=!1,[4,this.endImageLoggingSession(i.submission.node)]):[3,8];case 7:s.sent(),s.label=8;case 8:return n++,[3,1];case 9:return this.submitting=!1,[2]}}))}))},n.prototype.createImageLoggingSession=function(e){return q(this,void 0,void 0,(function(){var n,t,i;return H(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),n=this.model.createImageLoggingSessionMap,t=e.id,[4,this.imageLoggingSessionService.create({startTime:(new Date).toISOString(),submission:e.id})];case 1:return n[t]=s.sent(),this.imageLoggingSessionState=!0,this.startTimer(),this.toastrService.success("Started photo timing session for submission "+e.jewelleryType.name+" ("+e.customer.fullName+")"),this.model.submissionPhotoTimingMap[e.id]=!this.model.submissionPhotoTimingMap[e.id],[3,3];case 2:return i=s.sent(),this.toastrService.error("Error starting image logging session!"),console.error(i),[3,3];case 3:return[2]}}))}))},n.prototype.endImageLoggingSession=function(e){return q(this,void 0,void 0,(function(){var n;return H(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.imageLoggingSessionService.updateEndTime({id:this.model.createImageLoggingSessionMap[e.id].createImageLoggingSession.imageLoggingSession.id,endTime:(new Date).toISOString()})];case 1:return t.sent(),this.imageLoggingSessionState=!1,this.endTimer(),this.toastrService.success("Ended photo timing session for "+e.jewelleryType.name+" ("+e.customer.fullName+")"),this.model.submissionPhotoTimingMap[e.id]=!1,[3,3];case 2:return n=t.sent(),this.toastrService.error("Error stopping image logging session!"),console.error(n),[3,3];case 3:return[2]}}))}))},n.prototype.selectRow=function(e){if(!this.submitting)if(e.selected){e.selected=!e.selected;var n=this.data.selections.findIndex((function(n){return n.submission.node.id===e.submission.node.id}));this.data.selections.splice(n,1)}else e.selected=!0,this.data.selections.push(e)},n.prototype.selectAll=function(){if(!this.submitting){if(this.state.allSelected=!this.state.allSelected,!this.state.allSelected)for(var e=0,n=this.data.submissionAndInfos;e<n.length;e++)(s=n[e]).selected=!0,this.selectRow(s);for(var t=0,i=this.data.submissionAndInfos;t<i.length;t++){var s;(s=i[t]).selected=this.state.allSelected,this.state.allSelected&&-1===this.data.selections.indexOf(s)&&this.data.selections.push(s)}}},n.prototype.createManufactureBatch=function(){var e=this;if(!this.submitting&&this.data.selections.length){this.submitting=!0;var n=(new Date).toISOString();this.toastrService.success(null,"Creating Batch"),this.submissionBatchService.create({status:d.k.id,createdAt:n,updatedAt:n,supplier:this.model.selectedSupplier.node.id,notes:this.model.batchNotes}).subscribe((function(n){e.data.mutationBatch=n.data.createSubmissionBatch.submissionBatch,e.toastrService.success(null,"Batch Created"),e.addSelectedToManufactureBatch()}))}},n.prototype.addSelectedToManufactureBatch=function(){for(var e=this,n=(new Date).toISOString(),t=0,i=0,s=this.toastrService.success(null,"Adding Items to Batch",{timeOut:3e4}),o=0,a=this.data.selections;o<a.length;o++){var c=a[o];if(c.submission.node.waxWeight){var r=c.submission.node.jobs.edges.find((function(e){return!1===e.node.complete}));i+=1,(r?this.jobService.updateOutgoingBatch({id:r.node.id,outgoingBatch:this.data.mutationBatch.id,status:d.k.id}):this.jobService.create({submission:c.submission.node.id,manufacturer:this.data.mutationBatch.supplier.id,status:d.k.id,outgoingBatch:this.data.mutationBatch.id,complete:!1,rush:!1,onHold:!1,createdAt:n})).subscribe((function(n){t+=1;for(var o=0,a=e.data.selections;o<a.length;o++){var c=a[o];if(n.data.updateJob&&n.data.updateJob.job.submission.id===c.submission.node.id){c.submission.node.status=d.k;break}if(n.data.createJob&&n.data.createJob.job.submission.id===c.submission.node.id){c.submission.node.status=d.k;break}}t===i?(s.toastRef.close(),e.toastrService.success(null,"Added "+i+" Items to Batch"),e.router.navigate(["manufacturing","batches","view",e.data.mutationBatch.id.replace(/\D/g,"")])):(s.toastRef.componentInstance.title="Added "+t+"/"+i+" Items to Batch",s.toastRef.timeoutReset())}))}else this.toastrService.info(null,"Item by "+c.submission.node.customer.fullName+" must be received and logged first")}0===i&&(s.toastRef.close(),this.submitting=!1)},n.prototype.resetSelections=function(){this.data.selections=[];for(var e=0,n=this.data.submissionAndInfos;e<n.length;e++)n[e].selected=!1},n.prototype.previousPage=function(){this.data.submissionAndInfos=[],this.resetSelections(),e.prototype.previousPage.call(this)},n.prototype.nextPage=function(){this.data.submissionAndInfos=[],this.resetSelections(),e.prototype.nextPage.call(this)},n.prototype.exportAddressData=function(){if(this.state.exporting=!0,this.data.selections.length<1)return this.toastrService.error("You must select at least one submission."),void(this.state.exporting=!1);for(var e,n=[],t=[],i=0,s=this.data.selections;i<s.length;i++)e=this.exportDataService.flattenObject(s[i],n),t.push(e.data),n=e.headers;this.exportDataService.whiteListColumns(["submission.node.id","fullName","address1","address2","city","county","postcode","country","email","castingCode"],t),this.exportDataService.renameColumns({"submission.node.id":"Order Reference"},t),this.exportDataService.addStaticValues({weight:.03,packageSize:"large letter",serviceCode:"BPR1",serviceRegisterCode:"01"},t),this.exportDataService.exportToCsv("submission_export_"+(new Date).toLocaleString(),Object.keys(t[0]),t),this.toastrService.success("Exported and downloading file"),this.state.exporting=!1},n.prototype.openWeightModal=function(e){this.modalService.open(this.submissionWeightModal,{keyboard:!1,centered:!0,backdrop:"static",size:"sm"}),this.data.submission=e},n.prototype.openActionRequiredModal=function(e){this.modalService.open(this.actionRequiredModal,{keyboard:!1,centered:!0,backdrop:"static",size:"md"}),this.data.submission=e},n.prototype.setStatusesFilter=function(e){this.statusesFilter=e},n.prototype.setSearch=function(e){this.model.searchInfo=e,this.updateTable(null)},n.prototype.markAsReceived=function(){return q(this,void 0,void 0,(function(){var e,n,t,i,s,o,a;return H(this,(function(c){switch(c.label){case 0:return this.data.submission?(e=null,n=this.model.waxWeight,t=this.model.measuredRingSize,this.model.waxWeight=null,this.model.measuredRingSize=null,t&&(e=t.node.id),i=this.data.submission,this.toastrService.info("Updating submission","Processing"),s={id:i.id,status:d.v.id,updatedAt:(new Date).toISOString(),waxWeight:n,measuredRingSize:e},[4,this.submissionService.update(s)]):(this.toastrService.warning("No submission selected","Warning!"),[2]);case 1:return(o=c.sent()).data&&o.data.updateSubmission.submission.status.id&&(i.status={id:(a=o.data.updateSubmission.submission.status).id,name:a.name,partnerComplete:a.partnerComplete,customerComplete:a.customerComplete,__typename:"Status"},i.waxWeight=n,t&&(i.measuredRingSize=t.node),this.toastrService.success("Submission ("+i.castingCode+") has been updated.","Complete")),this.data.submission=null,[2]}}))}))},n.prototype.markAsActioned=function(){return q(this,void 0,void 0,(function(){var e,n,t;return H(this,(function(i){switch(i.label){case 0:return this.data.submission.baseMetal.name===u.name||this.data.submission.baseMetalPaid?(e={id:this.data.submission.id,status:d.v.id,updatedAt:(new Date).toISOString()},this.modalService.dismissAll(),this.toastrService.info("","Updating Status"),[4,this.submissionService.update(e)]):[2];case 1:return(n=i.sent()).data&&n.data.updateSubmission.submission.status.id&&(this.data.submission.status={id:(t=n.data.updateSubmission.submission.status).id,name:t.name,partnerComplete:t.partnerComplete,customerComplete:t.customerComplete,__typename:"Status"},this.toastrService.success("Submission ("+this.getNumericId(n.data.updateSubmission.submission.id)+") status has been updated.","Complete")),[2]}}))}))},n.prototype.sendGenericBaseMetalEmail=function(){return q(this,void 0,void 0,(function(){var e;return H(this,(function(n){switch(n.label){case 0:return this.toastrService.info("","Sending Email"),this.modalService.dismissAll(),[4,this.submissionService.sendBaseMetalAndOverweightEmail(this.data.submission.customer.email,this.data.submission.id)];case 1:return(e=n.sent()).success?this.toastrService.success(this.data.submission.customer.email+" has been sent the upgrade base metal / overweight item email","Sent"):this.toastrService.error(e.message,"Something went wrong while attempting to send email"),[2]}}))}))},n.\u0275fac=function(e){return new(e||n)(s.jc(b.a),s.jc(f.a),s.jc(v.a),s.jc(y.a),s.jc(S.a),s.jc(C.i),s.jc(w.a),s.jc(I.b),s.jc(M.a),s.jc(k.a),s.jc(x.a),s.jc(B.a),s.jc($.a),s.jc(P.b))},n.\u0275cmp=s.dc({type:n,selectors:[["ng-component"]],viewQuery:function(e,n){if(1&e&&(s.od(K,5),s.od(Y,5)),2&e){var t=void 0;s.Sc(t=s.zc())&&(n.submissionWeightModal=t.first),s.Sc(t=s.zc())&&(n.actionRequiredModal=t.first)}},hostBindings:function(e,n){1&e&&s.yc("beforeunload",(function(e){return n.unloadNotification(e)}),!1,s.Vc)},features:[s.Sb],decls:79,vars:53,consts:[["subtitle","All Created Submissions","title","All Submissions"],[1,"container","form-container"],["novalidate",""],["allSubmissionsForm","ngForm"],[1,"row","mt-5","transparent","justify-content-center"],[1,"col"],[1,"row","text-center"],[1,"col-sm-10"],["data-toggle","buttons",1,"btn-group","btn-group-toggle"],[1,"btn","btn-primary","nav-group"],["autocomplete","off","id","statusGroupNotStarted","name","statusGroupNotStarted","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","statusGroupInProgress","name","statusGroupInProgress","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","statusGroupComplete","name","statusGroupComplete","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","statusGroupDispatched","name","statusGroupDispatched","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","statusGroupReturned","name","statusGroupReturned","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","statusGroupCancelled","name","statusGroupCancelled","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","statusGroupStarred","name","statusGroupStarred","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","allStatuses","name","allStatuses","type","radio",3,"ngModel","value","change","ngModelChange"],[1,"col-sm-2"],["ngbDropdown","",1,"d-inline-block"],["id","sortMenu","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["aria-labelledby","sortMenu","ngbDropdownMenu",""],[4,"ngIf"],["class","btn btn-outline-primary","ngbDropdownItem","",4,"ngIf"],[1,"row","mt-3"],[1,"col-12"],[1,"tc"],[3,"setSearch","searchFields","searchEmitter"],[1,"table-responsive","show-overflow"],[1,"table","list-view"],[1,"shrink","checkbox"],["class","checkbox-wrapper checkbox-inline","style","margin: 0;",4,"ngIf"],[1,"shrink"],[1,"filter-column"],[3,"statusesFilter","closed"],[1,"tr"],["class","text-center",4,"ngIf"],[3,"state","nextPage","previousPage",4,"ngIf"],[3,"size",4,"ngIf"],["modalCreateSupplierBatch",""],["modalAddToManufactureBatch",""],["submissionWeightModal",""],["actionRequiredModal",""],["ngbDropdownItem","",1,"btn","btn-outline-primary",3,"click"],["ngbDropdownItem","",1,"btn","btn-outline-primary"],[1,"checkbox-wrapper","checkbox-inline",2,"margin","0"],["id","selectAll","name","selectAll","type","checkbox",3,"ngModel","value","click","ngModelChange"],["for","selectAll"],[1,"spacer",2,"height","21px"],["colspan","42"],[1,"selected-text"],[4,"ngFor","ngForOf"],[1,"pr-0","checkbox",3,"click"],["type","checkbox",3,"ngModel","name","id","click","ngModelChange"],[3,"for"],["class","text-warning fas fa-star mr-2",4,"ngIf"],[1,"fas","fa-camera","mr-2"],["class","fas text-success fa-ring",4,"ngIf"],[3,"click"],[3,"color-danger","color-success",4,"ngIf"],[1,"status"],[1,"btn-group"],["class","btn icon-btn-outline mx-1 fas","type","button",3,"fa-stop","fa-stopwatch-20","hover","disabled","click",4,"ngIf"],["class","btn icon-btn-outline mx-1 fas fa-clipboard-check hover text-danger","type","button",3,"disabled","click",4,"ngIf"],[3,"hover","loadingNotes","submissionId","notes","customerNote","isAdmin"],["class","btn icon-btn-outline mx-1 fas fa-exclamation-circle text-danger","type","button",3,"disabled","click",4,"ngIf"],[3,"buttonStyle","castingCode","isAdmin","loadingCastingCode","loadingStones","photos","stones","submission","jobs",4,"ngIf"],[1,"text-warning","fas","fa-star","mr-2"],[1,"fas","text-success","fa-ring"],[3,"routerLink"],[1,"fas"],["type","button",1,"btn","icon-btn-outline","mx-1","fas",3,"disabled","click"],["aria-hidden","true","class","spinner-border spinner-border-sm",4,"ngIf"],["aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","icon-btn-outline","mx-1","fas","fa-clipboard-check","hover","text-danger",3,"disabled","click"],["type","button",1,"btn","icon-btn-outline","mx-1","fas","fa-exclamation-circle","text-danger",3,"disabled","click"],[3,"buttonStyle","castingCode","isAdmin","loadingCastingCode","loadingStones","photos","stones","submission","jobs"],["colspan","72"],[1,"text-muted","text-center"],[1,"row","align-items-center","justify-content-center"],[1,"shimmer-container","col-4"],[1,"shimmer","py-2"],[1,"row","align-items-center"],[1,"shimmer-container","col-10"],[1,"shimmer-container","col-5"],[1,"shimmer-container","col-6"],[1,"shimmer-container","col-2"],[1,"shimmer","pl-1","py-2"],[1,"shimmer-container","col-8"],[1,"text-center"],[3,"size"],[3,"state","nextPage","previousPage"],["title","Create Supplier Batch?",3,"modal"],[1,"modal-body"],["createSupplierBatchModalForm","ngForm"],[1,"form-group","mb-0"],["for","selectSupplier",1,"req"],["appShowErrorInputClass","","id","selectSupplier","name","selectSupplier","placeholder","-- Please Select --","required","",3,"ngModel","searchable","ngModelChange"],["selectSupplier","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"form","modal","saveButtonName","modalSaved"],[3,"value"],["class","mt-3","for","batchNotes",4,"ngIf"],["id","batchNotes","maxlength","511","name","batchNotes",1,"col-12","ta-medium-height",3,"ngModel","ngModelChange"],["batchNotes","ngModel"],["for","batchNotes",1,"mt-3"],["title","Add To Batch",3,"modal"],["addToManufactureBatchModalForm","ngForm"],["appShowErrorInputClass","","id","selectBatch","name","selectBatch","placeholder","-- Please Select --","required","",3,"ngModel","searchable","ngModelChange"],[3,"modal","title"],["updateWaxWeightForm","ngForm"],[1,"form-group"],["for","waxWeight",1,"req"],["appShowErrorInputClass","","id","waxWeight","maxlength","255","min","0","name","waxWeight","placeholder","0.000g","required","","type","number",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],["for","measuredRingSize",1,"req"],["appShowErrorInputClass","","id","measuredRingSize","name","measuredRingSize","placeholder","-- Please Select--",3,"ngModel","notFoundText","searchable","ngModelChange"],["measuredRingSize","ngModel"],[3,"field"],[3,"value",4,"ngIf"],[1,"row"],[1,"col-sm-6"],[1,"col-sm-12"],[3,"href"],[1,"row","mt-5","justify-content-center","tc"],["class","col-sm-6",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"]],template:function(e,n){1&e&&(s.kc(0,"page-title",0),s.pc(1,"div",1),s.pc(2,"form",2,3),s.pc(4,"div",4),s.pc(5,"div",5),s.pc(6,"div",6),s.pc(7,"div",7),s.pc(8,"div",8),s.pc(9,"label",9),s.pc(10,"input",10),s.yc("change",(function(){return n.onChangeStatusGroupFilter()}))("ngModelChange",(function(e){return n.model.statusGroup=e})),s.oc(),s.id(11," Not Started "),s.oc(),s.pc(12,"label",9),s.pc(13,"input",11),s.yc("change",(function(){return n.onChangeStatusGroupFilter()}))("ngModelChange",(function(e){return n.model.statusGroup=e})),s.oc(),s.id(14," In Progress "),s.oc(),s.pc(15,"label",9),s.pc(16,"input",12),s.yc("change",(function(){return n.onChangeStatusGroupFilter()}))("ngModelChange",(function(e){return n.model.statusGroup=e})),s.oc(),s.id(17," Complete "),s.oc(),s.pc(18,"label",9),s.pc(19,"input",13),s.yc("change",(function(){return n.onChangeStatusGroupFilter()}))("ngModelChange",(function(e){return n.model.statusGroup=e})),s.oc(),s.id(20," Dispatched "),s.oc(),s.pc(21,"label",9),s.pc(22,"input",14),s.yc("change",(function(){return n.onChangeStatusGroupFilter()}))("ngModelChange",(function(e){return n.model.statusGroup=e})),s.oc(),s.id(23," Returned "),s.oc(),s.pc(24,"label",9),s.pc(25,"input",15),s.yc("change",(function(){return n.onChangeStatusGroupFilter()}))("ngModelChange",(function(e){return n.model.statusGroup=e})),s.oc(),s.id(26," Cancelled "),s.oc(),s.pc(27,"label",9),s.pc(28,"input",16),s.yc("change",(function(){return n.onChangeStatusGroupFilter()}))("ngModelChange",(function(e){return n.model.statusGroup=e})),s.oc(),s.id(29," Starred "),s.oc(),s.pc(30,"label",9),s.pc(31,"input",17),s.yc("change",(function(){return n.onChangeStatusGroupFilter()}))("ngModelChange",(function(e){return n.model.statusGroup=e})),s.oc(),s.id(32," All "),s.oc(),s.oc(),s.oc(),s.pc(33,"div",18),s.pc(34,"div",19),s.pc(35,"button",20),s.id(36,"Action"),s.oc(),s.pc(37,"div",21),s.gd(38,Z,3,2,"ng-container",22),s.gd(39,ee,2,0,"button",23),s.oc(),s.oc(),s.oc(),s.oc(),s.pc(40,"div",24),s.pc(41,"div",25),s.pc(42,"div",26),s.pc(43,"search",27),s.yc("searchEmitter",(function(e){return n.setSearch(e)})),s.oc(),s.oc(),s.oc(),s.oc(),s.pc(44,"div",28),s.pc(45,"table",29),s.pc(46,"thead"),s.pc(47,"tr"),s.pc(48,"th",30),s.gd(49,ne,3,2,"div",31),s.oc(),s.kc(50,"th",32),s.pc(51,"th"),s.id(52,"Customer"),s.oc(),s.pc(53,"th"),s.id(54,"Submission"),s.oc(),s.pc(55,"th"),s.id(56,"Detail"),s.oc(),s.pc(57,"th"),s.id(58,"Type"),s.oc(),s.pc(59,"th"),s.id(60,"Paid (\xa3)"),s.oc(),s.pc(61,"th"),s.id(62,"Submitted"),s.oc(),s.pc(63,"th",33),s.pc(64,"status-filter",34),s.yc("closed",(function(){return n.updateTable(null)})),s.oc(),s.oc(),s.kc(65,"th",35),s.oc(),s.oc(),s.gd(66,he,6,2,"tbody",22),s.gd(67,fe,5,1,"tbody",22),s.oc(),s.gd(68,ve,2,1,"div",36),s.oc(),s.gd(69,ye,1,1,"table-controls",37),s.oc(),s.oc(),s.oc(),s.oc(),s.gd(70,Se,1,1,"loading-ring",38),s.gd(71,Me,12,8,"ng-template",null,39,s.hd),s.gd(73,xe,11,7,"ng-template",null,40,s.hd),s.gd(75,Te,11,9,"ng-template",null,41,s.hd),s.gd(77,Ae,30,12,"ng-template",null,42,s.hd)),2&e&&(s.Vb(4),s.bc("form-blocked",!0===n.submitting),s.Vb(5),s.bc("active",n.model.statusGroup===n.statusGroupNotStarted),s.Wb("disabled",n.state.loading||n.imageLoggingSessionState),s.Vb(1),s.Jc("ngModel",n.model.statusGroup)("value",n.statusGroupNotStarted),s.Vb(2),s.bc("active",n.model.statusGroup===n.statusGroupInProgress),s.Wb("disabled",n.state.loading||n.imageLoggingSessionState),s.Vb(1),s.Jc("ngModel",n.model.statusGroup)("value",n.statusGroupInProgress),s.Vb(2),s.bc("active",n.model.statusGroup===n.statusGroupComplete),s.Wb("disabled",n.state.loading||n.imageLoggingSessionState),s.Vb(1),s.Jc("ngModel",n.model.statusGroup)("value",n.statusGroupComplete),s.Vb(2),s.bc("active",n.model.statusGroup===n.statusGroupDispatched),s.Wb("disabled",n.state.loading||n.imageLoggingSessionState),s.Vb(1),s.Jc("ngModel",n.model.statusGroup)("value",n.statusGroupDispatched),s.Vb(2),s.bc("active",n.model.statusGroup===n.statusGroupReturned),s.Wb("disabled",n.state.loading||n.imageLoggingSessionState),s.Vb(1),s.Jc("ngModel",n.model.statusGroup)("value",n.statusGroupReturned),s.Vb(2),s.bc("active",n.model.statusGroup===n.statusGroupCancelled),s.Wb("disabled",n.state.loading||n.imageLoggingSessionState),s.Vb(1),s.Jc("ngModel",n.model.statusGroup)("value",n.statusGroupCancelled),s.Vb(2),s.bc("active",n.model.statusGroup===n.statusGroupStarred),s.Wb("disabled",n.state.loading||n.imageLoggingSessionState),s.Vb(1),s.Jc("ngModel",n.model.statusGroup)("value",n.statusGroupStarred),s.Vb(2),s.bc("active",n.model.statusGroup===n.statusGroupAll),s.Wb("disabled",n.state.loading||n.imageLoggingSessionState),s.Vb(1),s.Jc("ngModel",n.model.statusGroup)("value",n.statusGroupAll),s.Vb(7),s.Jc("ngIf",!n.loadingActions),s.Vb(1),s.Jc("ngIf",n.loadingActions),s.Vb(4),s.Jc("setSearch",n.defaultSearch)("searchFields",n.searchFields),s.Vb(6),s.Jc("ngIf",!n.state.loading),s.Vb(15),s.Jc("statusesFilter",n.statusesFilter),s.Vb(2),s.Jc("ngIf",!n.state.loading||n.data.submissionAndInfos.length),s.Vb(1),s.Jc("ngIf",n.state.loading&&!n.data.submissionAndInfos.length),s.Vb(1),s.Jc("ngIf",n.state.loading),s.Vb(1),s.Jc("ngIf",!n.state.loading),s.Vb(1),s.Jc("ngIf",n.submitting))},directives:[T.a,a.x,a.n,a.o,a.t,a.d,a.m,a.p,C.c,C.h,C.f,o.p,m.a,j.a,C.e,a.a,o.o,A.a,I.e,V.a,O.a,F.a,D.a,_.a,J.a,N.a,a.u,z.a,J.e,a.g,a.j,a.r,L.a],pipes:[R.a,o.y,E.a,G.a,W.a,o.A,o.e],styles:[""]}),n}(r.a),_e=t("oZ8P"),Je=t("UYTu"),Ne=Object(Je.a)(Ve||(Oe=["\n    query submissionsByIdSimple($id: ID!) {\n        submission(id: $id) {\n            id\n            status {\n                id\n                name\n            }\n            jewelleryType {\n                id\n                name\n            }\n            submittedAt\n            amountPaid\n            totalPrice\n            customer {\n                id\n                fullName\n                email\n                address1\n                address2\n                city\n                county\n                postcode\n                country\n            }\n        }\n    }\n"],Fe=["\n    query submissionsByIdSimple($id: ID!) {\n        submission(id: $id) {\n            id\n            status {\n                id\n                name\n            }\n            jewelleryType {\n                id\n                name\n            }\n            submittedAt\n            amountPaid\n            totalPrice\n            customer {\n                id\n                fullName\n                email\n                address1\n                address2\n                city\n                county\n                postcode\n                country\n            }\n        }\n    }\n"],Object.defineProperty?Object.defineProperty(Oe,"raw",{value:Fe}):Oe.raw=Fe,Ve=Oe)),ze=t("/IUn"),Le=function(){function e(e){this.apollo=e}return e.prototype.getSubmissionByIdSimple=function(e){return this.apollo.query({query:Ne,variables:{id:e}})},e.\u0275fac=function(n){return new(n||e)(s.wc(ze.b))},e.\u0275prov=s.fc({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function Re(e,n){if(1&e&&(s.pc(0,"pre",15),s.id(1,"        "),s.pc(2,"code",15),s.id(3,"\n            "),s.pc(4,"span",16),s.id(5,"\n                "),s.pc(6,"span",17),s.id(7,"Submission ID: "),s.oc(),s.id(8),s.oc(),s.id(9,"\n        "),s.oc(),s.id(10,"\n    "),s.oc()),2&e){s.Cc();var t=s.Tc(6);s.Vb(8),s.kd("\n              ",t.value,"\n            ")}}function Ee(e,n){1&e&&(s.pc(0,"td"),s.kc(1,"loading-ring",20),s.oc()),2&e&&(s.Vb(1),s.Jc("size",20))}function Ge(e,n){1&e&&(s.pc(0,"td",11),s.id(1,"Success"),s.oc())}function We(e,n){1&e&&(s.pc(0,"td",11),s.id(1,"Fetched"),s.oc())}function Ue(e,n){1&e&&(s.pc(0,"td",11),s.id(1,"Error"),s.oc())}function qe(e,n){1&e&&(s.pc(0,"td",11),s.id(1,"Already Scanned"),s.oc())}function He(e,n){if(1&e&&(s.pc(0,"tr"),s.pc(1,"td"),s.id(2),s.oc(),s.gd(3,Ee,2,1,"td",18),s.gd(4,Ge,2,0,"td",19),s.gd(5,We,2,0,"td",19),s.gd(6,Ue,2,0,"td",19),s.gd(7,qe,2,0,"td",19),s.oc()),2&e){var t=n.$implicit;s.Vb(2),s.jd(t.id),s.Vb(1),s.Jc("ngIf","loading"===t.status),s.Vb(1),s.Jc("ngIf","success"===t.status),s.Vb(1),s.Jc("ngIf","fetched"===t.status),s.Vb(1),s.Jc("ngIf","error"===t.status),s.Vb(1),s.Jc("ngIf","alreadyScanned"===t.status)}}function Ke(e,n){if(1&e){var t=s.qc();s.kc(0,"modal-header",2),s.pc(1,"div",3),s.pc(2,"div",4),s.kc(3,"img",5),s.gd(4,Re,11,1,"pre",6),s.oc(),s.pc(5,"input",7,8),s.yc("ngModelChange",(function(e){return s.Wc(t),s.Cc()._barcodeValue=e}))("keyup.enter",(function(){return s.Wc(t),s.Cc().onScanned()})),s.oc(),s.pc(7,"div",9),s.pc(8,"table",10),s.pc(9,"thead"),s.pc(10,"tr"),s.pc(11,"th"),s.id(12,"ID"),s.oc(),s.pc(13,"th",11),s.id(14,"STATUS"),s.oc(),s.oc(),s.oc(),s.pc(15,"tbody"),s.gd(16,He,8,6,"tr",12),s.oc(),s.oc(),s.oc(),s.oc(),s.pc(17,"div",13),s.pc(18,"button",14),s.yc("click",(function(){return s.Wc(t),s.Cc().modalService.dismissAll()})),s.id(19," Done Scanning "),s.oc(),s.oc()}if(2&e){var i=n.$implicit,o=s.Tc(6),a=s.Cc();s.Jc("modal",i),s.Vb(4),s.Jc("ngIf",o.value),s.Vb(1),s.Jc("ngModel",a._barcodeValue),s.Vb(11),s.Jc("ngForOf",a.scanned)}}var Ye=function(){function e(e){this.modalService=e,this.scanned=[],this._onScanned=new s.u}return Object.defineProperty(e.prototype,"disabled",{set:function(e){this._disabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateScanned",{set:function(e){for(var n=0,t=this.scanned;n<t.length;n++){var i=t[n];if(e.id===i.id)return void(i.status=e.status)}},enumerable:!1,configurable:!0}),e.prototype.onScanned=function(){if(null!==this._barcodeValue){for(var e=0,n=this.scanned;e<n.length;e++)if(n[e].id===this._barcodeValue)return this.scanned.push({id:this._barcodeValue,status:"alreadyScanned"}),void(this._barcodeValue=null);this.scanned.push({id:this._barcodeValue,status:"loading"}),this._onScanned.emit(this._barcodeValue),this._barcodeValue=null}},e.prototype.openScannerModal=function(e){var n=this;this.modalService.open(e).result.then((function(){clearInterval(n.scannerInterval)}),(function(){clearInterval(n.scannerInterval)})),this.scannerInterval=setInterval((function(e){document.getElementById("scannerInput").focus()}),100)},e.\u0275fac=function(n){return new(n||e)(s.jc(C.i))},e.\u0275cmp=s.dc({type:e,selectors:[["scanner-modal"]],inputs:{disabled:"disabled",updateScanned:"updateScanned"},outputs:{_onScanned:"_onScanned"},decls:4,vars:1,consts:[["type","button",1,"btn","btn-primary",3,"disabled","click"],["scanModal",""],["title","Scanning Now",3,"modal"],[1,"modal-body"],[1,"text-center"],["src","/assets/img/barcode.gif",2,"max-width","50%"],["class","language-term",4,"ngIf"],["id","scannerInput",1,"ui-hidden-accessible",3,"ngModel","ngModelChange","keyup.enter"],["barcodeValue","ngModel"],[1,"table-responsive"],[1,"table"],[1,"tc"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],[1,"language-term"],[1,"token","input"],[1,"token","prompt"],[4,"ngIf"],["class","tc",4,"ngIf"],[3,"size"]],template:function(e,n){if(1&e){var t=s.qc();s.pc(0,"button",0),s.yc("click",(function(){s.Wc(t);var e=s.Tc(3);return n.openScannerModal(e)})),s.id(1," Scan\n"),s.oc(),s.gd(2,Ke,20,4,"ng-template",null,1,s.hd)}2&e&&s.Jc("disabled",n._disabled)},directives:[_.a,o.p,a.d,a.m,a.p,o.o,F.a],styles:[""]}),e}();function Xe(e,n){if(1&e){var t=s.qc();s.nc(0),s.pc(1,"tr"),s.Dc(2,"lowercase"),s.pc(3,"td"),s.id(4),s.oc(),s.pc(5,"td"),s.id(6),s.Dc(7,"titlecase"),s.oc(),s.pc(8,"td"),s.id(9),s.Dc(10,"currency"),s.oc(),s.pc(11,"td"),s.id(12),s.Dc(13,"simpleDateTime"),s.oc(),s.pc(14,"td",23),s.pc(15,"span"),s.id(16),s.oc(),s.oc(),s.pc(17,"td",24),s.pc(18,"button",25),s.yc("click",(function(){var e=s.Wc(t).$implicit;return s.Cc(2).viewSubmission(e.id)})),s.kc(19,"span",26),s.oc(),s.oc(),s.oc(),s.mc()}if(2&e){var i=n.$implicit;s.Vb(1),s.Yb("status-",s.Ec(2,8,i.status),""),s.Vb(3),s.jd(i.customerName),s.Vb(2),s.jd(s.Ec(7,10,i.jewelleryType)),s.Vb(3),s.jd(s.Ec(10,12,i.totalPrice)),s.Vb(3),s.jd(s.Ec(13,14,i.submittedAt)),s.Vb(4),s.jd(i.status)}}function Qe(e,n){1&e&&(s.pc(0,"tr"),s.pc(1,"td",27),s.pc(2,"p",28),s.id(3,"No submissions scanned"),s.oc(),s.oc(),s.oc())}function Ze(e,n){if(1&e&&(s.pc(0,"div",3),s.pc(1,"div",4),s.pc(2,"div",19),s.pc(3,"table",20),s.pc(4,"thead"),s.pc(5,"tr"),s.pc(6,"th"),s.id(7,"Customer"),s.oc(),s.pc(8,"th"),s.id(9,"Type"),s.oc(),s.pc(10,"th"),s.id(11,"Paid (\xa3)"),s.oc(),s.pc(12,"th"),s.id(13,"Submitted"),s.oc(),s.pc(14,"th"),s.id(15,"Status"),s.oc(),s.kc(16,"th"),s.oc(),s.oc(),s.pc(17,"tbody"),s.gd(18,Xe,20,16,"ng-container",21),s.gd(19,Qe,4,0,"tr",22),s.oc(),s.oc(),s.oc(),s.oc(),s.oc()),2&e){var t=s.Cc();s.Vb(18),s.Jc("ngForOf",t.data.scannedItems),s.Vb(1),s.Jc("ngIf",!t.data.scannedItems.length)}}var en=function(){return function(e,n,t,i,s,o,a,c,r,d,u,l,p,m){this.id=e,this.status=n,this.jewelleryType=t,this.submittedAt=i,this.amountPaid=s,this.totalPrice=o,this.customerEmail=a,this.customerName=c,this.address1=r,this.address2=d,this.city=u,this.county=l,this.postcode=p,this.country=m}}(),nn=function(){function e(e,n,t,i,s,o){this.appUserService=e,this.exportDataService=n,this.router=t,this.eventSubmissionService=i,this.submissionService=s,this.toastr=o,this.receivedByCAST="receivedByCAST",this.atManufacturing="atManufacturing",this.backAtCAST="backAtCAST",this.sentToCustomer="sentToCustomer",this.onlyFetch="onlyFetch",this.model={typeScan:null,status:null,updateScanned:null},this.data={scannedIds:[],scannedItems:[]},this.state={isAdmin:!1,exporting:!1}}return e.prototype.ngOnInit=function(){var e=this;this.appUserService.getMe().subscribe((function(n){e.state.isAdmin=e.appUserService.isAdmin(n.data.appUser.roles)}))},e.prototype.onChangeSubmissionType=function(){},e.prototype.submissionScanned=function(e){var n=this,t=new Date,i=null;switch(this.model.typeScan){case this.receivedByCAST:i=d.v.id;break;case this.atManufacturing:i=d.m.id;break;case this.backAtCAST:i=d.f.id;break;case this.sentToCustomer:i=d.u.id;break;case this.onlyFetch:i=null}var s="/submissions/"+e;if(i){var o={id:s,updatedAt:t.toUTCString(),status:i};this.eventSubmissionService.update(o).then((function(t){if(t.data.updateSubmission){var i=t.data.updateSubmission.submission,s=new en(i.id,i.status.name,i.jewelleryType?i.jewelleryType.name:null,i.submittedAt,i.amountPaid,i.totalPrice,i.customer.email,i.customer.fullName,i.customer.address1,i.customer.address2,i.customer.city,i.customer.county,i.customer.postcode,i.customer.country);n.data.scannedItems.push(s),n.model.updateScanned={id:i.id.replace(/\D/g,""),status:"success"}}else n.model.updateScanned={id:e,status:"error"}}),(function(t){n.model.updateScanned={id:e,status:"error"}}))}else this.submissionService.getSubmissionByIdSimple(s).subscribe((function(t){if(t.data.submission){var i=new en(t.data.submission.id,t.data.submission.status.name,t.data.submission.jewelleryType?t.data.submission.jewelleryType.name:null,t.data.submission.submittedAt,t.data.submission.amountPaid,t.data.submission.totalPrice,t.data.submission.customer.email,t.data.submission.customer.fullName,t.data.submission.customer.address1,t.data.submission.customer.address2,t.data.submission.customer.city,t.data.submission.customer.county,t.data.submission.customer.postcode,t.data.submission.customer.country);n.data.scannedItems.push(i),n.model.updateScanned={id:t.data.submission.id.replace(/\D/g,""),status:"fetched"}}else n.model.updateScanned={id:e,status:"error"}}),(function(t){n.model.updateScanned={id:e,status:"error"}}))},e.prototype.viewSubmission=function(e){this.router.navigate(["submission","view",e.replace(/\D/g,"")])},e.prototype.exportAddresses=function(){if(this.state.exporting=!0,this.data.scannedItems.length<1)return this.toastr.error("You must scan at least one barcode."),void(this.state.exporting=!1);for(var e,n=[],t=[],i=0,s=this.data.scannedItems;i<s.length;i++)e=this.exportDataService.flattenObject(s[i],n),t.push(e.data),n=e.headers;this.exportDataService.whiteListColumns(["id","jewelleryType","customerName","address1","address2","city","county","postcode","country","customerEmail"],t),this.exportDataService.renameColumns({id:"Order Reference",customerName:"Full Name",customerEmail:"Email Address"},t),this.exportDataService.addStaticValues({weight:.06,packageSize:"large letter",serviceCode:"BPR1",serviceRegisterCode:"01"},t),this.exportDataService.exportToCsv("Scanned_submissions_export_"+(new Date).toLocaleString(),Object.keys(t[0]),t),this.toastr.success("Exported and downloading file"),this.state.exporting=!1},e.\u0275fac=function(n){return new(n||e)(s.jc(b.a),s.jc(v.a),s.jc(I.b),s.jc(B.a),s.jc(Le),s.jc(P.b))},e.\u0275cmp=s.dc({type:e,selectors:[["ng-component"]],decls:31,vars:23,consts:[["title","Scan In Submissions"],["novalidate",""],["scanSubmissionsForm","ngForm"],[1,"card","mt-5"],[1,"card-body"],[1,"row","text-center","mb-5"],[1,"col-sm-12"],["data-toggle","buttons",1,"btn-group","btn-group-toggle"],[1,"btn","btn-primary","nav-group"],["type","radio","name","receivedByCAST","id","receivedByCAST","autocomplete","off",3,"value","ngModel","ngModelChange","change"],["type","radio","name","atManufacturing","id","atManufacturing","autocomplete","off",3,"value","ngModel","ngModelChange","change"],["type","radio","name","backAtCAST","id","backAtCAST","autocomplete","off",3,"value","ngModel","ngModelChange","change"],["type","radio","name","sentToCustomer","id","sentToCustomer","autocomplete","off",3,"value","ngModel","ngModelChange","change"],["type","radio","name","onlyFetch","id","onlyFetch","autocomplete","off",3,"value","ngModel","ngModelChange","change"],[1,"row","my-2"],[1,"col-12","tc"],[3,"disabled","updateScanned","_onScanned"],["type","button",1,"btn","btn-primary",3,"click"],["class","card mt-5",4,"ngIf"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"status"],[1,"tr"],["type","button",1,"small-button","btn-outline-secondary","round",3,"click"],[1,"fa","fa-eye"],["colspan","6"],[1,"text-muted","text-center"]],template:function(e,n){1&e&&(s.kc(0,"page-title",0),s.pc(1,"form",1,2),s.pc(3,"div",3),s.pc(4,"div",4),s.pc(5,"div",5),s.pc(6,"div",6),s.pc(7,"div",7),s.pc(8,"label",8),s.pc(9,"input",9),s.yc("ngModelChange",(function(e){return n.model.typeScan=e}))("change",(function(){return n.onChangeSubmissionType()})),s.oc(),s.id(10," Received by CAST "),s.oc(),s.pc(11,"label",8),s.pc(12,"input",10),s.yc("ngModelChange",(function(e){return n.model.typeScan=e}))("change",(function(){return n.onChangeSubmissionType()})),s.oc(),s.id(13," At Manufacturing "),s.oc(),s.pc(14,"label",8),s.pc(15,"input",11),s.yc("ngModelChange",(function(e){return n.model.typeScan=e}))("change",(function(){return n.onChangeSubmissionType()})),s.oc(),s.id(16," Back At CAST "),s.oc(),s.pc(17,"label",8),s.pc(18,"input",12),s.yc("ngModelChange",(function(e){return n.model.typeScan=e}))("change",(function(){return n.onChangeSubmissionType()})),s.oc(),s.id(19," Sent to Customer "),s.oc(),s.pc(20,"label",8),s.pc(21,"input",13),s.yc("ngModelChange",(function(e){return n.model.typeScan=e}))("change",(function(){return n.onChangeSubmissionType()})),s.oc(),s.id(22," Read Only "),s.oc(),s.oc(),s.oc(),s.oc(),s.pc(23,"div",14),s.pc(24,"div",15),s.pc(25,"scanner-modal",16),s.yc("_onScanned",(function(e){return n.submissionScanned(e)})),s.oc(),s.oc(),s.oc(),s.pc(26,"div",14),s.pc(27,"div",15),s.pc(28,"button",17),s.yc("click",(function(){return n.exportAddresses()})),s.id(29," Export Submissions "),s.oc(),s.oc(),s.oc(),s.oc(),s.oc(),s.gd(30,Ze,20,2,"div",18),s.oc()),2&e&&(s.Vb(8),s.bc("active",n.model.typeScan===n.receivedByCAST),s.Vb(1),s.Jc("value",n.receivedByCAST)("ngModel",n.model.typeScan),s.Vb(2),s.bc("active",n.model.typeScan===n.atManufacturing),s.Vb(1),s.Jc("value",n.atManufacturing)("ngModel",n.model.typeScan),s.Vb(2),s.bc("active",n.model.typeScan===n.backAtCAST),s.Vb(1),s.Jc("value",n.backAtCAST)("ngModel",n.model.typeScan),s.Vb(2),s.bc("active",n.model.typeScan===n.sentToCustomer),s.Vb(1),s.Jc("value",n.sentToCustomer)("ngModel",n.model.typeScan),s.Vb(2),s.bc("active",n.model.typeScan===n.onlyFetch),s.Vb(1),s.Jc("value",n.onlyFetch)("ngModel",n.model.typeScan),s.Vb(4),s.Jc("disabled",null===n.model.typeScan)("updateScanned",n.model.updateScanned),s.Vb(5),s.Jc("ngIf",n.data.scannedItems.length>0))},directives:[T.a,a.x,a.n,a.o,a.t,a.d,a.m,a.p,Ye,o.p,o.o],pipes:[o.m,o.y,E.a,G.a],styles:[""]}),e}(),tn=t("pk+g"),sn=t("kvL/"),on=t("1OyB"),an=t("vuIU"),cn=t("zuWl"),rn=function(){var e=function(){function e(){Object(on.a)(this,e)}return Object(an.a)(e,[{key:"transform",value:function(n,t){return Array.isArray(n)?n.map((function(n){return e.transformOne(n,t)})):e.transformOne(n,t)}}],[{key:"transformOne",value:function(e,n){return cn(e,n)}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=s.ic({name:"filesize",type:e,pure:!0}),e}(),dn=function(){var e=function e(){Object(on.a)(this,e)};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=s.hc({type:e}),e.\u0275inj=s.gc({}),e}(),un=function(e,n,t,i){return new(t||(t=Promise))((function(s,o){function a(e){try{r(i.next(e))}catch(n){o(n)}}function c(e){try{r(i.throw(e))}catch(n){o(n)}}function r(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,c)}r((i=i.apply(e,n||[])).next())}))},ln=function(e,n){var t,i,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,i&&(s=2&o[0]?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=n.call(e,a)}catch(c){o=[6,c],i=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};function pn(e,n){if(1&e){var t=s.qc();s.pc(0,"ngx-dropzone-preview",10),s.yc("removed",(function(){var e=s.Wc(t).$implicit;return s.Cc().onRemove(e)})),s.pc(1,"ngx-dropzone-label"),s.id(2),s.oc(),s.oc()}if(2&e){var i=n.$implicit;s.Jc("file",i)("removable",!0),s.Vb(2),s.ld("",i.name," (",i.type,")")}}function mn(e,n){if(1&e&&(s.nc(0),s.id(1),s.mc()),2&e){var t=s.Cc(2);s.Vb(1),s.kd(" of ",t.data.files.length,"")}}function gn(e,n){1&e&&(s.nc(0),s.id(1,"s"),s.mc())}function hn(e,n){if(1&e&&(s.pc(0,"p",11),s.id(1),s.gd(2,mn,2,1,"ng-container",12),s.id(3," file"),s.gd(4,gn,2,0,"ng-container",12),s.id(5),s.Dc(6,"filesize"),s.oc()),2&e){var t=s.Cc();s.Vb(1),s.kd("Uploaded: ",t.uploaded," "),s.Vb(1),s.Jc("ngIf",t.state.submitting),s.Vb(2),s.Jc("ngIf",t.data.files.length>1&&t.state.submitting||t.uploaded>1),s.Vb(1),s.kd(" (",s.Ec(6,4,t.bytesUploaded),")")}}function bn(e,n){1&e&&s.kc(0,"loading-ring",13),2&e&&s.Jc("size",100)}var fn=[{path:"list",component:De},{path:"view/:id",component:_e.a},{path:"scan",component:nn},{path:"upload",component:function(){function e(e,n){this.fileUploadService=e,this.toastr=n,this.numUploadsToProcess=20,this.uploadBatchSize=8,this.signBatchSize=50,this.data={files:[]},this.state={submitting:!1},this.model={},this.uploaded=0,this.bytesUploaded=0}return e.prototype.onSelect=function(e){var n;(n=this.data.files).push.apply(n,e.addedFiles)},e.prototype.onRemove=function(e){this.data.files.splice(this.data.files.indexOf(e),1)},e.prototype.doUpload=function(){return un(this,void 0,void 0,(function(){var e,n,t,i,s,o,a,c,r,d,u,l,p=this;return ln(this,(function(m){switch(m.label){case 0:this.state.submitting=!0,this.uploaded=0,this.bytesUploaded=0,e={},m.label=1;case 1:for(m.trys.push([1,7,8,9]),n=0,t=this.data.files;n<t.length;n++)e.hasOwnProperty((i=t[n]).type)||(e[i.type]=[]),e[i.type].push(i);for(o in s=[],e)s.push(o);a=0,m.label=2;case 2:if(!(a<s.length))return[3,6];if(!e.hasOwnProperty(c=s[a]))return[3,5];r=e[c],d=function(){var e,n,t,i;return ln(this,(function(s){switch(s.label){case 0:return e=r.splice(0,u.signBatchSize),[4,u.fileUploadService.createSignedUploadUrlBatch({contentType:c,extension:e[0].name.split(".").pop(),numFiles:e.length})];case 1:n=s.sent(),s.label=2;case 2:return e.length>0?(t=e.splice(0,u.uploadBatchSize),i=t.map((function(e){return p.fileUploadService.uploadFile(e,n.createSignedUploadUrlBatch.signedUploadUrlBatch.signedUrls.pop()).then((function(){p.bytesUploaded+=e.size,p.uploaded++}))})),[4,Promise.all(i)]):[3,4];case 3:return s.sent(),[3,2];case 4:return[2]}}))},u=this,m.label=3;case 3:return r.length>0?[5,d()]:[3,5];case 4:return m.sent(),[3,3];case 5:return a++,[3,2];case 6:return this.toastr.success("Image(s) uploaded successfully!"),this.data.files=[],[3,9];case 7:return l=m.sent(),this.toastr.error("Ohnoes! Something went wrong with the upload :("),console.error(l),[3,9];case 8:return this.state.submitting=!1,[7];case 9:return[2]}}))}))},e.prototype.processUploads=function(){return un(this,void 0,void 0,(function(){var e,n,t,i;return ln(this,(function(s){switch(s.label){case 0:this.state.submitting=!0,s.label=1;case 1:s.trys.push([1,5,6,7]),e=-1,n=0,s.label=2;case 2:return 0===e?[3,4]:[4,this.fileUploadService.processUploads({numberToProcess:this.numUploadsToProcess})];case 3:return t=s.sent(),n+=e=t.createProcessUploadedSubmissionsRequest.processUploadedSubmissionsRequest.numberProcessed,[3,2];case 4:return 0===n?this.toastr.warning("0 files were succesfully processed on the server"):this.toastr.success(n+" files processed"),[3,7];case 5:return i=s.sent(),this.toastr.error("Error requesting processing of uploads"),console.error(i),[3,7];case 6:return this.state.submitting=!1,[7];case 7:return[2]}}))}))},e.\u0275fac=function(n){return new(n||e)(s.jc(tn.a),s.jc(P.b))},e.\u0275cmp=s.dc({type:e,selectors:[["ng-component"]],decls:23,vars:5,consts:[["subtitle","Upload the photos taken from a wax logging session","title","Upload Wax Images"],[1,"card","mt-5"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"mb-3",3,"change"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["class","lead",4,"ngIf"],[3,"size",4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"],[1,"lead"],[4,"ngIf"],[3,"size"]],template:function(e,n){1&e&&(s.kc(0,"page-title",0),s.pc(1,"div",1),s.pc(2,"div",2),s.pc(3,"div",3),s.pc(4,"div",4),s.pc(5,"h4"),s.id(6,"Upload Photos"),s.oc(),s.pc(7,"ngx-dropzone",5),s.yc("change",(function(e){return n.onSelect(e)})),s.pc(8,"ngx-dropzone-label"),s.id(9,"Drop you photo(s) here."),s.oc(),s.gd(10,pn,3,4,"ngx-dropzone-preview",6),s.oc(),s.pc(11,"button",7),s.yc("click",(function(){return n.doUpload()})),s.id(12," Upload "),s.oc(),s.gd(13,hn,7,6,"p",8),s.oc(),s.oc(),s.oc(),s.oc(),s.pc(14,"div",1),s.pc(15,"div",2),s.pc(16,"div",3),s.pc(17,"div",4),s.pc(18,"h4"),s.id(19,"Process Uploads on the Server"),s.oc(),s.pc(20,"button",7),s.yc("click",(function(){return n.processUploads()})),s.id(21," Process Uploads "),s.oc(),s.oc(),s.oc(),s.oc(),s.oc(),s.gd(22,bn,1,1,"loading-ring",9)),2&e&&(s.Vb(10),s.Jc("ngForOf",n.data.files),s.Vb(1),s.Jc("disabled",n.state.submitting||0===n.data.files.length),s.Vb(2),s.Jc("ngIf",n.state.submitting||n.uploaded>0),s.Vb(7),s.Jc("disabled",n.state.submitting),s.Vb(2),s.Jc("ngIf",n.state.submitting))},directives:[T.a,sn.a,sn.d,o.o,o.p,sn.c,F.a],pipes:[rn],encapsulation:2}),e}()}],vn=function(){function e(){}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=s.hc({type:e}),e.\u0275inj=s.gc({imports:[[I.f.forChild(fn)],I.f]}),e}(),yn=t("z17N"),Sn=t("aX/C"),Cn=t("o973"),wn=t("Lpkd"),In=t("R+a7"),Mn=t("jmmt"),kn=t("b44C"),xn=t("iUZM"),Bn=function(){function e(){}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=s.hc({type:e}),e.\u0275inj=s.gc({imports:[[o.c,a.f,C.g,sn.b,yn.d,yn.f,c.a,vn,J.b,dn]]}),e}();s.ad(_e.a,[o.p,a.x,a.n,a.o,Sn.a,Cn.a,wn.a,In.a,Mn.a,sn.a,sn.d,o.o,sn.c,kn.a,xn.a,F.a,_.a,J.a,N.a,a.m,a.p,J.e,L.a,a.j,a.r,a.d,a.u,z.a],[W.a,R.a,G.a,o.A,o.y,rn])},"kvL/":function(e,n,t){"use strict";t.d(n,"b",(function(){return k})),t.d(n,"a",(function(){return I})),t.d(n,"c",(function(){return C})),t.d(n,"d",(function(){return v})),t("Ji7U"),t("LK+K");var i=t("o0o1"),s=t.n(i),o=t("vuIU"),a=t("1OyB"),c=t("fXoL"),r=t("zC+P"),d=t("ofXK"),u=t("jhN1");function l(e,n){if(1&e){var t=c.qc();c.pc(0,"ngx-dropzone-remove-badge",1),c.yc("click",(function(e){return c.Wc(t),c.Cc()._remove(e)})),c.oc()}}var p=[[["ngx-dropzone-label"]]],m=["ngx-dropzone-label"],g=["fileInput"];function h(e,n){1&e&&c.Hc(0,2,["*ngIf","!_hasPreviews"])}var b=[[["ngx-dropzone-preview"]],"*",[["ngx-dropzone-label"]]],f=["ngx-dropzone-preview","*","ngx-dropzone-label"],v=function(){var e=function e(){Object(a.a)(this,e)};return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=c.ec({type:e,selectors:[["ngx-dropzone-label"]]}),e}();function y(e){return null!=e&&"false"!=="".concat(e)}var S=function(){var e={BACKSPACE:8,DELETE:46};return e[e.BACKSPACE]="BACKSPACE",e[e.DELETE]="DELETE",e}(),C=function(){var e=function(){function e(n){Object(a.a)(this,e),this.sanitizer=n,this._removable=!1,this.removed=new c.u,this.tabIndex=0}return Object(o.a)(e,[{key:"removable",get:function(){return this._removable},set:function(e){this._removable=y(e)}},{key:"keyEvent",value:function(e){switch(e.keyCode){case S.BACKSPACE:case S.DELETE:this.remove()}}},{key:"hostStyle",get:function(){return this.sanitizer.bypassSecurityTrustStyle("\n\t\t\tdisplay: flex;\n\t\t\theight: 140px;\n\t\t\tmin-height: 140px;\n\t\t\tmin-width: 180px;\n\t\t\tmax-width: 180px;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 20px;\n\t\t\tmargin: 10px;\n\t\t\tborder-radius: 5px;\n\t\t\tposition: relative;\n\t\t")}},{key:"_remove",value:function(e){e.stopPropagation(),this.remove()}},{key:"remove",value:function(){this._removable&&this.removed.next(this.file)}},{key:"readFile",value:function(){return Object(r.b)(this,void 0,void 0,s.a.mark((function e(){var n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var i=new FileReader;if(i.onload=function(n){e(n.target.result)},i.onerror=function(e){console.error("FileReader failed on file ".concat(n.file.name,".")),t(e)},!n.file)return t("No file to read. Please provide a file using the [file] Input property.");i.readAsDataURL(n.file)})));case 1:case"end":return e.stop()}}),e)})))}}]),e}();return e.\u0275fac=function(n){return new(n||e)(c.jc(u.b))},e.\u0275cmp=c.dc({type:e,selectors:[["ngx-dropzone-preview"]],hostVars:3,hostBindings:function(e,n){1&e&&c.yc("keyup",(function(e){return n.keyEvent(e)})),2&e&&(c.sc("tabindex",n.tabIndex),c.cd(n.hostStyle))},inputs:{removable:"removable",file:"file"},outputs:{removed:"removed"},ngContentSelectors:m,decls:2,vars:1,consts:[[3,"click",4,"ngIf"],[3,"click"]],template:function(e,n){1&e&&(c.Ic(p),c.Hc(0),c.gd(1,l,1,0,"ngx-dropzone-remove-badge",0)),2&e&&(c.Vb(1),c.Jc("ngIf",n.removable))},directives:function(){return[d.p,M]},styles:["[_nghost-%COMP%]{background-image:linear-gradient(to top,#ededed,#efefef,#f1f1f1,#f4f4f4,#f6f6f6)}[_nghost-%COMP%]:focus, [_nghost-%COMP%]:hover{background-image:linear-gradient(to top,#e3e3e3,#ebeaea,#e8e7e7,#ebeaea,#f4f4f4);outline:0}[_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]     ngx-dropzone-label{overflow-wrap:break-word}"]}),e}(),w=function(){var e=function(){function e(){Object(a.a)(this,e)}return Object(o.a)(e,[{key:"parseFileList",value:function(e,n,t,i){for(var s=[],o=[],a=0;a<e.length;a++){var c=e.item(a);this.isAccepted(c,n)?t&&c.size>t?this.rejectFile(o,c,"size"):!i&&s.length>=1?this.rejectFile(o,c,"no_multiple"):s.push(c):this.rejectFile(o,c,"type")}return{addedFiles:s,rejectedFiles:o}}},{key:"isAccepted",value:function(e,n){if("*"===n)return!0;var t=n.split(",").map((function(e){return e.toLowerCase().trim()})),i=e.type.toLowerCase(),s=e.name.toLowerCase();return!!t.find((function(e){return e.endsWith("/*")?i.split("/")[0]===e.split("/")[0]:e.startsWith(".")?s.endsWith(e):e==i}))}},{key:"rejectFile",value:function(e,n,t){var i=n;i.reason=t,e.push(i)}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=c.fc({token:e,factory:e.\u0275fac}),e}(),I=function(){var e=function(){function e(n){Object(a.a)(this,e),this.service=n,this.change=new c.u,this.accept="*",this._disabled=!1,this._multiple=!0,this._maxFileSize=void 0,this._expandable=!1,this._disableClick=!1,this._isHovered=!1}return Object(o.a)(e,[{key:"_hasPreviews",get:function(){return!!this._previewChildren.length}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=y(e),this._isHovered&&(this._isHovered=!1)}},{key:"multiple",get:function(){return this._multiple},set:function(e){this._multiple=y(e)}},{key:"maxFileSize",get:function(){return this._maxFileSize},set:function(e){this._maxFileSize=function(e){return isNaN(parseFloat(e))||isNaN(Number(e))?null:Number(e)}(e)}},{key:"expandable",get:function(){return this._expandable},set:function(e){this._expandable=y(e)}},{key:"disableClick",get:function(){return this._disableClick},set:function(e){this._disableClick=y(e)}},{key:"_onClick",value:function(){this.disableClick||this.showFileSelector()}},{key:"_onDragOver",value:function(e){this.disabled||(this.preventDefault(e),this._isHovered=!0)}},{key:"_onDragLeave",value:function(){this._isHovered=!1}},{key:"_onDrop",value:function(e){this.disabled||(this.preventDefault(e),this._isHovered=!1,this.handleFileDrop(e.dataTransfer.files))}},{key:"showFileSelector",value:function(){this.disabled||this._fileInput.nativeElement.click()}},{key:"_onFilesSelected",value:function(e){this.handleFileDrop(e.target.files),this._fileInput.nativeElement.value="",this.preventDefault(e)}},{key:"handleFileDrop",value:function(e){var n=this.service.parseFileList(e,this.accept,this.maxFileSize,this.multiple);this.change.next({addedFiles:n.addedFiles,rejectedFiles:n.rejectedFiles,source:this})}},{key:"preventDefault",value:function(e){e.preventDefault(),e.stopPropagation()}}]),e}();return e.\u0275fac=function(n){return new(n||e)(c.jc(w,2))},e.\u0275cmp=c.dc({type:e,selectors:[["ngx-dropzone"],["","ngx-dropzone",""]],contentQueries:function(e,n,t){var i;1&e&&c.cc(t,C,5),2&e&&c.Sc(i=c.zc())&&(n._previewChildren=i)},viewQuery:function(e,n){var t;1&e&&c.od(g,5),2&e&&c.Sc(t=c.zc())&&(n._fileInput=t.first)},hostVars:8,hostBindings:function(e,n){1&e&&c.yc("click",(function(){return n._onClick()}))("dragover",(function(e){return n._onDragOver(e)}))("dragleave",(function(){return n._onDragLeave()}))("drop",(function(e){return n._onDrop(e)})),2&e&&c.bc("ngx-dz-hovered",n._isHovered)("ngx-dz-disabled",n.disabled)("expandable",n.expandable)("unclickable",n.disableClick)},inputs:{accept:"accept",disabled:"disabled",multiple:"multiple",maxFileSize:"maxFileSize",expandable:"expandable",disableClick:"disableClick",id:"id",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedBy:["aria-describedby","ariaDescribedBy"]},outputs:{change:"change"},features:[c.Ub([w])],ngContentSelectors:f,decls:5,vars:8,consts:[["type","file",3,"id","multiple","accept","disabled","change"],["fileInput",""],[4,"ngIf"]],template:function(e,n){1&e&&(c.Ic(b),c.pc(0,"input",0,1),c.yc("change",(function(e){return n._onFilesSelected(e)})),c.oc(),c.gd(2,h,1,0,"ng-content",2),c.Hc(3),c.Hc(4,1)),2&e&&(c.Jc("id",n.id)("multiple",n.multiple)("accept",n.accept)("disabled",n.disabled),c.Wb("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedBy),c.Vb(2),c.Jc("ngIf",!n._hasPreviews))},directives:[d.p],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:180px;background:#fff;cursor:pointer;color:#717386;border:2px dashed #717386;border-radius:5px;font-size:16px;overflow-x:auto}.ngx-dz-hovered[_nghost-%COMP%]{border-style:solid}.ngx-dz-disabled[_nghost-%COMP%]{opacity:.5;cursor:no-drop;pointer-events:none}.expandable[_nghost-%COMP%]{overflow:hidden;height:unset;min-height:180px;flex-wrap:wrap}.unclickable[_nghost-%COMP%]{cursor:default}[_nghost-%COMP%]     ngx-dropzone-label{text-align:center;z-index:10;margin:10px auto}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus +   ngx-dropzone-label{outline:#000 dotted 1px;outline:-webkit-focus-ring-color auto 5px}"]}),e}(),M=function(){var e=function e(){Object(a.a)(this,e)};return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=c.dc({type:e,selectors:[["ngx-dropzone-remove-badge"]],decls:3,vars:0,consts:[["x1","0","y1","0","x2","10","y2","10"],["x1","0","y1","10","x2","10","y2","0"]],template:function(e,n){1&e&&(c.Bc(),c.pc(0,"svg"),c.kc(1,"line",0),c.kc(2,"line",1),c.oc())},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:22px;width:22px;position:absolute;top:5px;right:5px;border-radius:50%;background:#bbb;color:#333;cursor:pointer}[_nghost-%COMP%]:hover{background:#aeaeae}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{height:10px;width:10px}[_nghost-%COMP%] > svg[_ngcontent-%COMP%] > line[_ngcontent-%COMP%]{stroke-width:2px;stroke:#fff}"]}),e}(),k=function(){var e=function e(){Object(a.a)(this,e)};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=c.hc({type:e}),e.\u0275inj=c.gc({imports:[[d.c]]}),e}()},rYPC:function(e,n,t){"use strict";t.d(n,"a",(function(){return g}));var i,s,o,a,c=t("fXoL"),r=t("UYTu"),d=Object(r.a)(i||(o=['\nmutation createImageLoggingSession(\n  $startTime: String!\n  $submission: String!\n) {\n  createImageLoggingSession(input: {\n    clientMutationId: ""\n    startTime: $startTime\n    submission: $submission\n  }) {\n      imageLoggingSession {\n          id\n      }\n  }\n}\n'],a=['\nmutation createImageLoggingSession(\n  $startTime: String!\n  $submission: String!\n) {\n  createImageLoggingSession(input: {\n    clientMutationId: ""\n    startTime: $startTime\n    submission: $submission\n  }) {\n      imageLoggingSession {\n          id\n      }\n  }\n}\n'],Object.defineProperty?Object.defineProperty(o,"raw",{value:a}):o.raw=a,i=o)),u=Object(r.a)(s||(s=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(['\n    mutation updateImageLoggingSessionEndTime(\n        $id: ID!\n        $endTime: String!\n    ) {\n        updateImageLoggingSession(input: {\n            id: $id,\n            endTime: $endTime,\n            clientMutationId: ""\n        }) {\n            imageLoggingSession {\n                id\n            }\n        }\n    }\n'],['\n    mutation updateImageLoggingSessionEndTime(\n        $id: ID!\n        $endTime: String!\n    ) {\n        updateImageLoggingSession(input: {\n            id: $id,\n            endTime: $endTime,\n            clientMutationId: ""\n        }) {\n            imageLoggingSession {\n                id\n            }\n        }\n    }\n']))),l=t("/IUn"),p=function(e,n,t,i){return new(t||(t=Promise))((function(s,o){function a(e){try{r(i.next(e))}catch(n){o(n)}}function c(e){try{r(i.throw(e))}catch(n){o(n)}}function r(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,c)}r((i=i.apply(e,n||[])).next())}))},m=function(e,n){var t,i,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,i&&(s=2&o[0]?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=n.call(e,a)}catch(c){o=[6,c],i=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},g=function(){function e(e){this.apollo=e}return e.prototype.create=function(e){return p(this,void 0,void 0,(function(){return m(this,(function(n){switch(n.label){case 0:return[4,this.apollo.mutate({mutation:d,variables:e}).toPromise()];case 1:return[2,n.sent().data]}}))}))},e.prototype.updateEndTime=function(e){return p(this,void 0,void 0,(function(){return m(this,(function(n){switch(n.label){case 0:return[4,this.apollo.mutate({mutation:u,variables:e}).toPromise()];case 1:return[2,n.sent().data]}}))}))},e.\u0275fac=function(n){return new(n||e)(c.wc(l.b))},e.\u0275prov=c.fc({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},zuWl:function(e,n,t){e.exports=function(){"use strict";var e=/^(b|B)$/,n={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},t={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},i={floor:Math.floor,ceil:Math.ceil};function s(s){var o,a,c,r,d,u,l,p,m,g,h,b,f,v,y,S,C,w,I,M,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},x=[],B=0;if(isNaN(s))throw new TypeError("Invalid number");if(c=!0===k.bits,y=!0===k.unix,b=!0===k.pad,f=void 0!==k.round?k.round:y?1:2,l=void 0!==k.locale?k.locale:"",p=k.localeOptions||{},S=void 0!==k.separator?k.separator:"",C=void 0!==k.spacer?k.spacer:y?"":" ",I=k.symbols||{},w=2===(a=k.base||2)&&k.standard||"jedec",h=k.output||"string",d=!0===k.fullform,u=k.fullforms instanceof Array?k.fullforms:[],o=void 0!==k.exponent?k.exponent:-1,M=i[k.roundingMethod]||Math.round,r=a>2?1e3:1024,(m=(g=Number(s))<0)&&(g=-g),(-1===o||isNaN(o))&&(o=Math.floor(Math.log(g)/Math.log(r)))<0&&(o=0),o>8&&(o=8),"exponent"===h)return o;if(0===g)x[0]=0,v=x[1]=y?"":n[w][c?"bits":"bytes"][o];else{B=g/(2===a?Math.pow(2,10*o):Math.pow(1e3,o)),c&&(B*=8)>=r&&o<8&&(B/=r,o++);var $=Math.pow(10,o>0?f:0);x[0]=M(B*$)/$,x[0]===r&&o<8&&void 0===k.exponent&&(x[0]=1,o++),v=x[1]=10===a&&1===o?c?"kb":"kB":n[w][c?"bits":"bytes"][o],y&&(x[1]="jedec"===w?x[1].charAt(0):o>0?x[1].replace(/B$/,""):x[1],e.test(x[1])&&(x[0]=Math.floor(x[0]),x[1]=""))}if(m&&(x[0]=-x[0]),x[1]=I[x[1]]||x[1],!0===l?x[0]=x[0].toLocaleString():l.length>0?x[0]=x[0].toLocaleString(l,p):S.length>0&&(x[0]=x[0].toString().replace(".",S)),b&&!1===Number.isInteger(x[0])&&f>0){var P=S||".",T=x[0].toString().split(P),j=T[1]||"",A=j.length,V=f-A;x[0]="".concat(T[0]).concat(P).concat(j.padEnd(A+V,"0"))}return d&&(x[1]=u[o]?u[o]:t[w][o]+(c?"bit":"byte")+(1===x[0]?"":"s")),"array"===h?x:"object"===h?{value:x[0],symbol:x[1],exponent:o,unit:v}:x.join(C)}return s.partial=function(e){return function(n){return s(n,e)}},s}()}}]);