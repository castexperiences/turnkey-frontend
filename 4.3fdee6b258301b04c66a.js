(window.webpackJsonp=window.webpackJsonp||[]).push([[4,10],{BaBC:function(n,e,t){"use strict";t.d(e,"a",(function(){return g}));var i,o,s,a,c=t("ALmS"),r=Object(c.gql)(i||(s=["\n    query suppliersList (\n        $isManufacturer: Boolean\n    ) {\n        suppliers (\n            isManufacturer: $isManufacturer\n        ) {\n            edges  {\n                node {\n                    id\n                    company\n                    contactName\n                    email\n                    telephone\n                    parent {\n                        id\n                        company\n                    }\n                    isManufacturer\n                }\n            }\n        }\n    }\n"],a=["\n    query suppliersList (\n        $isManufacturer: Boolean\n    ) {\n        suppliers (\n            isManufacturer: $isManufacturer\n        ) {\n            edges  {\n                node {\n                    id\n                    company\n                    contactName\n                    email\n                    telephone\n                    parent {\n                        id\n                        company\n                    }\n                    isManufacturer\n                }\n            }\n        }\n    }\n"],Object.defineProperty?Object.defineProperty(s,"raw",{value:a}):s.raw=a,i=s)),d=Object(c.gql)(o||(o=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation createSupplier(\n        $company: String!\n        $contactName: String!\n        $email: String\n        $telephone: String\n        $address: String\n        $notes: String\n        $isManufacturer: Boolean!\n    ) {\n        createSupplier(input: {\n            clientMutationId: ""\n            company: $company\n            contactName: $contactName\n            email: $email\n            telephone: $telephone\n            address: $address\n            notes: $notes\n            isManufacturer: $isManufacturer\n        }) {\n            id\n        }\n    }\n'],['\n    mutation createSupplier(\n        $company: String!\n        $contactName: String!\n        $email: String\n        $telephone: String\n        $address: String\n        $notes: String\n        $isManufacturer: Boolean!\n    ) {\n        createSupplier(input: {\n            clientMutationId: ""\n            company: $company\n            contactName: $contactName\n            email: $email\n            telephone: $telephone\n            address: $address\n            notes: $notes\n            isManufacturer: $isManufacturer\n        }) {\n            id\n        }\n    }\n']))),u=t("fXoL"),l=t("/IUn"),g=function(){function n(n){this.apollo=n}return n.prototype.list=function(n){return this.apollo.query({variables:{isManufacturer:n},query:r})},n.prototype.create=function(n){return this.apollo.mutate({mutation:d,variables:n})},n.\u0275fac=function(e){return new(e||n)(u.oc(l.b))},n.\u0275prov=u.Wb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()},QAmw:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(){}return n.EOL="\r\n",n.BOM="\ufeff",n.DEFAULT_FIELD_SEPARATOR=",",n.DEFAULT_DECIMAL_SEPARATOR=".",n.DEFAULT_QUOTE='"',n.DEFAULT_SHOW_TITLE=!1,n.DEFAULT_TITLE="My Report",n.DEFAULT_FILENAME="mycsv.csv",n.DEFAULT_SHOW_LABELS=!1,n.DEFAULT_USE_BOM=!0,n.DEFAULT_HEADER=[],n.DEFAULT_NO_DOWNLOAD=!1,n.DEFAULT_REMOVE_EMPTY_VALUES=!1,n}();e.CsvConfigConsts=i,e.ConfigDefaults={filename:i.DEFAULT_FILENAME,fieldSeparator:i.DEFAULT_FIELD_SEPARATOR,quoteStrings:i.DEFAULT_QUOTE,decimalseparator:i.DEFAULT_DECIMAL_SEPARATOR,showLabels:i.DEFAULT_SHOW_LABELS,showTitle:i.DEFAULT_SHOW_TITLE,title:i.DEFAULT_TITLE,useBom:i.DEFAULT_USE_BOM,headers:i.DEFAULT_HEADER,noDownload:i.DEFAULT_NO_DOWNLOAD,removeEmptyValues:i.DEFAULT_REMOVE_EMPTY_VALUES},e.ngxCsv=function(){function n(n,t,i){this.csv="";var c=i||{};this.data="object"!=typeof n?JSON.parse(n):n,this._options=function(n){for(var e,t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var c,r=a(n),d=1;d<arguments.length;d++){for(var u in e=Object(arguments[d]))o.call(e,u)&&(r[u]=e[u]);if(Object.getOwnPropertySymbols){c=Object.getOwnPropertySymbols(e);for(var l=0;l<c.length;l++)s.call(e,c[l])&&(r[c[l]]=e[c[l]])}}return r}({},e.ConfigDefaults,c),this._options.filename&&(this._options.filename=t),this.generateCsv()}return n.prototype.generateCsv=function(){if(this._options.useBom&&(this.csv+=i.BOM),this._options.showTitle&&(this.csv+=this._options.title+"\r\n\n"),this.getHeaders(),this.getBody(),""!=this.csv){if(this._options.noDownload)return this.csv;var n=new Blob([this.csv],{type:"text/csv;charset=utf8;"});if(navigator.msSaveBlob){var e=this._options.filename.replace(/ /g,"_")+".csv";navigator.msSaveBlob(n,e)}else{encodeURI(this.csv);var t=document.createElement("a");t.href=URL.createObjectURL(n),t.setAttribute("visibility","hidden"),t.download=this._options.filename.replace(/ /g,"_")+".csv",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}else console.log("Invalid data")},n.prototype.getHeaders=function(){var n=this;if(this._options.headers.length>0){var e=this._options.headers.reduce((function(e,t){return e+t+n._options.fieldSeparator}),"");e=e.slice(0,-1),this.csv+=e+i.EOL}},n.prototype.getBody=function(){for(var n=0;n<this.data.length;n++){var e="";for(var t in this.data[n])e+=this.formartData(this.data[n][t])+this._options.fieldSeparator;e=e.slice(0,-1),this.csv+=e+i.EOL}},n.prototype.formartData=function(e){return this._options.removeEmptyValues&&!e?"":"locale"===this._options.decimalseparator&&n.isFloat(e)?e.toLocaleString():"."!==this._options.decimalseparator&&n.isFloat(e)?e.toString().replace(".",this._options.decimalseparator):"string"==typeof e?(e=e.replace(/"/g,'""'),(this._options.quoteStrings||e.indexOf(",")>-1||e.indexOf("\n")>-1||e.indexOf("\r")>-1)&&(e=this._options.quoteStrings+e+this._options.quoteStrings),e):"boolean"==typeof e?e?"TRUE":"FALSE":e},n.prototype.getCsv=function(){return this.csv},n.isFloat=function(n){return+n===n&&(!isFinite(n)||Boolean(n%1))},n}();var o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function a(n){if(null==n)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}},QVjv:function(n,e,t){"use strict";t.d(e,"a",(function(){return y}));var i,o,s,a,c,r,d,u,l=t("ALmS"),g=Object(l.gql)(i||(d=["\n    query jobList(\n        $after: String\n        $complete: Boolean\n        $inProduction: Boolean\n        $jobId: Int\n        $submissionId: Int\n        $customerName: String\n        $eventName: String\n        $castingCode: String\n        $incomingBatch: String\n        $outgoingBatch: String\n        $incomingBatched: Boolean\n        $onHold: Boolean\n        $dueOrder: String\n    ) {\n        jobs (\n            after: $after\n            complete: $complete\n            status_inProduction: $inProduction\n            id: $jobId\n            submission_id: $submissionId\n            submission_customer_fullName: $customerName\n            submission_customer_event_name: $eventName\n            submission_castingCode: $castingCode\n            incomingBatch: $incomingBatch\n            outgoingBatch: $outgoingBatch\n            status_incomingBatched: $incomingBatched\n            onHold: $onHold\n            order: {due: $dueOrder},\n        ) {\n            totalCount\n            edges  {\n                node {\n                    id\n                    submission {\n                        id\n                        customer {\n                            id\n                            fullName\n                            address1\n                            address2\n                            city\n                            county\n                            country\n                            postcode\n                            phone\n                            email\n                            event {\n                                id\n                                name\n                            }\n                        }\n                        status {\n                            id\n                            name\n                        }\n                        kitType {\n                            id\n                            name\n                        }\n                        batch {\n                            id\n                        }\n                        waxWeight\n                        metalWeight\n                        baseMetal {\n                            id\n                            name\n                        }\n                        plating {\n                            id\n                            name\n                        }\n                        finish {\n                            id\n                            name\n                        }\n                        castingCode\n                        kit {\n                            id\n                            regCode\n                        }\n                        ringThickness {\n                            id\n                            name\n                        }\n                        ringResize\n                        originalRingSize {\n                            id\n                            name\n                        }\n                        ringSizeCustom {\n                            id\n                            name\n                        }\n                        jumpRing\n                        jumpRingPlacement\n                        chainType {\n                            id\n                            name\n                        }\n                        chainLength {\n                            id\n                            name\n                        }\n                        chainPlating {\n                            id\n                            name\n                        }\n                        earringConfig {\n                            id\n                            name\n                        }\n                        engravingFont\n                        engravingText\n                        stoneDescription\n                        customerNotes\n                        totalPrice\n                        submittedAt\n                        hardDeadline\n                        submissionPhotos {\n                            edges {\n                                node {\n                                    id\n                                    objectName\n                                    exifDate\n                                    signedDownloadUrl\n                                    signedMidsizeDownloadUrl\n                                    signedThumbnailDownloadUrl\n                                }\n                            }\n                        }\n                    }\n                    manufacturer {\n                        id\n                        company\n                    }\n                    currentlyWith {\n                        id\n                        company\n                    }\n                    status {\n                        id\n                        name\n                    }\n                    complete\n                    due\n                    rush\n                    onHold\n                    outgoingBatch {\n                        id\n                    }\n                    incomingBatch {\n                        id\n                    }\n                }\n                cursor\n            }\n            pageInfo {\n                endCursor\n                hasNextPage\n            }\n        }\n    }\n"],u=["\n    query jobList(\n        $after: String\n        $complete: Boolean\n        $inProduction: Boolean\n        $jobId: Int\n        $submissionId: Int\n        $customerName: String\n        $eventName: String\n        $castingCode: String\n        $incomingBatch: String\n        $outgoingBatch: String\n        $incomingBatched: Boolean\n        $onHold: Boolean\n        $dueOrder: String\n    ) {\n        jobs (\n            after: $after\n            complete: $complete\n            status_inProduction: $inProduction\n            id: $jobId\n            submission_id: $submissionId\n            submission_customer_fullName: $customerName\n            submission_customer_event_name: $eventName\n            submission_castingCode: $castingCode\n            incomingBatch: $incomingBatch\n            outgoingBatch: $outgoingBatch\n            status_incomingBatched: $incomingBatched\n            onHold: $onHold\n            order: {due: $dueOrder},\n        ) {\n            totalCount\n            edges  {\n                node {\n                    id\n                    submission {\n                        id\n                        customer {\n                            id\n                            fullName\n                            address1\n                            address2\n                            city\n                            county\n                            country\n                            postcode\n                            phone\n                            email\n                            event {\n                                id\n                                name\n                            }\n                        }\n                        status {\n                            id\n                            name\n                        }\n                        kitType {\n                            id\n                            name\n                        }\n                        batch {\n                            id\n                        }\n                        waxWeight\n                        metalWeight\n                        baseMetal {\n                            id\n                            name\n                        }\n                        plating {\n                            id\n                            name\n                        }\n                        finish {\n                            id\n                            name\n                        }\n                        castingCode\n                        kit {\n                            id\n                            regCode\n                        }\n                        ringThickness {\n                            id\n                            name\n                        }\n                        ringResize\n                        originalRingSize {\n                            id\n                            name\n                        }\n                        ringSizeCustom {\n                            id\n                            name\n                        }\n                        jumpRing\n                        jumpRingPlacement\n                        chainType {\n                            id\n                            name\n                        }\n                        chainLength {\n                            id\n                            name\n                        }\n                        chainPlating {\n                            id\n                            name\n                        }\n                        earringConfig {\n                            id\n                            name\n                        }\n                        engravingFont\n                        engravingText\n                        stoneDescription\n                        customerNotes\n                        totalPrice\n                        submittedAt\n                        hardDeadline\n                        submissionPhotos {\n                            edges {\n                                node {\n                                    id\n                                    objectName\n                                    exifDate\n                                    signedDownloadUrl\n                                    signedMidsizeDownloadUrl\n                                    signedThumbnailDownloadUrl\n                                }\n                            }\n                        }\n                    }\n                    manufacturer {\n                        id\n                        company\n                    }\n                    currentlyWith {\n                        id\n                        company\n                    }\n                    status {\n                        id\n                        name\n                    }\n                    complete\n                    due\n                    rush\n                    onHold\n                    outgoingBatch {\n                        id\n                    }\n                    incomingBatch {\n                        id\n                    }\n                }\n                cursor\n            }\n            pageInfo {\n                endCursor\n                hasNextPage\n            }\n        }\n    }\n"],Object.defineProperty?Object.defineProperty(d,"raw",{value:u}):d.raw=u,i=d)),m=Object(l.gql)(o||(o=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation updateJob(\n        $id: ID!,\n        $currentlyWith: String,\n        $due: String,\n        $rush: Boolean,\n        $onHold: Boolean,\n    ) {\n        updateJob(input: {\n            id: $id\n            currentlyWith: $currentlyWith,\n            due: $due,\n            rush: $rush,\n            onHold: $onHold,\n            clientMutationId: "",\n        }) {\n            id\n        }\n    }\n'],['\n    mutation updateJob(\n        $id: ID!,\n        $currentlyWith: String,\n        $due: String,\n        $rush: Boolean,\n        $onHold: Boolean,\n    ) {\n        updateJob(input: {\n            id: $id\n            currentlyWith: $currentlyWith,\n            due: $due,\n            rush: $rush,\n            onHold: $onHold,\n            clientMutationId: "",\n        }) {\n            id\n        }\n    }\n']))),p=Object(l.gql)(s||(s=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation updateOutgoingBatch(\n        $id: ID!,\n        $outgoingBatch: String\n        $status: String\n    ) {\n        updateJob(input: {\n            id: $id,\n            outgoingBatch: $outgoingBatch,\n            status: $status,\n            clientMutationId: "",\n        }) {\n            id\n            submission {\n                id\n            }\n        }\n    }\n'],['\n    mutation updateOutgoingBatch(\n        $id: ID!,\n        $outgoingBatch: String\n        $status: String\n    ) {\n        updateJob(input: {\n            id: $id,\n            outgoingBatch: $outgoingBatch,\n            status: $status,\n            clientMutationId: "",\n        }) {\n            id\n            submission {\n                id\n            }\n        }\n    }\n']))),f=Object(l.gql)(a||(a=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation createJob(\n        $submission: String!,\n        $manufacturer: String!,\n        $status: String!,\n        $outgoingBatch: String,\n        $complete: Boolean!,\n        $rush: Boolean!,\n        $onHold: Boolean!,\n        $due: String,\n        $createdAt: String!,\n    ) {\n        createJob(input: {\n            clientMutationId: ""\n            submission: $submission,\n            manufacturer: $manufacturer,\n            status: $status,\n            outgoingBatch: $outgoingBatch,\n            complete: $complete,\n            rush: $rush,\n            onHold: $onHold,\n            due: $due,\n            createdAt: $createdAt,\n        }) {\n            id\n            submission {\n                id\n            }\n        }\n    }\n'],['\n    mutation createJob(\n        $submission: String!,\n        $manufacturer: String!,\n        $status: String!,\n        $outgoingBatch: String,\n        $complete: Boolean!,\n        $rush: Boolean!,\n        $onHold: Boolean!,\n        $due: String,\n        $createdAt: String!,\n    ) {\n        createJob(input: {\n            clientMutationId: ""\n            submission: $submission,\n            manufacturer: $manufacturer,\n            status: $status,\n            outgoingBatch: $outgoingBatch,\n            complete: $complete,\n            rush: $rush,\n            onHold: $onHold,\n            due: $due,\n            createdAt: $createdAt,\n        }) {\n            id\n            submission {\n                id\n            }\n        }\n    }\n']))),b=Object(l.gql)(c||(c=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(["\n    query jobsByBatch(\n        $first: Int,\n        $outgoingBatch: String,\n        $incomingBatch: String\n    ) {\n        jobs(\n            first: $first,\n            outgoingBatch: $outgoingBatch,\n            incomingBatch: $incomingBatch,\n            \n        ) {\n            edges  {\n                node {\n                    id\n                    complete\n                    rush\n                    due\n                    createdAt\n                    submission {\n                        id\n                        status {\n                            id\n                            name\n                        }\n                        customer {\n                            id\n                            fullName\n                            address1\n                            address2\n                            city\n                            county\n                            postcode\n                            country\n                            email\n                            phone\n                            event {\n                                id\n                                name\n                            }\n                        }\n                        kitType {\n                            id\n                            name\n                        }\n                        castingCode\n                        ringThickness {\n                            id\n                            name\n                        }\n                        ringSize {\n                            id\n                            name\n                        }\n                        ringResize\n                        originalRingSize {\n                            id\n                            name\n                        }\n                        ringSizeCustom {\n                            id\n                            name\n                        }\n                        measuredRingSize {\n                            id\n                            name\n                        }\n                        chainType {\n                            id\n                            name\n                        }\n                        chainLength {\n                            id\n                            name\n                        }\n                        chainPlating {\n                            id\n                            name\n                        }\n                        earringConfig {\n                            id\n                            name\n                        }\n                        engravingFont\n                        engravingText\n                        baseMetal {\n                            id\n                            name\n                        }\n                        baseMetalPaid\n                        baseMetalPrice\n                        plating {\n                            id\n                            name\n                        }\n                        finish {\n                            id\n                            name\n                        }\n                        stoneDescription\n                        upsellAdditionalItem\n                        upsellPlating\n                        upsellEngraving\n                        upsellStoneSetting\n                        upsellBaseMetal\n                        upsellEarring\n                        submittedAt\n                        updatedAt\n                        customerNotes\n                        totalPrice\n                        amountPaid\n                        estimatedLaborCost\n                        estimatedMetalCost\n                        waxWeight\n                        metalWeight\n                        jumpRing\n                        jumpRingPlacement\n                        submissionPhotos {\n                            edges {\n                                node {\n                                    id\n                                    objectName\n                                    exifDate\n                                    signedDownloadUrl\n                                    signedMidsizeDownloadUrl\n                                    signedThumbnailDownloadUrl\n                                }\n                            }\n                        }\n                    }\n                    jobActions {\n                        edges {\n                            node {\n                                id\n                                action {\n                                    id\n                                    name\n                                }\n                                supplier {\n                                    id\n                                    company\n                                }\n                                started\n                                startedAt\n                                completed\n                                completedAt\n                                estimatedLaborCost\n                                estimatedMetalCost\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n"],["\n    query jobsByBatch(\n        $first: Int,\n        $outgoingBatch: String,\n        $incomingBatch: String\n    ) {\n        jobs(\n            first: $first,\n            outgoingBatch: $outgoingBatch,\n            incomingBatch: $incomingBatch,\n            \n        ) {\n            edges  {\n                node {\n                    id\n                    complete\n                    rush\n                    due\n                    createdAt\n                    submission {\n                        id\n                        status {\n                            id\n                            name\n                        }\n                        customer {\n                            id\n                            fullName\n                            address1\n                            address2\n                            city\n                            county\n                            postcode\n                            country\n                            email\n                            phone\n                            event {\n                                id\n                                name\n                            }\n                        }\n                        kitType {\n                            id\n                            name\n                        }\n                        castingCode\n                        ringThickness {\n                            id\n                            name\n                        }\n                        ringSize {\n                            id\n                            name\n                        }\n                        ringResize\n                        originalRingSize {\n                            id\n                            name\n                        }\n                        ringSizeCustom {\n                            id\n                            name\n                        }\n                        measuredRingSize {\n                            id\n                            name\n                        }\n                        chainType {\n                            id\n                            name\n                        }\n                        chainLength {\n                            id\n                            name\n                        }\n                        chainPlating {\n                            id\n                            name\n                        }\n                        earringConfig {\n                            id\n                            name\n                        }\n                        engravingFont\n                        engravingText\n                        baseMetal {\n                            id\n                            name\n                        }\n                        baseMetalPaid\n                        baseMetalPrice\n                        plating {\n                            id\n                            name\n                        }\n                        finish {\n                            id\n                            name\n                        }\n                        stoneDescription\n                        upsellAdditionalItem\n                        upsellPlating\n                        upsellEngraving\n                        upsellStoneSetting\n                        upsellBaseMetal\n                        upsellEarring\n                        submittedAt\n                        updatedAt\n                        customerNotes\n                        totalPrice\n                        amountPaid\n                        estimatedLaborCost\n                        estimatedMetalCost\n                        waxWeight\n                        metalWeight\n                        jumpRing\n                        jumpRingPlacement\n                        submissionPhotos {\n                            edges {\n                                node {\n                                    id\n                                    objectName\n                                    exifDate\n                                    signedDownloadUrl\n                                    signedMidsizeDownloadUrl\n                                    signedThumbnailDownloadUrl\n                                }\n                            }\n                        }\n                    }\n                    jobActions {\n                        edges {\n                            node {\n                                id\n                                action {\n                                    id\n                                    name\n                                }\n                                supplier {\n                                    id\n                                    company\n                                }\n                                started\n                                startedAt\n                                completed\n                                completedAt\n                                estimatedLaborCost\n                                estimatedMetalCost\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n"]))),h=Object(l.gql)(r||(r=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation updateIncomingBatch(\n        $id: ID!,\n        $incomingBatch: String,\n        $status: String,\n        \n    ) {\n        updateJob(input: {\n            id: $id,\n            incomingBatch: $incomingBatch,\n            status: $status,\n            clientMutationId: "",\n        }) {\n            id\n            submission {\n                id\n            }\n        }\n    }\n'],['\n    mutation updateIncomingBatch(\n        $id: ID!,\n        $incomingBatch: String,\n        $status: String,\n        \n    ) {\n        updateJob(input: {\n            id: $id,\n            incomingBatch: $incomingBatch,\n            status: $status,\n            clientMutationId: "",\n        }) {\n            id\n            submission {\n                id\n            }\n        }\n    }\n']))),v=t("fXoL"),S=t("/IUn"),y=function(){function n(n){this.apollo=n}return n.prototype.create=function(n){return this.apollo.mutate({mutation:f,variables:n})},n.prototype.list=function(n,e,t,i,o,s,a,c,r,d,u,l,m){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=null),void 0===c&&(c=null),void 0===r&&(r=null),void 0===d&&(d=null),void 0===u&&(u=null),void 0===l&&(l=null),void 0===m&&(m="ASC"),this.apollo.watchQuery({query:g,fetchPolicy:"network-only",variables:{after:t,complete:n,inProduction:e,jobId:i,submissionId:o,customerName:s,eventName:a,castingCode:c,incomingBatch:r,outgoingBatch:d,incomingBatched:u,onHold:l,dueOrder:m}}).valueChanges},n.prototype.listByOutgoingBatch=function(n,e){return this.apollo.query({query:b,variables:{first:e,outgoingBatch:n},fetchPolicy:"network-only"})},n.prototype.listByIncomingBatch=function(n,e){return this.apollo.query({query:b,variables:{first:e,incomingBatch:n},fetchPolicy:"network-only"})},n.prototype.update=function(n){return this.apollo.mutate({mutation:m,variables:n})},n.prototype.updateOutgoingBatch=function(n){return this.apollo.mutate({mutation:p,variables:n})},n.prototype.updateIncomingBatch=function(n){return this.apollo.mutate({mutation:h,variables:n})},n.\u0275fac=function(e){return new(e||n)(v.oc(S.b))},n.\u0275prov=v.Wb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()},c3nT:function(n,e,t){"use strict";t.r(e),t.d(e,"SubmissionModule",(function(){return et}));var i,o=t("ofXK"),s=t("3Pt+"),a=t("PCNd"),c=t("S6Vu"),r=t("HKlZ"),d=t("5Ndf"),u={id:"/base_metals/6",name:"Silver"},l=t("zOkP"),g=t("rYPC"),m=t("uA1o"),p=t("BaBC"),f=t("Nlbt"),b=t("1uah"),h=t("CIHE"),v=t("9TxS"),S=t("uzfv"),y=t("KPdS"),C=t("cXB8"),M=t("QVjv"),I=t("Vf4f"),w=t("fXoL"),$=t("1kSV"),P=t("tyNb"),O=t("5eHb"),x=t("n4kJ"),A=t("JEAg"),B=t("XhFI"),k=t("PxxC"),T=t("wOBz"),_=t("Xv7A"),j=t("r1eF"),D=t("ZOsW"),E=t("1QgP"),L=t("VdD3"),N=t("sMau"),z=t("SjCM"),R=t("zVvu"),U=t("9tk/"),F=t("XXSO"),W=(i=function(n,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])})(n,e)},function(n,e){function t(){this.constructor=n}i(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}),G=function(n,e,t,i){return new(t||(t=Promise))((function(o,s){function a(n){try{r(i.next(n))}catch(e){s(e)}}function c(n){try{r(i.throw(n))}catch(e){s(e)}}function r(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,c)}r((i=i.apply(n,e||[])).next())}))},Y=function(n,e){var t,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(n,a)}catch(c){s=[6,c],i=0}finally{t=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},q=["submissionWeightModal"];function H(n,e){if(1&n){var t=w.hc();w.ec(0),w.gc(1,"button",39),w.rc("click",(function(){w.Oc(t);var n=w.vc(2),e=w.Lc(71);return n.modalService.open(e)})),w.cd(2," Create Manufacture Batch "),w.fc(),w.gc(3,"button",39),w.rc("click",(function(){w.Oc(t);var n=w.vc(2),e=w.Lc(73);return n.modalService.open(e)})),w.cd(4," Add to Existing Batch "),w.fc(),w.gc(5,"button",39),w.rc("click",(function(){return w.Oc(t),w.vc(2).exportAddressData()})),w.cd(6," Export Address Data "),w.fc(),w.dc()}}function V(n,e){1&n&&(w.gc(0,"button",40),w.cd(1," No Available Actions "),w.fc())}function Z(n,e){if(1&n&&(w.ec(0),w.ad(1,H,7,0,"ng-container",21),w.ad(2,V,2,0,"button",22),w.dc()),2&n){var t=w.vc();w.Mb(1),w.Cc("ngIf",t.isAdmin),w.Mb(1),w.Cc("ngIf",!t.isAdmin)}}function J(n,e){1&n&&(w.gc(0,"button",40),w.cd(1," Loading Actions... "),w.fc())}function X(n,e){if(1&n){var t=w.hc();w.gc(0,"div",41),w.gc(1,"input",42),w.rc("click",(function(){return w.Oc(t),w.vc().selectAll()}))("ngModelChange",(function(n){return w.Oc(t),w.vc().state.allSelected=n})),w.fc(),w.bc(2,"label",43),w.fc()}if(2&n){var i=w.vc();w.Mb(1),w.Cc("ngModel",i.state.allSelected)("value",i.state.allSelected)}}function Q(n,e){1&n&&(w.gc(0,"th"),w.cd(1,"Submission"),w.fc())}function K(n,e){1&n&&(w.gc(0,"th"),w.cd(1,"Detail"),w.fc())}function nn(n,e){1&n&&(w.gc(0,"th"),w.cd(1,"Code"),w.fc())}function en(n,e){1&n&&(w.gc(0,"th"),w.cd(1,"Event Name"),w.fc())}function tn(n,e){if(1&n&&(w.gc(0,"td"),w.cd(1),w.fc()),2&n){var t=w.vc().$implicit;w.Mb(1),w.dd(null===t.submission.node.customer.event?"Kit":"Event")}}function on(n,e){if(1&n&&(w.gc(0,"td"),w.gc(1,"a",60),w.wc(2,"numericId"),w.cd(3),w.fc(),w.fc()),2&n){var t=w.vc().$implicit;w.Mb(1),w.Ec("routerLink","/event/view/",w.xc(2,2,t.submission.node.customer.event.id),""),w.Mb(2),w.dd(t.submission.node.customer.event.name)}}function sn(n,e){if(1&n&&(w.gc(0,"td"),w.cd(1),w.fc()),2&n){var t=w.vc().$implicit;w.Mb(1),w.dd(t.submission.node.castingCode)}}function an(n,e){if(1&n&&(w.gc(0,"td"),w.cd(1),w.wc(2,"uppercase"),w.fc()),2&n){var t=w.vc().$implicit;w.Mb(1),w.dd(w.xc(2,1,t.submission.node.castingCode))}}function cn(n,e){if(1&n&&(w.gc(0,"td"),w.cd(1),w.fc()),2&n){var t=w.vc().$implicit;w.Mb(1),w.dd(t.submission.node.customer.event.name)}}function rn(n,e){if(1&n&&(w.gc(0,"span"),w.cd(1," BMU "),w.bc(2,"i",61),w.fc()),2&n){var t=w.vc().$implicit;w.Sb("color-danger",!t.submission.node.baseMetalPaid)("color-success",!0===t.submission.node.baseMetalPaid),w.Mb(2),w.Sb("fa-check",!0===t.submission.node.baseMetalPaid)("fa-times",!t.submission.node.baseMetalPaid)}}function dn(n,e){if(1&n&&(w.gc(0,"span"),w.cd(1),w.wc(2,"date"),w.fc()),2&n){var t=w.vc(3);w.Mb(1),w.ed(" Elapsed: ",w.zc(2,1,1e3*t.timeElapsed,"mm:ss","UTC"),"s \xa0 ")}}function un(n,e){1&n&&w.bc(0,"span",64)}function ln(n,e){if(1&n){var t=w.hc();w.gc(0,"button",62),w.rc("click",(function(){w.Oc(t);var n=w.vc().$implicit;return w.vc(2).toggleSubmissionPhotoTimer(n.submission.node.id)})),w.ad(1,un,1,0,"span",63),w.fc()}if(2&n){var i=w.vc().$implicit,o=w.vc(2);w.Sb("fa-stop",o.model.submissionPhotoTimingMap[i.submission.node.id]&&!1===o.submitting)("fa-stopwatch-20",!o.model.submissionPhotoTimingMap[i.submission.node.id]&&!1===o.submitting)("hover",!o.model.submissionPhotoTimingMap[i.submission.node.id]||!1===o.submitting),w.Cc("disabled",o.submitting),w.Mb(1),w.Cc("ngIf",!0===o.submitting)}}function gn(n,e){if(1&n){var t=w.hc();w.gc(0,"button",65),w.rc("click",(function(){w.Oc(t);var n=w.vc().$implicit;return w.vc(2).openWeightModal(n.submission.node)})),w.fc()}if(2&n){var i=w.vc(3);w.Cc("disabled",i.submitting)}}function mn(n,e){if(1&n&&w.bc(0,"view-submission-modal",66),2&n){var t=w.vc().$implicit,i=w.vc(2);w.Cc("buttonStyle",!0)("castingCode",t.castingCodes.length?t.castingCodes[0]:null)("isAdmin",i.isAdmin)("loadingCastingCode",i.loadingCastingCode)("loadingStones",i.loadingStones)("photos",t.submission.node.submissionPhotos.edges)("stones",t.stones)("submission",t.submission.node)}}function pn(n,e){if(1&n){var t=w.hc();w.ec(0),w.gc(1,"tr"),w.wc(2,"lowercaseDashes"),w.gc(3,"td",48),w.rc("click",(function(){w.Oc(t);var n=e.$implicit;return w.vc(2).selectRow(n)})),w.gc(4,"div",41),w.gc(5,"input",49),w.rc("click",(function(){w.Oc(t);var n=e.$implicit;return w.vc(2).selectRow(n)}))("ngModelChange",(function(n){return w.Oc(t),e.$implicit.selected=n})),w.fc(),w.bc(6,"label",50),w.fc(),w.fc(),w.gc(7,"td"),w.bc(8,"i",51),w.fc(),w.gc(9,"td",52),w.rc("click",(function(){w.Oc(t);var n=e.$implicit;return w.vc(2).selectRow(n)})),w.cd(10),w.fc(),w.ad(11,tn,2,1,"td",21),w.ad(12,on,4,4,"td",21),w.ad(13,sn,2,1,"td",21),w.ad(14,an,3,3,"td",21),w.ad(15,cn,2,1,"td",21),w.gc(16,"td"),w.cd(17),w.wc(18,"titlecase"),w.bc(19,"br"),w.ad(20,rn,3,8,"span",53),w.fc(),w.gc(21,"td"),w.cd(22),w.wc(23,"currency"),w.fc(),w.gc(24,"td"),w.cd(25),w.wc(26,"simpleDateTime"),w.fc(),w.gc(27,"td",54),w.gc(28,"span"),w.cd(29),w.fc(),w.fc(),w.gc(30,"td",32),w.ad(31,dn,3,5,"span",21),w.gc(32,"div",55),w.ad(33,ln,2,8,"button",56),w.ad(34,gn,1,1,"button",57),w.bc(35,"view-submission-comms-modal",58),w.fc(),w.ad(36,mn,1,8,"view-submission-modal",59),w.fc(),w.fc(),w.dc()}if(2&n){var i=e.$implicit,o=w.vc(2);w.Mb(1),w.Pb("status-",w.xc(2,36,i.submission.node.status.name),""),w.Sb("row-blocked",!o.model.submissionPhotoTimingMap[i.submission.node.id]&&!0===o.imageLoggingSessionState)("selected",i.selected),w.Mb(4),w.Ec("id","sub-cb-",i.submission.node.id,""),w.Cc("ngModel",i.selected)("name","submission"+i.submission.node.id),w.Mb(1),w.Ec("for","sub-cb-",i.submission.node.id,""),w.Mb(2),w.Sb("text-muted",0===i.submission.node.submissionPhotos.edges.length)("text-success",i.submission.node.submissionPhotos.edges.length>0),w.Mb(2),w.dd(i.submission.node.customer.fullName),w.Mb(1),w.Cc("ngIf",null===o.model.typeEvent),w.Mb(1),w.Cc("ngIf",null===o.model.typeEvent&&null!==i.submission.node.customer.event),w.Mb(1),w.Cc("ngIf",null===o.model.typeEvent&&null===i.submission.node.customer.event),w.Mb(1),w.Cc("ngIf",!1===o.model.typeEvent),w.Mb(1),w.Cc("ngIf",!0===o.model.typeEvent),w.Mb(2),w.ed(" ",w.xc(18,38,i.submission.node.kitType.name),""),w.Mb(3),w.Cc("ngIf",i.submission.node.baseMetal&&i.submission.node.baseMetal.id!==o.metalSilver.id),w.Mb(2),w.dd(w.xc(23,40,i.submission.node.amountPaid)),w.Mb(3),w.dd(w.xc(26,42,i.submission.node.submittedAt)),w.Mb(4),w.dd(i.submission.node.status.name),w.Mb(2),w.Cc("ngIf",o.model.submissionPhotoTimingMap[i.submission.node.id]),w.Mb(2),w.Cc("ngIf",!1===o.imageLoggingSessionState||o.model.submissionPhotoTimingMap[i.submission.node.id]),w.Mb(1),w.Cc("ngIf",null===i.submission.node.customer.event&&i.submission.node.status.id===o.statusSubmissionCreated.id),w.Mb(1),w.Cc("hover",!i.submission.node.customerNotes&&i.notes&&!i.notes.length)("loadingNotes",o.loadingNotes)("submissionId",i.submission.node.id)("notes",i.notes)("customerNote",i.submission.node.customerNotes)("isAdmin",o.isAdmin),w.Mb(1),w.Cc("ngIf",!1===o.imageLoggingSessionState)}}function fn(n,e){1&n&&(w.gc(0,"tr"),w.gc(1,"td",67),w.gc(2,"p",68),w.cd(3,"No submissions found"),w.fc(),w.fc(),w.fc())}function bn(n,e){if(1&n&&(w.gc(0,"tbody"),w.gc(1,"tr",44),w.gc(2,"td",45),w.bc(3,"p",46),w.fc(),w.fc(),w.ad(4,pn,37,44,"ng-container",47),w.ad(5,fn,4,0,"tr",21),w.fc()),2&n){var t=w.vc();w.Mb(4),w.Cc("ngForOf",t.data.submissionAndInfos),w.Mb(1),w.Cc("ngIf",!t.data.submissionAndInfos.length)}}function hn(n,e){1&n&&(w.gc(0,"tr"),w.gc(1,"td"),w.gc(2,"app-loading-shimmer"),w.gc(3,"div",69),w.gc(4,"div",70),w.bc(5,"div",71),w.fc(),w.fc(),w.fc(),w.fc(),w.gc(6,"td"),w.gc(7,"app-loading-shimmer"),w.gc(8,"div",72),w.gc(9,"div",70),w.bc(10,"div",71),w.fc(),w.fc(),w.fc(),w.fc(),w.gc(11,"td"),w.gc(12,"app-loading-shimmer"),w.gc(13,"div",72),w.gc(14,"div",73),w.bc(15,"div",71),w.fc(),w.fc(),w.fc(),w.fc(),w.gc(16,"td"),w.gc(17,"app-loading-shimmer"),w.gc(18,"div",72),w.gc(19,"div",74),w.bc(20,"div",71),w.fc(),w.fc(),w.fc(),w.fc(),w.gc(21,"td"),w.gc(22,"app-loading-shimmer"),w.gc(23,"div",72),w.gc(24,"div",75),w.bc(25,"div",71),w.fc(),w.fc(),w.fc(),w.fc(),w.gc(26,"td"),w.gc(27,"app-loading-shimmer"),w.gc(28,"div",72),w.gc(29,"div",75),w.bc(30,"div",71),w.fc(),w.gc(31,"div",76),w.bc(32,"div",77),w.fc(),w.fc(),w.fc(),w.fc(),w.gc(33,"td"),w.gc(34,"app-loading-shimmer"),w.gc(35,"div",72),w.gc(36,"div",75),w.bc(37,"div",71),w.fc(),w.fc(),w.fc(),w.fc(),w.gc(38,"td"),w.gc(39,"app-loading-shimmer"),w.gc(40,"div",72),w.gc(41,"div",73),w.bc(42,"div",71),w.fc(),w.fc(),w.fc(),w.fc(),w.gc(43,"td"),w.gc(44,"app-loading-shimmer"),w.gc(45,"div",72),w.gc(46,"div",78),w.bc(47,"div",71),w.fc(),w.fc(),w.fc(),w.fc(),w.gc(48,"td",32),w.gc(49,"app-loading-shimmer"),w.gc(50,"div",69),w.gc(51,"div",75),w.bc(52,"div",71),w.fc(),w.fc(),w.fc(),w.fc(),w.fc())}function vn(n,e){1&n&&(w.gc(0,"tbody"),w.gc(1,"tr",44),w.gc(2,"td",45),w.bc(3,"p",46),w.fc(),w.fc(),w.ad(4,hn,53,0,"tr",47),w.fc()),2&n&&(w.Mb(4),w.Cc("ngForOf"," ".repeat(3).split("")))}function Sn(n,e){1&n&&(w.gc(0,"div",79),w.bc(1,"loading-ring",80),w.fc()),2&n&&(w.Mb(1),w.Cc("size",40))}function yn(n,e){if(1&n){var t=w.hc();w.gc(0,"table-controls",81),w.rc("nextPage",(function(){return w.Oc(t),w.vc().nextPage()}))("previousPage",(function(){return w.Oc(t),w.vc().previousPage()})),w.fc()}if(2&n){var i=w.vc();w.Cc("state",i.state)}}function Cn(n,e){1&n&&w.bc(0,"loading-ring",80),2&n&&w.Cc("size",30)}function Mn(n,e){if(1&n&&(w.gc(0,"ng-option",91),w.cd(1),w.wc(2,"titlecase"),w.fc()),2&n){var t=e.$implicit;w.Cc("value",t),w.Mb(1),w.ed("",w.xc(2,2,t.node.company)," ")}}function In(n,e){if(1&n&&(w.gc(0,"label",95),w.cd(1),w.wc(2,"titlecase"),w.fc()),2&n){var t=w.vc(3);w.Mb(1),w.ed(" Notes for ",w.xc(2,1,t.model.selectedSupplier.node.company)," ")}}function wn(n,e){if(1&n){var t=w.hc();w.ec(0),w.ad(1,In,3,3,"label",92),w.gc(2,"textarea",93,94),w.rc("ngModelChange",(function(n){return w.Oc(t),w.vc(2).model.batchNotes=n})),w.cd(4,"                    "),w.fc(),w.dc()}if(2&n){var i=w.vc(2);w.Mb(1),w.Cc("ngIf",i.model.selectedSupplier),w.Mb(1),w.Cc("ngModel",i.model.batchNotes)}}function $n(n,e){if(1&n){var t=w.hc();w.bc(0,"modal-header",82),w.gc(1,"div",83),w.gc(2,"form",2,84),w.gc(4,"div",85),w.gc(5,"label",86),w.cd(6,"Which Supplier?"),w.fc(),w.gc(7,"ng-select",87,88),w.rc("ngModelChange",(function(n){return w.Oc(t),w.vc().model.selectedSupplier=n})),w.ad(9,Mn,3,4,"ng-option",89),w.fc(),w.ad(10,wn,5,2,"ng-container",21),w.fc(),w.fc(),w.fc(),w.gc(11,"modal-footer",90),w.rc("modalSaved",(function(){return w.Oc(t),w.vc().createManufactureBatch()})),w.fc()}if(2&n){var i=e.$implicit,o=w.Lc(3),s=w.vc();w.Cc("modal",i),w.Mb(7),w.Cc("ngModel",s.model.selectedSupplier)("searchable",!1),w.Mb(2),w.Cc("ngForOf",s.data.suppliers),w.Mb(1),w.Cc("ngIf",s.model.selectedSupplier),w.Mb(1),w.Cc("form",o)("modal",i)("saveButtonName","Create")}}function Pn(n,e){if(1&n&&(w.gc(0,"ng-option",91),w.cd(1),w.wc(2,"numericId"),w.fc()),2&n){var t=e.$implicit;w.Cc("value",t.node),w.Mb(1),w.ed("Batch #",w.xc(2,2,t.node.id)," ")}}function On(n,e){if(1&n){var t=w.hc();w.bc(0,"modal-header",96),w.gc(1,"div",83),w.gc(2,"form",2,97),w.gc(4,"div",85),w.gc(5,"label",86),w.cd(6,"Which Batch?"),w.fc(),w.gc(7,"ng-select",98,88),w.rc("ngModelChange",(function(n){return w.Oc(t),w.vc().data.mutationBatch=n})),w.ad(9,Pn,3,4,"ng-option",89),w.fc(),w.fc(),w.fc(),w.fc(),w.gc(10,"modal-footer",90),w.rc("modalSaved",(function(){return w.Oc(t),w.vc().addSelectedToManufactureBatch()})),w.fc()}if(2&n){var i=e.$implicit,o=w.Lc(3),s=w.vc();w.Cc("modal",i),w.Mb(7),w.Cc("ngModel",s.data.mutationBatch)("searchable",!1),w.Mb(2),w.Cc("ngForOf",s.data.availableBatches),w.Mb(1),w.Cc("form",o)("modal",i)("saveButtonName","Add")}}function xn(n,e){if(1&n&&(w.gc(0,"ng-option",91),w.cd(1),w.wc(2,"uppercase"),w.fc()),2&n){var t=w.vc().$implicit;w.Cc("value",t),w.Mb(1),w.ed(" ",w.xc(2,2,t.node.name)," ")}}function An(n,e){if(1&n&&(w.ec(0),w.ad(1,xn,3,4,"ng-option",109),w.dc()),2&n){var t=e.$implicit;w.Mb(1),w.Cc("ngIf","Leave as is"!==t.node.name)}}function Bn(n,e){if(1&n){var t=w.hc();w.gc(0,"div",101),w.gc(1,"label",105),w.cd(2,"Measured Ring Size (optional)"),w.fc(),w.gc(3,"ng-select",106,107),w.rc("ngModelChange",(function(n){return w.Oc(t),w.vc(2).model.measuredRingSize=n})),w.ad(5,An,2,1,"ng-container",47),w.fc(),w.bc(6,"app-error-messages",108),w.fc()}if(2&n){var i=w.Lc(4),o=w.vc(2);w.Mb(3),w.Cc("ngModel",o.model.measuredRingSize)("notFoundText",o.loadingActions?"Loading":"Nothing found")("searchable",!0),w.Mb(2),w.Cc("ngForOf",o.data.ringSizeCustoms),w.Mb(1),w.Cc("field",i)}}function kn(n,e){if(1&n){var t=w.hc();w.bc(0,"modal-header",99),w.wc(1,"numericId"),w.gc(2,"div",83),w.gc(3,"form",2,100),w.gc(5,"div",101),w.gc(6,"label",102),w.cd(7,"Wax Weight"),w.fc(),w.gc(8,"input",103),w.rc("ngModelChange",(function(n){return w.Oc(t),w.vc().model.waxWeight=n})),w.fc(),w.fc(),w.ad(9,Bn,7,5,"div",104),w.fc(),w.fc(),w.gc(10,"modal-footer",90),w.rc("modalSaved",(function(){return w.Oc(t),w.vc().markAsReceived()})),w.fc()}if(2&n){var i=e.$implicit,o=w.Lc(4),s=w.vc();w.Ec("title","Check In Item - #",w.xc(1,7,s.data.submission.id),""),w.Cc("modal",i),w.Mb(8),w.Cc("ngModel",s.model.waxWeight),w.Mb(1),w.Cc("ngIf",s.data.submission.kitType.id===s.TYPE_RING),w.Mb(1),w.Cc("form",o)("modal",i)("saveButtonName","Confirm")}}var Tn,_n,jn,Dn=function(n){function e(e,t,i,o,s,a,c,r,g,m,p,f,b,h){var v=n.call(this)||this;return v.appUserService=e,v.castingCodeService=t,v.exportDataService=i,v.imageLoggingSessionService=o,v.jobService=s,v.modalService=a,v.ringSizeCustomService=c,v.router=r,v.stoneSubmissionService=g,v.submissionBatchService=m,v.submissionNoteService=p,v.submissionService=f,v.supplierService=b,v.toastrService=h,v.submissionStatusPending="pending",v.submissionStatusReceived="received",v.submissionStatusCreated="created",v.submissionStatusCompleted="completed",v.submissionId="Submission ID",v.customerName="Customer Name",v.eventName="Event Name",v.castingCode="Casting Code",v.TYPE_RING=l.b,v.statusSubmissionCreated=d.e,v.metalSilver=u,v.model={batchNotes:null,createImageLoggingSessionMap:{},currentSubmissionSearch:null,selectedSupplier:null,status:v.submissionStatusCreated,submissionPhotoTimingMap:{},typeEvent:null,waxWeight:null,measuredRingSize:null},v.data={availableBatches:[],mutationBatch:null,selections:[],submissionAndInfos:[],suppliers:[],submission:null,ringSizeCustoms:[]},v.imageLoggingSessionState=!1,v.isAdmin=!1,v.loadingActions=!0,v.loadingStones=!0,v.loadingCastingCode=!0,v.loadingNotes=!0,v.submitting=!1,v.timeElapsed=0,v.searchFields=[{name:v.submissionId,allowedType:y.b.integer},{name:v.customerName,allowedType:y.b.any},{name:v.castingCode,allowedType:y.b.any},{name:v.eventName,allowedType:y.b.any}],v.defaultSearch={searchField:v.searchFields[1],searchQuery:null},v}return W(e,n),e.prototype.unloadNotification=function(n){var e=this;this.data.submissionAndInfos.some((function(n){return e.model.submissionPhotoTimingMap[n.submission.node.id]}))&&(n.returnValue=!0)},e.prototype.ngOnDestroy=function(){return G(this,void 0,void 0,(function(){var n,e,t;return Y(this,(function(i){switch(i.label){case 0:n=0,e=this.data.submissionAndInfos,i.label=1;case 1:return n<e.length?this.model.submissionPhotoTimingMap[(t=e[n]).submission.node.id]?[4,this.endImageLoggingSession(t.submission.node)]:[3,3]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.ngOnInit=function(){return G(this,void 0,void 0,(function(){var n=this;return Y(this,(function(e){switch(e.label){case 0:return this.appUserService.getMe().subscribe((function(e){n.isAdmin=n.appUserService.isAdmin(e.data.appUser.roles),n.isAdmin?Object(b.a)(n.submissionBatchService.list(null,null,!1,!0,"DESC",!1),n.supplierService.list(!0),n.ringSizeCustomService.list()).subscribe((function(e){var t=e[0],i=e[2];n.data.suppliers=e[1].data.suppliers.edges,n.data.availableBatches=t.data.submissionBatches.edges,n.data.ringSizeCustoms=i.data.ringSizeCustoms.edges,n.loadingActions=!1})):n.loadingActions=!1})),this.liveTimeInterval=setInterval((function(){n.liveTimeCreate()}),500),[4,this.updateTable(null)];case 1:return e.sent(),[2]}}))}))},e.prototype.updateTableWithSearch=function(n,e){return G(this,void 0,void 0,(function(){var n=this;return Y(this,(function(t){return this.state.loading=!0,this.state.allSelected=!1,this.data.selections=[],this.model.currentSubmissionSearch&&this.model.currentSubmissionSearch.unsubscribe(),this.model.currentSubmissionSearch=e.subscribe((function(e){var t=JSON.parse(JSON.stringify(n.data.submissionAndInfos));n.data.submissionAndInfos=[];for(var i=0,o=e.data.submissions.edges;i<o.length;i++){for(var s=o[i],a=!1,c=0,r=t;c<r.length;c++){var d=r[c];d.submission.node.id===s.node.id&&(a=d.selected)}n.data.submissionAndInfos.push({submission:JSON.parse(JSON.stringify(s)),selected:a,stones:[],castingCodes:[],notes:[]})}for(var u=[],l=[],g=0,m=n.data.submissionAndInfos;g<m.length;g++){var p=m[g];p.submission.node.kit&&l.push(p.submission.node.kit.id),u.push(p.submission.node.id.replace(/^\D+/,""))}n.castingCodeService.listByKitIds(l).subscribe((function(e){for(var t=0,i=n.data.submissionAndInfos;t<i.length;t++)for(var o=i[t],s=0,a=e.data.castingCodes.edges;s<a.length;s++){var c=a[s];o.submission.node.castingCode===c.node.code&&o.castingCodes.push(c.node)}n.loadingCastingCode=!1})),n.stoneSubmissionService.listBySubmission(u).subscribe((function(e){for(var t=0,i=n.data.submissionAndInfos;t<i.length;t++)for(var o=i[t],s=0,a=e.data.stoneSubmissions.edges;s<a.length;s++){var c=a[s];o.submission.node.id===c.node.submission.id&&o.stones.push(c)}n.loadingStones=!1})),n.submissionNoteService.listBySubmission(u).subscribe((function(e){for(var t=0,i=n.data.submissionAndInfos;t<i.length;t++)for(var o=i[t],s=0,a=e.data.submissionNotes.edges;s<a.length;s++){var c=a[s];o.submission.node.id===c.node.submission.id&&o.notes.push(c)}n.loadingNotes=!1})),n.handlePagination(e.data.submissions)})),[2]}))}))},e.prototype.updateTable=function(n){return G(this,void 0,void 0,(function(){var e,t,i;return Y(this,(function(o){return e=null,t=null,i=null,this.model.status===this.submissionStatusPending?e=d.l.id:this.model.status===this.submissionStatusReceived?e=d.o.id:this.model.status===this.submissionStatusCreated?t=!0:this.model.status===this.submissionStatusCompleted&&(i=!0),this.updateTableWithSearch(null,this.submissionService.listAllSubmission(n,"DESC",this.model.typeEvent,e,t,i)),[2]}))}))},e.prototype.search=function(n){if(n.searchQuery&&n.searchField&&n.searchField.name){var e=null,t=null,i=null;this.model.status===this.submissionStatusPending?e=d.l.id:this.model.status===this.submissionStatusReceived?e=d.o.id:this.model.status===this.submissionStatusCreated?t=!0:this.model.status===this.submissionStatusCompleted&&(i=!0);var o=null;switch(n.searchField.name){case this.submissionId:o=this.submissionService.listAllSubmission(null,"DESC",this.model.typeEvent,e,t,i,n.searchQuery);break;case this.customerName:o=this.submissionService.listAllSubmission(null,"DESC",this.model.typeEvent,e,t,i,null,n.searchQuery);break;case this.eventName:o=this.submissionService.listAllSubmission(null,"DESC",this.model.typeEvent,e,t,i,null,null,n.searchQuery);break;case this.castingCode:o=this.submissionService.listAllSubmission(null,"DESC",this.model.typeEvent,e,t,i,null,null,null,n.searchQuery)}this.updateTableWithSearch(null,o)}else this.updateTable(null)},e.prototype.onChangeStatusFilter=function(){return G(this,void 0,void 0,(function(){return Y(this,(function(n){return this.softReset(),this.updateTable(null),[2]}))}))},e.prototype.startTimer=function(){var n=this;this.timeElapsed=0,this.interval=setInterval((function(){n.timeElapsed++}),1e3)},e.prototype.endTimer=function(){clearInterval(this.interval)},e.prototype.liveTimeCreate=function(){var n=new Date;this.liveTime=("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)+":"+("0"+n.getSeconds()).slice(-2)},e.prototype.toggleSubmissionPhotoTimer=function(n){return G(this,void 0,void 0,(function(){var e,t,i;return Y(this,(function(o){switch(o.label){case 0:this.submitting=!0,e=0,t=this.data.submissionAndInfos,o.label=1;case 1:return e<t.length?(i=t[e]).submission.node.id!==n?[3,6]:this.model.submissionPhotoTimingMap[i.submission.node.id]?[3,3]:[4,this.createImageLoggingSession(i.submission.node)]:[3,9];case 2:return o.sent(),[3,5];case 3:return[4,this.endImageLoggingSession(i.submission.node)];case 4:o.sent(),o.label=5;case 5:return[3,8];case 6:return this.model.submissionPhotoTimingMap[i.submission.node.id]?(this.model.submissionPhotoTimingMap[i.submission.node.id]=!1,[4,this.endImageLoggingSession(i.submission.node)]):[3,8];case 7:o.sent(),o.label=8;case 8:return e++,[3,1];case 9:return this.submitting=!1,[2]}}))}))},e.prototype.createImageLoggingSession=function(n){return G(this,void 0,void 0,(function(){var e,t,i;return Y(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),e=this.model.createImageLoggingSessionMap,t=n.id,[4,this.imageLoggingSessionService.create({startTime:(new Date).toISOString(),submission:n.id})];case 1:return e[t]=o.sent(),this.imageLoggingSessionState=!0,this.startTimer(),this.toastrService.success("Started photo timing session for submission "+n.kitType.name+" ("+n.customer.fullName+")"),this.model.submissionPhotoTimingMap[n.id]=!this.model.submissionPhotoTimingMap[n.id],[3,3];case 2:return i=o.sent(),this.toastrService.error("Error starting image logging session!"),console.error(i),[3,3];case 3:return[2]}}))}))},e.prototype.endImageLoggingSession=function(n){return G(this,void 0,void 0,(function(){var e;return Y(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.imageLoggingSessionService.updateEndTime({id:this.model.createImageLoggingSessionMap[n.id].createImageLoggingSession.id,endTime:(new Date).toISOString()})];case 1:return t.sent(),this.imageLoggingSessionState=!1,this.endTimer(),this.toastrService.success("Ended photo timing session for "+n.kitType.name+" ("+n.customer.fullName+")"),this.model.submissionPhotoTimingMap[n.id]=!1,[3,3];case 2:return e=t.sent(),this.toastrService.error("Error stopping image logging session!"),console.error(e),[3,3];case 3:return[2]}}))}))},e.prototype.selectRow=function(n){if(!this.submitting)if(n.selected){n.selected=!n.selected;var e=this.data.selections.findIndex((function(e){return e.submission.node.id===n.submission.node.id}));this.data.selections.splice(e,1)}else n.selected=!0,this.data.selections.push(n)},e.prototype.selectAll=function(){if(!this.submitting){if(this.state.allSelected=!this.state.allSelected,!this.state.allSelected)for(var n=0,e=this.data.submissionAndInfos;n<e.length;n++)(o=e[n]).selected=!0,this.selectRow(o);for(var t=0,i=this.data.submissionAndInfos;t<i.length;t++){var o;(o=i[t]).selected=this.state.allSelected,this.state.allSelected&&-1===this.data.selections.indexOf(o)&&this.data.selections.push(o)}}},e.prototype.createManufactureBatch=function(){var n=this;if(!this.submitting&&this.data.selections.length){this.submitting=!0;var e=(new Date).toISOString();this.toastrService.success(null,"Creating Batch"),this.submissionBatchService.create({status:d.g.id,createdAt:e,updatedAt:e,supplier:this.model.selectedSupplier.node.id,notes:this.model.batchNotes}).subscribe((function(e){n.data.mutationBatch=e.data.createSubmissionBatch,n.toastrService.success(null,"Batch Created"),n.addSelectedToManufactureBatch()}))}},e.prototype.addSelectedToManufactureBatch=function(){for(var n=this,e=(new Date).toISOString(),t=0,i=0,o=this.toastrService.success(null,"Adding Items to Batch",{timeOut:3e4}),s=0,a=this.data.selections;s<a.length;s++){var c=a[s];if(c.submission.node.waxWeight){var r=c.submission.node.jobs.edges.find((function(n){return!1===n.node.complete}));i+=1,(r?this.jobService.updateOutgoingBatch({id:r.node.id,outgoingBatch:this.data.mutationBatch.id,status:d.g.id}):this.jobService.create({submission:c.submission.node.id,manufacturer:this.data.mutationBatch.supplier.id,status:d.g.id,outgoingBatch:this.data.mutationBatch.id,complete:!1,rush:!1,onHold:!1,createdAt:e})).subscribe((function(e){t+=1;for(var s=0,a=n.data.selections;s<a.length;s++){var c=a[s];if(e.data.updateJob&&e.data.updateJob.submission.id===c.submission.node.id){c.submission.node.status=d.g;break}if(e.data.createJob&&e.data.createJob.submission.id===c.submission.node.id){c.submission.node.status=d.g;break}}t===i?(o.toastRef.close(),n.toastrService.success(null,"Added "+i+" Items to Batch"),n.router.navigate(["manufacturing","batches","view",n.data.mutationBatch.id.replace(/\D/g,"")])):(o.toastRef.componentInstance.title="Added "+t+"/"+i+" Items to Batch",o.toastRef.timeoutReset())}))}else this.toastrService.info(null,"Item by "+c.submission.node.customer.fullName+" must be received and logged first")}0===i&&(o.toastRef.close(),this.submitting=!1)},e.prototype.resetSelections=function(){this.data.selections=[];for(var n=0,e=this.data.submissionAndInfos;n<e.length;n++)e[n].selected=!1},e.prototype.previousPage=function(){this.resetSelections(),n.prototype.previousPage.call(this)},e.prototype.nextPage=function(){this.resetSelections(),n.prototype.nextPage.call(this)},e.prototype.exportAddressData=function(){if(this.state.exporting=!0,this.data.selections.length<1)return this.toastrService.error("You must select at least one submission."),void(this.state.exporting=!1);for(var n,e=[],t=[],i=0,o=this.data.selections;i<o.length;i++)n=this.exportDataService.flattenObject(o[i],e),t.push(n.data),e=n.headers;this.exportDataService.whiteListColumns(["submission.node.id","fullName","address1","address2","city","county","postcode","country","email","castingCode"],t),this.exportDataService.renameColumns({"submission.node.id":"Order Reference"},t),this.exportDataService.addStaticValues({weight:.03,packageSize:"large letter",serviceCode:"BPR1",serviceRegisterCode:"01"},t),this.exportDataService.exportToCsv("submission_export_"+(new Date).toLocaleString(),Object.keys(t[0]),t),this.toastrService.success("Exported and downloading file"),this.state.exporting=!1},e.prototype.openWeightModal=function(n){this.modalService.open(this.submissionWeightModal,{keyboard:!1,centered:!0,backdrop:"static",size:"sm"}),this.data.submission=n},e.prototype.markAsReceived=function(){return G(this,void 0,void 0,(function(){var n,e,t,i,o,s;return Y(this,(function(a){switch(a.label){case 0:return this.data.submission?(n=null,e=this.model.waxWeight,t=this.model.measuredRingSize,this.model.waxWeight=null,this.model.measuredRingSize=null,t&&(n=t.node.id),i=this.data.submission,this.toastrService.info("Updating submission","Processing"),o={id:i.id,status:d.o.id,updatedAt:(new Date).toISOString(),waxWeight:e,measuredRingSize:n},[4,this.submissionService.update(o)]):(this.toastrService.warning("No submission selected","Warning!"),[2]);case 1:return(s=a.sent()).data&&s.data.updateSubmission.status.id===d.o.id&&(i.status={id:s.data.updateSubmission.status.id,name:s.data.updateSubmission.status.name,partnerComplete:s.data.updateSubmission.status.partnerComplete,customerComplete:s.data.updateSubmission.status.customerComplete,__typename:"Status"},i.waxWeight=e,t&&(i.measuredRingSize=t.node),this.toastrService.success("Submission ("+i.castingCode+") has been updated.","Complete")),this.data.submission=null,[2]}}))}))},e.\u0275fac=function(n){return new(n||e)(w.ac(f.a),w.ac(v.a),w.ac(S.a),w.ac(g.a),w.ac(M.a),w.ac($.i),w.ac(C.a),w.ac(P.b),w.ac(h.a),w.ac(m.a),w.ac(I.a),w.ac(c.a),w.ac(p.a),w.ac(O.b))},e.\u0275cmp=w.Ub({type:e,selectors:[["ng-component"]],viewQuery:function(n,e){var t;1&n&&w.id(q,!0),2&n&&w.Kc(t=w.sc())&&(e.submissionWeightModal=t.first)},hostBindings:function(n,e){1&n&&w.rc("beforeunload",(function(n){return e.unloadNotification(n)}),!1,w.Nc)},features:[w.Jb],decls:76,vars:51,consts:[["subtitle","All Created Submissions","title","All Submissions"],[1,"container","form-container"],["novalidate",""],["allSubmissionsForm","ngForm"],[1,"row","mt-5","transparent","justify-content-center"],[1,"col"],[1,"row","text-center"],[1,"col-sm-5"],["data-toggle","buttons",1,"btn-group","btn-group-toggle"],[1,"btn","btn-primary","nav-group"],["autocomplete","off","id","allSubmissions","name","allSubmissions","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","eventSubmissions","name","eventSubmissions","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","kitSubmissions","name","kitSubmissions","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","allStatuses","name","allStatuses","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","statusCreated","name","statusCreated","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","statusReceived","name","statusReceived","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","statusCompleted","name","statusCompleted","type","radio",3,"ngModel","value","change","ngModelChange"],[1,"col-sm-2"],["ngbDropdown","",1,"d-inline-block"],["id","sortMenu","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["aria-labelledby","sortMenu","ngbDropdownMenu",""],[4,"ngIf"],["class","btn btn-outline-primary","ngbDropdownItem","",4,"ngIf"],[1,"row","mt-3"],[1,"col-12"],[1,"tc"],[3,"setSearch","searchFields","searchEmitter"],[1,"table-responsive"],[1,"table","list-view"],[1,"shrink","checkbox"],["class","checkbox-wrapper checkbox-inline","style","margin: 0;",4,"ngIf"],[1,"shrink"],[1,"tr"],["class","text-center",4,"ngIf"],[3,"state","nextPage","previousPage",4,"ngIf"],[3,"size",4,"ngIf"],["modalCreateSupplierBatch",""],["modalAddToManufactureBatch",""],["submissionWeightModal",""],["ngbDropdownItem","",1,"btn","btn-outline-primary",3,"click"],["ngbDropdownItem","",1,"btn","btn-outline-primary"],[1,"checkbox-wrapper","checkbox-inline",2,"margin","0"],["id","selectAll","name","selectAll","type","checkbox",3,"ngModel","value","click","ngModelChange"],["for","selectAll"],[1,"spacer",2,"height","21px"],["colspan","42"],[1,"selected-text"],[4,"ngFor","ngForOf"],[1,"pr-0","checkbox",3,"click"],["type","checkbox",3,"ngModel","name","id","click","ngModelChange"],[3,"for"],[1,"fas","fa-camera"],[3,"click"],[3,"color-danger","color-success",4,"ngIf"],[1,"status"],[1,"btn-group"],["class","btn icon-btn-outline mx-1 fas","type","button",3,"fa-stop","fa-stopwatch-20","hover","disabled","click",4,"ngIf"],["class","btn icon-btn-outline mx-1 fas fa-clipboard-check hover text-danger","type","button",3,"disabled","click",4,"ngIf"],[3,"hover","loadingNotes","submissionId","notes","customerNote","isAdmin"],[3,"buttonStyle","castingCode","isAdmin","loadingCastingCode","loadingStones","photos","stones","submission",4,"ngIf"],[3,"routerLink"],[1,"fas"],["type","button",1,"btn","icon-btn-outline","mx-1","fas",3,"disabled","click"],["aria-hidden","true","class","spinner-border spinner-border-sm",4,"ngIf"],["aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","icon-btn-outline","mx-1","fas","fa-clipboard-check","hover","text-danger",3,"disabled","click"],[3,"buttonStyle","castingCode","isAdmin","loadingCastingCode","loadingStones","photos","stones","submission"],["colspan","6"],[1,"text-muted","text-center"],[1,"row","align-items-center","justify-content-center"],[1,"col-4"],[1,"shimmer","py-2"],[1,"row","align-items-center"],[1,"col-10"],[1,"col-5"],[1,"col-6"],[1,"col-2"],[1,"shimmer","pl-1","py-2"],[1,"col-8"],[1,"text-center"],[3,"size"],[3,"state","nextPage","previousPage"],["title","Create Supplier Batch?",3,"modal"],[1,"modal-body"],["createSupplierBatchModalForm","ngForm"],[1,"form-group","mb-0"],["for","selectSupplier",1,"req"],["appShowErrorInputClass","","id","selectSupplier","name","selectSupplier","placeholder","-- Please Select --","required","",3,"ngModel","searchable","ngModelChange"],["selectSupplier","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"form","modal","saveButtonName","modalSaved"],[3,"value"],["class","mt-3","for","batchNotes",4,"ngIf"],["id","batchNotes","maxlength","511","name","batchNotes",1,"col-12","ta-medium-height",3,"ngModel","ngModelChange"],["batchNotes","ngModel"],["for","batchNotes",1,"mt-3"],["title","Add To Batch",3,"modal"],["addToManufactureBatchModalForm","ngForm"],["appShowErrorInputClass","","id","selectBatch","name","selectBatch","placeholder","-- Please Select --","required","",3,"ngModel","searchable","ngModelChange"],[3,"modal","title"],["updateWaxWeightForm","ngForm"],[1,"form-group"],["for","waxWeight",1,"req"],["appShowErrorInputClass","","id","waxWeight","maxlength","255","min","0","name","waxWeight","placeholder","0.000g","required","","type","number",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],["for","measuredRingSize",1,"req"],["appShowErrorInputClass","","id","measuredRingSize","name","measuredRingSize","placeholder","-- Please Select--",3,"ngModel","notFoundText","searchable","ngModelChange"],["measuredRingSize","ngModel"],[3,"field"],[3,"value",4,"ngIf"]],template:function(n,e){1&n&&(w.bc(0,"page-title",0),w.gc(1,"div",1),w.gc(2,"form",2,3),w.gc(4,"div",4),w.gc(5,"div",5),w.gc(6,"div",6),w.gc(7,"div",7),w.gc(8,"div",8),w.gc(9,"label",9),w.gc(10,"input",10),w.rc("change",(function(){return e.onChangeStatusFilter()}))("ngModelChange",(function(n){return e.model.typeEvent=n})),w.fc(),w.cd(11," All "),w.fc(),w.gc(12,"label",9),w.gc(13,"input",11),w.rc("change",(function(){return e.onChangeStatusFilter()}))("ngModelChange",(function(n){return e.model.typeEvent=n})),w.fc(),w.cd(14," Event "),w.fc(),w.gc(15,"label",9),w.gc(16,"input",12),w.rc("change",(function(){return e.onChangeStatusFilter()}))("ngModelChange",(function(n){return e.model.typeEvent=n})),w.fc(),w.cd(17," Kit "),w.fc(),w.fc(),w.fc(),w.gc(18,"div",7),w.gc(19,"div",8),w.gc(20,"label",9),w.gc(21,"input",13),w.rc("change",(function(){return e.onChangeStatusFilter()}))("ngModelChange",(function(n){return e.model.status=n})),w.fc(),w.cd(22," All "),w.fc(),w.gc(23,"label",9),w.gc(24,"input",14),w.rc("change",(function(){return e.onChangeStatusFilter()}))("ngModelChange",(function(n){return e.model.status=n})),w.fc(),w.cd(25," Created "),w.fc(),w.gc(26,"label",9),w.gc(27,"input",15),w.rc("change",(function(){return e.onChangeStatusFilter()}))("ngModelChange",(function(n){return e.model.status=n})),w.fc(),w.cd(28," Received "),w.fc(),w.gc(29,"label",9),w.gc(30,"input",16),w.rc("change",(function(){return e.onChangeStatusFilter()}))("ngModelChange",(function(n){return e.model.status=n})),w.fc(),w.cd(31," Completed "),w.fc(),w.fc(),w.fc(),w.gc(32,"div",17),w.gc(33,"div",18),w.gc(34,"button",19),w.cd(35,"Action"),w.fc(),w.gc(36,"div",20),w.ad(37,Z,3,2,"ng-container",21),w.ad(38,J,2,0,"button",22),w.fc(),w.fc(),w.fc(),w.fc(),w.gc(39,"div",23),w.gc(40,"div",24),w.gc(41,"div",25),w.gc(42,"search",26),w.rc("searchEmitter",(function(n){return e.search(n)})),w.fc(),w.fc(),w.fc(),w.fc(),w.gc(43,"div",27),w.gc(44,"table",28),w.gc(45,"thead"),w.gc(46,"tr"),w.gc(47,"th",29),w.ad(48,X,3,2,"div",30),w.fc(),w.bc(49,"th",31),w.gc(50,"th"),w.cd(51,"Customer"),w.fc(),w.ad(52,Q,2,0,"th",21),w.ad(53,K,2,0,"th",21),w.ad(54,nn,2,0,"th",21),w.ad(55,en,2,0,"th",21),w.gc(56,"th"),w.cd(57,"Type"),w.fc(),w.gc(58,"th"),w.cd(59,"Paid (\xa3)"),w.fc(),w.gc(60,"th"),w.cd(61,"Submitted"),w.fc(),w.gc(62,"th"),w.cd(63,"Status"),w.fc(),w.bc(64,"th",32),w.fc(),w.fc(),w.ad(65,bn,6,2,"tbody",21),w.ad(66,vn,5,1,"tbody",21),w.fc(),w.ad(67,Sn,2,1,"div",33),w.fc(),w.ad(68,yn,1,1,"table-controls",34),w.fc(),w.fc(),w.fc(),w.fc(),w.ad(69,Cn,1,1,"loading-ring",35),w.ad(70,$n,12,8,"ng-template",null,36,w.bd),w.ad(72,On,11,7,"ng-template",null,37,w.bd),w.ad(74,kn,11,9,"ng-template",null,38,w.bd)),2&n&&(w.Mb(4),w.Sb("form-blocked",!0===e.submitting),w.Mb(5),w.Sb("active",null===e.model.typeEvent),w.Nb("disabled",e.state.loading||e.imageLoggingSessionState),w.Mb(1),w.Cc("ngModel",e.model.typeEvent)("value",null),w.Mb(2),w.Sb("active",!0===e.model.typeEvent),w.Nb("disabled",e.state.loading||e.imageLoggingSessionState),w.Mb(1),w.Cc("ngModel",e.model.typeEvent)("value",!0),w.Mb(2),w.Sb("active",!1===e.model.typeEvent),w.Nb("disabled",e.state.loading||e.imageLoggingSessionState),w.Mb(1),w.Cc("ngModel",e.model.typeEvent)("value",!1),w.Mb(4),w.Sb("active",null===e.model.status),w.Nb("disabled",e.state.loading||e.imageLoggingSessionState),w.Mb(1),w.Cc("ngModel",e.model.status)("value",null),w.Mb(2),w.Sb("active",e.model.status===e.submissionStatusCreated),w.Nb("disabled",e.state.loading||e.imageLoggingSessionState),w.Mb(1),w.Cc("ngModel",e.model.status)("value",e.submissionStatusCreated),w.Mb(2),w.Sb("active",e.model.status===e.submissionStatusReceived),w.Nb("disabled",e.state.loading||e.imageLoggingSessionState),w.Mb(1),w.Cc("ngModel",e.model.status)("value",e.submissionStatusReceived),w.Mb(2),w.Sb("active",e.model.status===e.submissionStatusCompleted),w.Nb("disabled",e.state.loading||e.imageLoggingSessionState),w.Mb(1),w.Cc("ngModel",e.model.status)("value",e.submissionStatusCompleted),w.Mb(7),w.Cc("ngIf",!e.loadingActions),w.Mb(1),w.Cc("ngIf",e.loadingActions),w.Mb(4),w.Cc("setSearch",e.defaultSearch)("searchFields",e.searchFields),w.Mb(6),w.Cc("ngIf",!e.state.loading),w.Mb(4),w.Cc("ngIf",null===e.model.typeEvent),w.Mb(1),w.Cc("ngIf",null===e.model.typeEvent),w.Mb(1),w.Cc("ngIf",!1===e.model.typeEvent),w.Mb(1),w.Cc("ngIf",!0===e.model.typeEvent),w.Mb(10),w.Cc("ngIf",!e.state.loading),w.Mb(1),w.Cc("ngIf",e.state.loading),w.Mb(1),w.Cc("ngIf",e.state.loading),w.Mb(1),w.Cc("ngIf",!e.state.loading),w.Mb(1),w.Cc("ngIf",e.submitting))},directives:[x.a,s.z,s.l,s.m,s.s,s.d,s.k,s.n,$.c,$.h,$.f,o.u,y.a,$.e,s.a,o.t,A.a,P.e,B.a,k.a,T.a,_.a,j.a,D.a,E.a,s.u,L.a,D.n,s.g,s.q,N.a],pipes:[z.a,o.G,R.a,U.a,F.a,o.I,o.f],styles:[""]}),e}(r.a),En=t("oZ8P"),Ln=t("ALmS"),Nn=Object(Ln.gql)(Tn||(_n=["\n    query submissionsByIdSimple($id: ID!) {\n        submission(id: $id) {\n            id\n            status {\n                id\n                name\n            }\n            kitType {\n                id\n                name\n            }\n            submittedAt\n            amountPaid\n            totalPrice\n            customer {\n                id\n                fullName\n                email\n                address1\n                address2\n                city\n                county\n                postcode\n                country\n            }\n        }\n    }\n"],jn=["\n    query submissionsByIdSimple($id: ID!) {\n        submission(id: $id) {\n            id\n            status {\n                id\n                name\n            }\n            kitType {\n                id\n                name\n            }\n            submittedAt\n            amountPaid\n            totalPrice\n            customer {\n                id\n                fullName\n                email\n                address1\n                address2\n                city\n                county\n                postcode\n                country\n            }\n        }\n    }\n"],Object.defineProperty?Object.defineProperty(_n,"raw",{value:jn}):_n.raw=jn,Tn=_n)),zn=t("/IUn"),Rn=function(){function n(n){this.apollo=n}return n.prototype.getSubmissionByIdSimple=function(n){return this.apollo.query({query:Nn,variables:{id:n}})},n.\u0275fac=function(e){return new(e||n)(w.oc(zn.b))},n.\u0275prov=w.Wb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}();function Un(n,e){if(1&n&&(w.gc(0,"pre",15),w.cd(1,"        "),w.gc(2,"code",15),w.cd(3,"\n            "),w.gc(4,"span",16),w.cd(5,"\n                "),w.gc(6,"span",17),w.cd(7,"Submission ID: "),w.fc(),w.cd(8),w.fc(),w.cd(9,"\n        "),w.fc(),w.cd(10,"\n    "),w.fc()),2&n){w.vc();var t=w.Lc(6);w.Mb(8),w.ed("\n              ",t.value,"\n            ")}}function Fn(n,e){1&n&&(w.gc(0,"td"),w.bc(1,"loading-ring",20),w.fc()),2&n&&(w.Mb(1),w.Cc("size",20))}function Wn(n,e){1&n&&(w.gc(0,"td",11),w.cd(1,"Success"),w.fc())}function Gn(n,e){1&n&&(w.gc(0,"td",11),w.cd(1,"Fetched"),w.fc())}function Yn(n,e){1&n&&(w.gc(0,"td",11),w.cd(1,"Error"),w.fc())}function qn(n,e){1&n&&(w.gc(0,"td",11),w.cd(1,"Already Scanned"),w.fc())}function Hn(n,e){if(1&n&&(w.gc(0,"tr"),w.gc(1,"td"),w.cd(2),w.fc(),w.ad(3,Fn,2,1,"td",18),w.ad(4,Wn,2,0,"td",19),w.ad(5,Gn,2,0,"td",19),w.ad(6,Yn,2,0,"td",19),w.ad(7,qn,2,0,"td",19),w.fc()),2&n){var t=e.$implicit;w.Mb(2),w.dd(t.id),w.Mb(1),w.Cc("ngIf","loading"===t.status),w.Mb(1),w.Cc("ngIf","success"===t.status),w.Mb(1),w.Cc("ngIf","fetched"===t.status),w.Mb(1),w.Cc("ngIf","error"===t.status),w.Mb(1),w.Cc("ngIf","alreadyScanned"===t.status)}}function Vn(n,e){if(1&n){var t=w.hc();w.bc(0,"modal-header",2),w.gc(1,"div",3),w.gc(2,"div",4),w.bc(3,"img",5),w.ad(4,Un,11,1,"pre",6),w.fc(),w.gc(5,"input",7,8),w.rc("ngModelChange",(function(n){return w.Oc(t),w.vc()._barcodeValue=n}))("keyup.enter",(function(){return w.Oc(t),w.vc().onScanned()})),w.fc(),w.gc(7,"div",9),w.gc(8,"table",10),w.gc(9,"thead"),w.gc(10,"tr"),w.gc(11,"th"),w.cd(12,"ID"),w.fc(),w.gc(13,"th",11),w.cd(14,"STATUS"),w.fc(),w.fc(),w.fc(),w.gc(15,"tbody"),w.ad(16,Hn,8,6,"tr",12),w.fc(),w.fc(),w.fc(),w.fc(),w.gc(17,"div",13),w.gc(18,"button",14),w.rc("click",(function(){return w.Oc(t),w.vc().modalService.dismissAll()})),w.cd(19," Done Scanning "),w.fc(),w.fc()}if(2&n){var i=e.$implicit,o=w.Lc(6),s=w.vc();w.Cc("modal",i),w.Mb(4),w.Cc("ngIf",o.value),w.Mb(1),w.Cc("ngModel",s._barcodeValue),w.Mb(11),w.Cc("ngForOf",s.scanned)}}var Zn=function(){function n(n){this.modalService=n,this.scanned=[],this._onScanned=new w.q}return Object.defineProperty(n.prototype,"disabled",{set:function(n){this._disabled=n},enumerable:!1,configurable:!0}),n.prototype.onScanned=function(){if(null!==this._barcodeValue){for(var n=0,e=this.scanned;n<e.length;n++)if(e[n].id===this._barcodeValue)return this.scanned.push({id:this._barcodeValue,status:"alreadyScanned"}),void(this._barcodeValue=null);this.scanned.push({id:this._barcodeValue,status:"loading"}),this._onScanned.emit(this._barcodeValue),this._barcodeValue=null}},n.prototype.openScannerModal=function(n){var e=this;this.modalService.open(n).result.then((function(){clearInterval(e.scannerInterval)}),(function(){clearInterval(e.scannerInterval)})),this.scannerInterval=setInterval((function(n){document.getElementById("scannerInput").focus()}),100)},Object.defineProperty(n.prototype,"updateScanned",{set:function(n){for(var e=0,t=this.scanned;e<t.length;e++){var i=t[e];if(n.id===i.id)return void(i.status=n.status)}},enumerable:!1,configurable:!0}),n.\u0275fac=function(e){return new(e||n)(w.ac($.i))},n.\u0275cmp=w.Ub({type:n,selectors:[["scanner-modal"]],inputs:{disabled:"disabled",updateScanned:"updateScanned"},outputs:{_onScanned:"_onScanned"},decls:4,vars:1,consts:[["type","button",1,"btn","btn-primary",3,"disabled","click"],["scanModal",""],["title","Scanning Now",3,"modal"],[1,"modal-body"],[1,"text-center"],["src","/assets/img/barcode.gif",2,"max-width","50%"],["class","language-term",4,"ngIf"],["id","scannerInput",1,"ui-hidden-accessible",3,"ngModel","ngModelChange","keyup.enter"],["barcodeValue","ngModel"],[1,"table-responsive"],[1,"table"],[1,"tc"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],[1,"language-term"],[1,"token","input"],[1,"token","prompt"],[4,"ngIf"],["class","tc",4,"ngIf"],[3,"size"]],template:function(n,e){if(1&n){var t=w.hc();w.gc(0,"button",0),w.rc("click",(function(){w.Oc(t);var n=w.Lc(3);return e.openScannerModal(n)})),w.cd(1," Scan\n"),w.fc(),w.ad(2,Vn,20,4,"ng-template",null,1,w.bd)}2&n&&w.Cc("disabled",e._disabled)},directives:[j.a,o.u,s.d,s.k,s.n,o.t,T.a],styles:[""]}),n}();function Jn(n,e){if(1&n){var t=w.hc();w.ec(0),w.gc(1,"tr"),w.wc(2,"lowercase"),w.gc(3,"td"),w.cd(4),w.fc(),w.gc(5,"td"),w.cd(6),w.wc(7,"titlecase"),w.fc(),w.gc(8,"td"),w.cd(9),w.wc(10,"currency"),w.fc(),w.gc(11,"td"),w.cd(12),w.wc(13,"simpleDateTime"),w.fc(),w.gc(14,"td",23),w.gc(15,"span"),w.cd(16),w.fc(),w.fc(),w.gc(17,"td",24),w.gc(18,"button",25),w.rc("click",(function(){w.Oc(t);var n=e.$implicit;return w.vc(2).viewSubmission(n.id)})),w.bc(19,"span",26),w.fc(),w.fc(),w.fc(),w.dc()}if(2&n){var i=e.$implicit;w.Mb(1),w.Pb("status-",w.xc(2,8,i.status),""),w.Mb(3),w.dd(i.customerName),w.Mb(2),w.dd(w.xc(7,10,i.kitType)),w.Mb(3),w.dd(w.xc(10,12,i.totalPrice)),w.Mb(3),w.dd(w.xc(13,14,i.submittedAt)),w.Mb(4),w.dd(i.status)}}function Xn(n,e){1&n&&(w.gc(0,"tr"),w.gc(1,"td",27),w.gc(2,"p",28),w.cd(3,"No submissions scanned"),w.fc(),w.fc(),w.fc())}function Qn(n,e){if(1&n&&(w.gc(0,"div",3),w.gc(1,"div",4),w.gc(2,"div",19),w.gc(3,"table",20),w.gc(4,"thead"),w.gc(5,"tr"),w.gc(6,"th"),w.cd(7,"Customer"),w.fc(),w.gc(8,"th"),w.cd(9,"Type"),w.fc(),w.gc(10,"th"),w.cd(11,"Paid (\xa3)"),w.fc(),w.gc(12,"th"),w.cd(13,"Submitted"),w.fc(),w.gc(14,"th"),w.cd(15,"Status"),w.fc(),w.bc(16,"th"),w.fc(),w.fc(),w.gc(17,"tbody"),w.ad(18,Jn,20,16,"ng-container",21),w.ad(19,Xn,4,0,"tr",22),w.fc(),w.fc(),w.fc(),w.fc(),w.fc()),2&n){var t=w.vc();w.Mb(18),w.Cc("ngForOf",t.data.scannedItems),w.Mb(1),w.Cc("ngIf",!t.data.scannedItems.length)}}var Kn,ne,ee=function(){return function(n,e,t,i,o,s,a,c,r,d,u,l,g,m){this.id=n,this.status=e,this.kitType=t,this.submittedAt=i,this.amountPaid=o,this.totalPrice=s,this.customerEmail=a,this.customerName=c,this.address1=r,this.address2=d,this.city=u,this.county=l,this.postcode=g,this.country=m}}(),te=function(){function n(n,e,t,i,o,s){this.appUserService=n,this.exportDataService=e,this.router=t,this.eventSubmissionService=i,this.submissionService=o,this.toastr=s,this.receivedByCAST="receivedByCAST",this.atManufacturing="atManufacturing",this.backAtCAST="backAtCAST",this.sentToCustomer="sentToCustomer",this.onlyFetch="onlyFetch",this.model={typeScan:null,status:null,updateScanned:null},this.data={scannedIds:[],scannedItems:[]},this.state={isAdmin:!1,exporting:!1}}return n.prototype.ngOnInit=function(){var n=this;this.appUserService.getMe().subscribe((function(e){n.state.isAdmin=n.appUserService.isAdmin(e.data.appUser.roles)}))},n.prototype.onChangeSubmissionType=function(){},n.prototype.submissionScanned=function(n){var e=this,t=new Date,i=null;switch(this.model.typeScan){case this.receivedByCAST:i=d.o.id;break;case this.atManufacturing:i=d.i.id;break;case this.backAtCAST:i=d.d.id;break;case this.sentToCustomer:i=d.n.id;break;case this.onlyFetch:i=null}var o="/submissions/"+n;if(i){var s={id:o,updatedAt:t.toUTCString(),status:i};this.eventSubmissionService.update(s).then((function(t){if(t.data.updateSubmission){var i=new ee(t.data.updateSubmission.id,t.data.updateSubmission.status.name,t.data.updateSubmission.kitType?t.data.updateSubmission.kitType.name:null,t.data.updateSubmission.submittedAt,t.data.updateSubmission.amountPaid,t.data.updateSubmission.totalPrice,t.data.updateSubmission.customer.email,t.data.updateSubmission.customer.fullName,t.data.updateSubmission.customer.address1,t.data.updateSubmission.customer.address2,t.data.updateSubmission.customer.city,t.data.updateSubmission.customer.county,t.data.updateSubmission.customer.postcode,t.data.updateSubmission.customer.country);e.data.scannedItems.push(i),e.model.updateScanned={id:t.data.updateSubmission.id.replace(/\D/g,""),status:"success"}}else e.model.updateScanned={id:n,status:"error"}}),(function(t){e.model.updateScanned={id:n,status:"error"}}))}else this.submissionService.getSubmissionByIdSimple(o).subscribe((function(t){if(t.data.submission){var i=new ee(t.data.submission.id,t.data.submission.status.name,t.data.submission.kitType?t.data.submission.kitType.name:null,t.data.submission.submittedAt,t.data.submission.amountPaid,t.data.submission.totalPrice,t.data.submission.customer.email,t.data.submission.customer.fullName,t.data.submission.customer.address1,t.data.submission.customer.address2,t.data.submission.customer.city,t.data.submission.customer.county,t.data.submission.customer.postcode,t.data.submission.customer.country);e.data.scannedItems.push(i),e.model.updateScanned={id:t.data.submission.id.replace(/\D/g,""),status:"fetched"}}else e.model.updateScanned={id:n,status:"error"}}),(function(t){e.model.updateScanned={id:n,status:"error"}}))},n.prototype.viewSubmission=function(n){this.router.navigate(["submission","view",n.replace(/\D/g,"")])},n.prototype.exportAddresses=function(){if(this.state.exporting=!0,this.data.scannedItems.length<1)return this.toastr.error("You must scan at least one barcode."),void(this.state.exporting=!1);for(var n,e=[],t=[],i=0,o=this.data.scannedItems;i<o.length;i++)n=this.exportDataService.flattenObject(o[i],e),t.push(n.data),e=n.headers;this.exportDataService.whiteListColumns(["id","kitType","customerName","address1","address2","city","county","postcode","country","customerEmail"],t),this.exportDataService.renameColumns({id:"Order Reference",customerName:"Full Name",customerEmail:"Email Address"},t),this.exportDataService.addStaticValues({weight:.06,packageSize:"large letter",serviceCode:"BPR1",serviceRegisterCode:"01"},t),this.exportDataService.exportToCsv("Scanned_submissions_export_"+(new Date).toLocaleString(),Object.keys(t[0]),t),this.toastr.success("Exported and downloading file"),this.state.exporting=!1},n.\u0275fac=function(e){return new(e||n)(w.ac(f.a),w.ac(S.a),w.ac(P.b),w.ac(c.a),w.ac(Rn),w.ac(O.b))},n.\u0275cmp=w.Ub({type:n,selectors:[["ng-component"]],decls:31,vars:23,consts:[["title","Scan In Submissions"],["novalidate",""],["scanSubmissionsForm","ngForm"],[1,"card","mt-5"],[1,"card-body"],[1,"row","text-center","mb-5"],[1,"col-sm-12"],["data-toggle","buttons",1,"btn-group","btn-group-toggle"],[1,"btn","btn-primary","nav-group"],["type","radio","name","receivedByCAST","id","receivedByCAST","autocomplete","off",3,"value","ngModel","ngModelChange","change"],["type","radio","name","atManufacturing","id","atManufacturing","autocomplete","off",3,"value","ngModel","ngModelChange","change"],["type","radio","name","backAtCAST","id","backAtCAST","autocomplete","off",3,"value","ngModel","ngModelChange","change"],["type","radio","name","sentToCustomer","id","sentToCustomer","autocomplete","off",3,"value","ngModel","ngModelChange","change"],["type","radio","name","onlyFetch","id","onlyFetch","autocomplete","off",3,"value","ngModel","ngModelChange","change"],[1,"row","my-2"],[1,"col-12","tc"],[3,"disabled","updateScanned","_onScanned"],["type","button",1,"btn","btn-primary",3,"click"],["class","card mt-5",4,"ngIf"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"status"],[1,"tr"],["type","button",1,"small-button","btn-outline-secondary","round",3,"click"],[1,"fa","fa-eye"],["colspan","6"],[1,"text-muted","text-center"]],template:function(n,e){1&n&&(w.bc(0,"page-title",0),w.gc(1,"form",1,2),w.gc(3,"div",3),w.gc(4,"div",4),w.gc(5,"div",5),w.gc(6,"div",6),w.gc(7,"div",7),w.gc(8,"label",8),w.gc(9,"input",9),w.rc("ngModelChange",(function(n){return e.model.typeScan=n}))("change",(function(){return e.onChangeSubmissionType()})),w.fc(),w.cd(10," Received by CAST "),w.fc(),w.gc(11,"label",8),w.gc(12,"input",10),w.rc("ngModelChange",(function(n){return e.model.typeScan=n}))("change",(function(){return e.onChangeSubmissionType()})),w.fc(),w.cd(13," At Manufacturing "),w.fc(),w.gc(14,"label",8),w.gc(15,"input",11),w.rc("ngModelChange",(function(n){return e.model.typeScan=n}))("change",(function(){return e.onChangeSubmissionType()})),w.fc(),w.cd(16," Back At CAST "),w.fc(),w.gc(17,"label",8),w.gc(18,"input",12),w.rc("ngModelChange",(function(n){return e.model.typeScan=n}))("change",(function(){return e.onChangeSubmissionType()})),w.fc(),w.cd(19," Sent to Customer "),w.fc(),w.gc(20,"label",8),w.gc(21,"input",13),w.rc("ngModelChange",(function(n){return e.model.typeScan=n}))("change",(function(){return e.onChangeSubmissionType()})),w.fc(),w.cd(22," Read Only "),w.fc(),w.fc(),w.fc(),w.fc(),w.gc(23,"div",14),w.gc(24,"div",15),w.gc(25,"scanner-modal",16),w.rc("_onScanned",(function(n){return e.submissionScanned(n)})),w.fc(),w.fc(),w.fc(),w.gc(26,"div",14),w.gc(27,"div",15),w.gc(28,"button",17),w.rc("click",(function(){return e.exportAddresses()})),w.cd(29," Export Submissions "),w.fc(),w.fc(),w.fc(),w.fc(),w.fc(),w.ad(30,Qn,20,2,"div",18),w.fc()),2&n&&(w.Mb(8),w.Sb("active",e.model.typeScan===e.receivedByCAST),w.Mb(1),w.Cc("value",e.receivedByCAST)("ngModel",e.model.typeScan),w.Mb(2),w.Sb("active",e.model.typeScan===e.atManufacturing),w.Mb(1),w.Cc("value",e.atManufacturing)("ngModel",e.model.typeScan),w.Mb(2),w.Sb("active",e.model.typeScan===e.backAtCAST),w.Mb(1),w.Cc("value",e.backAtCAST)("ngModel",e.model.typeScan),w.Mb(2),w.Sb("active",e.model.typeScan===e.sentToCustomer),w.Mb(1),w.Cc("value",e.sentToCustomer)("ngModel",e.model.typeScan),w.Mb(2),w.Sb("active",e.model.typeScan===e.onlyFetch),w.Mb(1),w.Cc("value",e.onlyFetch)("ngModel",e.model.typeScan),w.Mb(4),w.Cc("disabled",null===e.model.typeScan)("updateScanned",e.model.updateScanned),w.Mb(5),w.Cc("ngIf",e.data.scannedItems.length>0))},directives:[x.a,s.z,s.l,s.m,s.s,s.d,s.k,s.n,Zn,o.u,o.t],pipes:[o.q,o.G,R.a,U.a],styles:[""]}),n}(),ie=t("tk/3"),oe=Object(Ln.gql)(Kn||(Kn=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation createSignedUploadUrl(\n        $contentType: String!,\n        $extension: String!\n    ) {\n        createSignedUploadUrl(input: {\n            _id: "1",\n            contentType: $contentType,\n            extension: $extension,\n            clientMutationId: ""\n        }) {\n            id,\n            objectName,\n            signedUrl\n        }\n    }\n'],['\n    mutation createSignedUploadUrl(\n        $contentType: String!,\n        $extension: String!\n    ) {\n        createSignedUploadUrl(input: {\n            _id: "1",\n            contentType: $contentType,\n            extension: $extension,\n            clientMutationId: ""\n        }) {\n            id,\n            objectName,\n            signedUrl\n        }\n    }\n']))),se=Object(Ln.gql)(ne||(ne=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation createProcessUploadedSubmissionsRequest(\n        $numberToProcess: Int!\n    ) {\n        createProcessUploadedSubmissionsRequest(input: {\n            numberToProcess: $numberToProcess,\n            clientMutationId: ""\n        }) {\n            id,\n            numberProcessed\n        }\n    }\n'],['\n    mutation createProcessUploadedSubmissionsRequest(\n        $numberToProcess: Int!\n    ) {\n        createProcessUploadedSubmissionsRequest(input: {\n            numberToProcess: $numberToProcess,\n            clientMutationId: ""\n        }) {\n            id,\n            numberProcessed\n        }\n    }\n']))),ae=function(n,e,t,i){return new(t||(t=Promise))((function(o,s){function a(n){try{r(i.next(n))}catch(e){s(e)}}function c(n){try{r(i.throw(n))}catch(e){s(e)}}function r(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,c)}r((i=i.apply(n,e||[])).next())}))},ce=function(n,e){var t,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(n,a)}catch(c){s=[6,c],i=0}finally{t=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},re=function(){function n(n,e){this.http=n,this.apollo=e}return n.prototype.createSignedUploadUrl=function(n){return ae(this,void 0,void 0,(function(){return ce(this,(function(e){switch(e.label){case 0:return[4,this.apollo.mutate({mutation:oe,variables:n}).toPromise()];case 1:return[2,e.sent().data]}}))}))},n.prototype.uploadFile=function(n,e){return ae(this,void 0,void 0,(function(){var t,i;return ce(this,(function(o){return t=new ie.d({"Content-Type":n.type}),i=new ie.e("PUT",e,n,{headers:t,reportProgress:!0}),[2,this.http.request(i).toPromise()]}))}))},n.prototype.processUploads=function(n){return ae(this,void 0,void 0,(function(){return ce(this,(function(e){switch(e.label){case 0:return[4,this.apollo.mutate({mutation:se,variables:n}).toPromise()];case 1:return[2,e.sent().data]}}))}))},n.\u0275fac=function(e){return new(e||n)(w.oc(ie.b),w.oc(zn.b))},n.\u0275prov=w.Wb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),de=t("kvL/"),ue=function(n,e,t,i){return new(t||(t=Promise))((function(o,s){function a(n){try{r(i.next(n))}catch(e){s(e)}}function c(n){try{r(i.throw(n))}catch(e){s(e)}}function r(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,c)}r((i=i.apply(n,e||[])).next())}))},le=function(n,e){var t,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(n,a)}catch(c){s=[6,c],i=0}finally{t=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function ge(n,e){if(1&n){var t=w.hc();w.gc(0,"ngx-dropzone-preview",10),w.rc("removed",(function(){w.Oc(t);var n=e.$implicit;return w.vc().onRemove(n)})),w.gc(1,"ngx-dropzone-label"),w.cd(2),w.fc(),w.fc()}if(2&n){var i=e.$implicit;w.Cc("file",i)("removable",!0),w.Mb(2),w.fd("",i.name," (",i.type,")")}}function me(n,e){if(1&n&&(w.ec(0),w.cd(1),w.dc()),2&n){var t=w.vc(2);w.Mb(1),w.ed(" of ",t.data.files.length," file(s)")}}function pe(n,e){if(1&n&&(w.gc(0,"p",11),w.cd(1),w.ad(2,me,2,1,"ng-container",12),w.fc()),2&n){var t=w.vc();w.Mb(1),w.ed("Processed: ",t.processed," "),w.Mb(1),w.Cc("ngIf",t.data.files.length>0)}}function fe(n,e){1&n&&w.bc(0,"loading-ring",13),2&n&&w.Cc("size",100)}var be=function(){function n(n,e){this.fileUploadService=n,this.toastr=e,this.numUploadsToProcess=20,this.uploadBatchSize=8,this.data={files:[]},this.state={submitting:!1},this.model={},this.processed=0}return n.prototype.onSelect=function(n){var e;(e=this.data.files).push.apply(e,n.addedFiles)},n.prototype.onRemove=function(n){this.data.files.splice(this.data.files.indexOf(n),1)},n.prototype.doUpload=function(){return ue(this,void 0,void 0,(function(){var n,e,t,i=this;return le(this,(function(o){switch(o.label){case 0:this.state.submitting=!0,this.processed=0,n=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;var i=Array(n),o=0;for(e=0;e<t;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,o++)i[o]=s[a];return i}(this.data.files),o.label=1;case 1:o.trys.push([1,5,6,7]),o.label=2;case 2:return n.length>0?(e=n.splice(0,this.uploadBatchSize).map((function(n){return i.fileUploadService.createSignedUploadUrl({contentType:n.type,extension:n.name.split(".").pop()}).then((function(e){return i.fileUploadService.uploadFile(n,e.createSignedUploadUrl.signedUrl).then((function(){i.processed++}))}))})),[4,Promise.all(e)]):[3,4];case 3:return o.sent(),[3,2];case 4:return this.toastr.success("Image(s) uploaded successfully!"),this.data.files=[],[3,7];case 5:return t=o.sent(),this.toastr.error("Ohnoes! Something went wrong with the upload :("),console.error(t),[3,7];case 6:return this.state.submitting=!1,[7];case 7:return[2]}}))}))},n.prototype.processUploads=function(){return ue(this,void 0,void 0,(function(){var n,e,t,i;return le(this,(function(o){switch(o.label){case 0:this.state.submitting=!0,o.label=1;case 1:o.trys.push([1,5,6,7]),n=-1,e=0,o.label=2;case 2:return 0===n?[3,4]:[4,this.fileUploadService.processUploads({numberToProcess:this.numUploadsToProcess})];case 3:return t=o.sent(),e+=n=t.createProcessUploadedSubmissionsRequest.numberProcessed,[3,2];case 4:return 0===e?this.toastr.warning("0 files were succesfully processed on the server"):this.toastr.success(e+" files processed"),[3,7];case 5:return i=o.sent(),this.toastr.error("Error requesting processing of uploads"),console.error(i),[3,7];case 6:return this.state.submitting=!1,[7];case 7:return[2]}}))}))},n.\u0275fac=function(e){return new(e||n)(w.ac(re),w.ac(O.b))},n.\u0275cmp=w.Ub({type:n,selectors:[["ng-component"]],decls:23,vars:5,consts:[["subtitle","Upload the photos taken from a wax logging session","title","Upload Wax Images"],[1,"card","mt-5"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"mb-3",3,"change"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["class","lead",4,"ngIf"],[3,"size",4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"],[1,"lead"],[4,"ngIf"],[3,"size"]],template:function(n,e){1&n&&(w.bc(0,"page-title",0),w.gc(1,"div",1),w.gc(2,"div",2),w.gc(3,"div",3),w.gc(4,"div",4),w.gc(5,"h4"),w.cd(6,"Upload Photos"),w.fc(),w.gc(7,"ngx-dropzone",5),w.rc("change",(function(n){return e.onSelect(n)})),w.gc(8,"ngx-dropzone-label"),w.cd(9,"Drop you photo(s) here."),w.fc(),w.ad(10,ge,3,4,"ngx-dropzone-preview",6),w.fc(),w.gc(11,"button",7),w.rc("click",(function(){return e.doUpload()})),w.cd(12," Upload "),w.fc(),w.ad(13,pe,3,2,"p",8),w.fc(),w.fc(),w.fc(),w.fc(),w.gc(14,"div",1),w.gc(15,"div",2),w.gc(16,"div",3),w.gc(17,"div",4),w.gc(18,"h4"),w.cd(19,"Process Uploads on the Server"),w.fc(),w.gc(20,"button",7),w.rc("click",(function(){return e.processUploads()})),w.cd(21," Process Uploads "),w.fc(),w.fc(),w.fc(),w.fc(),w.fc(),w.ad(22,fe,1,1,"loading-ring",9)),2&n&&(w.Mb(10),w.Cc("ngForOf",e.data.files),w.Mb(1),w.Cc("disabled",e.state.submitting||0===e.data.files.length),w.Mb(2),w.Cc("ngIf",!0===e.state.submitting||e.processed>0),w.Mb(7),w.Cc("disabled",e.state.submitting),w.Mb(2),w.Cc("ngIf",e.state.submitting))},directives:[x.a,de.a,de.g,o.t,o.u,de.d,T.a],encapsulation:2}),n}(),he=[{path:"list",component:Dn},{path:"view/:id",component:En.a},{path:"scan",component:te},{path:"upload",component:be}],ve=function(){function n(){}return n.\u0275mod=w.Yb({type:n}),n.\u0275inj=w.Xb({factory:function(e){return new(e||n)},imports:[[P.f.forChild(he)],P.f]}),n}(),Se=t("z17N"),ye=t("lUu4"),Ce=t("K9Ib"),Me=t("rhck"),Ie=t("/wnf"),we=t("YbyT"),$e=t("57tZ"),Pe=t("xzcs"),Oe=t("D2Fp"),xe=t("lbMj"),Ae=t("IfPz"),Be=t("ZtzB"),ke=t("zoH9"),Te=t("DWOX"),_e=t("DwNB"),je=t("Cdzh"),De=t("BAfr"),Ee=t("mhvR"),Le=t("o14v"),Ne=t("bvrU"),ze=t("iUZM"),Re=t("Lpkd"),Ue=t("jmmt"),Fe=t("o973"),We=t("aX/C"),Ge=t("R+a7"),Ye=t("HEvJ"),qe=t("b44C"),He=t("oy+2"),Ve=t("0UpH"),Ze=t("KWY1"),Je=t("dkTK"),Xe=t("QZ6d"),Qe=t("G0jp"),Ke=t("RNmn"),nt=t("9WpQ"),et=function(){function n(){}return n.\u0275mod=w.Yb({type:n}),n.\u0275inj=w.Xb({factory:function(e){return new(e||n)},imports:[[o.c,s.f,$.g,de.c,Se.f,Se.j,a.a,ve,D.b]]}),n}();w.Sc(En.a,[o.r,o.s,o.t,o.u,o.B,o.x,o.y,o.z,o.A,o.v,o.w,s.z,s.p,s.y,s.d,s.q,s.t,s.a,s.v,s.w,s.s,s.k,s.l,s.u,s.h,s.g,s.r,s.b,s.e,s.n,s.o,s.m,$.c,$.d,$.h,$.f,$.e,$.k,de.a,de.g,de.d,de.b,de.e,de.f,Se.b,Se.k,Se.g,Se.e,Se.c,Se.d,Se.i,Se.l,Se.h,ye.a,Ce.a,Me.a,Ie.a,we.a,$e.a,N.a,Pe.a,Oe.a,xe.a,Ae.a,Be.a,k.a,ke.a,T.a,Te.a,_e.a,L.a,j.a,$.m,x.a,r.a,je.a,E.a,De.a,Ee.a,Le.a,Ne.a,ze.a,Re.a,Ue.a,Fe.a,We.a,Ge.a,_.a,Ye.a,B.a,y.a,qe.a,A.a,P.g,P.c,P.e,P.d,P.h,D.a,D.n,D.d,D.c,D.e,D.f,D.g,D.h,D.i,D.j,D.k,D.l,D.m,Dn,be,Zn,te,En.a],[o.b,o.I,o.q,o.l,o.F,o.g,o.D,o.G,o.d,o.f,o.j,o.k,o.m,He.a,R.a,Ve.a,z.a,F.a,Ze.a,Je.a,Xe.a,Qe.a,U.a,Ke.a,nt.a])},"kvL/":function(n,e,t){"use strict";t.d(e,"c",(function(){return T})),t.d(e,"a",(function(){return x})),t.d(e,"d",(function(){return P})),t.d(e,"b",(function(){return A})),t.d(e,"f",(function(){return k})),t.d(e,"e",(function(){return B})),t.d(e,"g",(function(){return I}));var i=t("Ji7U"),o=t("LK+K"),s=t("o0o1"),a=t.n(s),c=t("vuIU"),r=t("1OyB"),d=t("fXoL"),u=t("zC+P"),l=t("ofXK"),g=t("jhN1");function m(n,e){if(1&n){var t=d.hc();d.gc(0,"ngx-dropzone-remove-badge",1),d.rc("click",(function(n){return d.Oc(t),d.vc()._remove(n)})),d.fc()}}var p=[[["ngx-dropzone-label"]]],f=["ngx-dropzone-label"],b=["fileInput"];function h(n,e){1&n&&d.Ac(0,2,["*ngIf","!_hasPreviews"])}var v=[[["ngx-dropzone-preview"]],"*",[["ngx-dropzone-label"]]],S=["ngx-dropzone-preview","*","ngx-dropzone-label"];function y(n,e){if(1&n){var t=d.hc();d.gc(0,"ngx-dropzone-remove-badge",2),d.rc("click",(function(n){return d.Oc(t),d.vc()._remove(n)})),d.fc()}}function C(n,e){if(1&n){var t=d.hc();d.gc(0,"video",2),d.rc("click",(function(n){return d.Oc(t),n.stopPropagation()})),d.bc(1,"source",3),d.fc()}if(2&n){var i=d.vc();d.Mb(1),d.Cc("src",i.sanitizedVideoSrc,d.Rc)}}function M(n,e){if(1&n){var t=d.hc();d.gc(0,"ngx-dropzone-remove-badge",4),d.rc("click",(function(n){return d.Oc(t),d.vc()._remove(n)})),d.fc()}}var I=function(){var n=function n(){Object(r.a)(this,n)};return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=d.Vb({type:n,selectors:[["ngx-dropzone-label"]]}),n}();function w(n){return null!=n&&"false"!=="".concat(n)}var $=function(){var n={BACKSPACE:8,DELETE:46};return n[n.BACKSPACE]="BACKSPACE",n[n.DELETE]="DELETE",n}(),P=function(){var n=function(){function n(e){Object(r.a)(this,n),this.sanitizer=e,this._removable=!1,this.removed=new d.q,this.tabIndex=0}return Object(c.a)(n,[{key:"keyEvent",value:function(n){switch(n.keyCode){case $.BACKSPACE:case $.DELETE:this.remove()}}},{key:"_remove",value:function(n){n.stopPropagation(),this.remove()}},{key:"remove",value:function(){this._removable&&this.removed.next(this.file)}},{key:"readFile",value:function(){return Object(u.b)(this,void 0,void 0,a.a.mark((function n(){var e=this;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,t){var i=new FileReader;if(i.onload=function(e){n(e.target.result)},i.onerror=function(n){console.error("FileReader failed on file ".concat(e.file.name,".")),t(n)},!e.file)return t("No file to read. Please provide a file using the [file] Input property.");i.readAsDataURL(e.file)})));case 1:case"end":return n.stop()}}),n)})))}},{key:"removable",get:function(){return this._removable},set:function(n){this._removable=w(n)}},{key:"hostStyle",get:function(){return this.sanitizer.bypassSecurityTrustStyle("\n\t\t\tdisplay: flex;\n\t\t\theight: 140px;\n\t\t\tmin-height: 140px;\n\t\t\tmin-width: 180px;\n\t\t\tmax-width: 180px;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 20px;\n\t\t\tmargin: 10px;\n\t\t\tborder-radius: 5px;\n\t\t\tposition: relative;\n\t\t")}}]),n}();return n.\u0275fac=function(e){return new(e||n)(d.ac(g.b))},n.\u0275cmp=d.Ub({type:n,selectors:[["ngx-dropzone-preview"]],hostVars:3,hostBindings:function(n,e){1&n&&d.rc("keyup",(function(n){return e.keyEvent(n)})),2&n&&(d.jc("tabindex",e.tabIndex),d.Wc(e.hostStyle))},inputs:{removable:"removable",file:"file"},outputs:{removed:"removed"},ngContentSelectors:f,decls:2,vars:1,consts:[[3,"click",4,"ngIf"],[3,"click"]],template:function(n,e){1&n&&(d.Bc(p),d.Ac(0),d.ad(1,m,1,0,"ngx-dropzone-remove-badge",0)),2&n&&(d.Mb(1),d.Cc("ngIf",e.removable))},directives:function(){return[l.u,B]},styles:["[_nghost-%COMP%]{background-image:linear-gradient(to top,#ededed,#efefef,#f1f1f1,#f4f4f4,#f6f6f6)}[_nghost-%COMP%]:focus, [_nghost-%COMP%]:hover{background-image:linear-gradient(to top,#e3e3e3,#ebeaea,#e8e7e7,#ebeaea,#f4f4f4);outline:0}[_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]     ngx-dropzone-label{overflow-wrap:break-word}"]}),n}(),O=function(){var n=function(){function n(){Object(r.a)(this,n)}return Object(c.a)(n,[{key:"parseFileList",value:function(n,e,t,i){for(var o=[],s=[],a=0;a<n.length;a++){var c=n.item(a);this.isAccepted(c,e)?t&&c.size>t?this.rejectFile(s,c,"size"):!i&&o.length>=1?this.rejectFile(s,c,"no_multiple"):o.push(c):this.rejectFile(s,c,"type")}return{addedFiles:o,rejectedFiles:s}}},{key:"isAccepted",value:function(n,e){if("*"===e)return!0;var t=e.split(",").map((function(n){return n.toLowerCase().trim()})),i=n.type.toLowerCase(),o=n.name.toLowerCase();return!!t.find((function(n){return n.endsWith("/*")?i.split("/")[0]===n.split("/")[0]:n.startsWith(".")?o.endsWith(n):n==i}))}},{key:"rejectFile",value:function(n,e,t){var i=e;i.reason=t,n.push(i)}}]),n}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=d.Wb({token:n,factory:n.\u0275fac}),n}(),x=function(){var n=function(){function n(e){Object(r.a)(this,n),this.service=e,this.change=new d.q,this.accept="*",this._disabled=!1,this._multiple=!0,this._maxFileSize=void 0,this._expandable=!1,this._disableClick=!1,this._isHovered=!1}return Object(c.a)(n,[{key:"_onClick",value:function(){this.disableClick||this.showFileSelector()}},{key:"_onDragOver",value:function(n){this.disabled||(this.preventDefault(n),this._isHovered=!0)}},{key:"_onDragLeave",value:function(){this._isHovered=!1}},{key:"_onDrop",value:function(n){this.disabled||(this.preventDefault(n),this._isHovered=!1,this.handleFileDrop(n.dataTransfer.files))}},{key:"showFileSelector",value:function(){this.disabled||this._fileInput.nativeElement.click()}},{key:"_onFilesSelected",value:function(n){this.handleFileDrop(n.target.files),this._fileInput.nativeElement.value="",this.preventDefault(n)}},{key:"handleFileDrop",value:function(n){var e=this.service.parseFileList(n,this.accept,this.maxFileSize,this.multiple);this.change.next({addedFiles:e.addedFiles,rejectedFiles:e.rejectedFiles,source:this})}},{key:"preventDefault",value:function(n){n.preventDefault(),n.stopPropagation()}},{key:"_hasPreviews",get:function(){return!!this._previewChildren.length}},{key:"disabled",get:function(){return this._disabled},set:function(n){this._disabled=w(n),this._isHovered&&(this._isHovered=!1)}},{key:"multiple",get:function(){return this._multiple},set:function(n){this._multiple=w(n)}},{key:"maxFileSize",get:function(){return this._maxFileSize},set:function(n){this._maxFileSize=function(n){return isNaN(parseFloat(n))||isNaN(Number(n))?null:Number(n)}(n)}},{key:"expandable",get:function(){return this._expandable},set:function(n){this._expandable=w(n)}},{key:"disableClick",get:function(){return this._disableClick},set:function(n){this._disableClick=w(n)}}]),n}();return n.\u0275fac=function(e){return new(e||n)(d.ac(O,2))},n.\u0275cmp=d.Ub({type:n,selectors:[["ngx-dropzone"],["","ngx-dropzone",""]],contentQueries:function(n,e,t){var i;1&n&&d.Tb(t,P,!0),2&n&&d.Kc(i=d.sc())&&(e._previewChildren=i)},viewQuery:function(n,e){var t;1&n&&d.id(b,!0),2&n&&d.Kc(t=d.sc())&&(e._fileInput=t.first)},hostVars:8,hostBindings:function(n,e){1&n&&d.rc("click",(function(){return e._onClick()}))("dragover",(function(n){return e._onDragOver(n)}))("dragleave",(function(){return e._onDragLeave()}))("drop",(function(n){return e._onDrop(n)})),2&n&&d.Sb("ngx-dz-hovered",e._isHovered)("ngx-dz-disabled",e.disabled)("expandable",e.expandable)("unclickable",e.disableClick)},inputs:{accept:"accept",disabled:"disabled",multiple:"multiple",maxFileSize:"maxFileSize",expandable:"expandable",disableClick:"disableClick",id:"id",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedBy:["aria-describedby","ariaDescribedBy"]},outputs:{change:"change"},features:[d.Lb([O])],ngContentSelectors:S,decls:5,vars:8,consts:[["type","file",3,"id","multiple","accept","disabled","change"],["fileInput",""],[4,"ngIf"]],template:function(n,e){1&n&&(d.Bc(v),d.gc(0,"input",0,1),d.rc("change",(function(n){return e._onFilesSelected(n)})),d.fc(),d.ad(2,h,1,0,"ng-content",2),d.Ac(3),d.Ac(4,1)),2&n&&(d.Cc("id",e.id)("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled),d.Nb("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledby)("aria-describedby",e.ariaDescribedBy),d.Mb(2),d.Cc("ngIf",!e._hasPreviews))},directives:[l.u],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:180px;background:#fff;cursor:pointer;color:#717386;border:2px dashed #717386;border-radius:5px;font-size:16px;overflow-x:auto}.ngx-dz-hovered[_nghost-%COMP%]{border-style:solid}.ngx-dz-disabled[_nghost-%COMP%]{opacity:.5;cursor:no-drop;pointer-events:none}.expandable[_nghost-%COMP%]{overflow:hidden;height:unset;min-height:180px;flex-wrap:wrap}.unclickable[_nghost-%COMP%]{cursor:default}[_nghost-%COMP%]     ngx-dropzone-label{text-align:center;z-index:10;margin:10px auto}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus +   ngx-dropzone-label{outline:#000 dotted 1px;outline:-webkit-focus-ring-color auto 5px}"]}),n}(),A=function(){var n=function(n){Object(i.a)(t,n);var e=Object(o.a)(t);function t(n){var i;return Object(r.a)(this,t),(i=e.call(this,n)).defualtImgLoading="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBzdHlsZT0ibWFyZ2luOiBhdXRvOyBiYWNrZ3JvdW5kOiByZ2IoMjQxLCAyNDIsIDI0Mykgbm9uZSByZXBlYXQgc2Nyb2xsIDAlIDAlOyBkaXNwbGF5OiBibG9jazsgc2hhcGUtcmVuZGVyaW5nOiBhdXRvOyIgd2lkdGg9IjIyNHB4IiBoZWlnaHQ9IjIyNHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPgo8Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSIxNCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiM4NWEyYjYiIHN0cm9rZS1kYXNoYXJyYXk9IjIxLjk5MTE0ODU3NTEyODU1MiAyMS45OTExNDg1NzUxMjg1NTIiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+CiAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGR1cj0iMS4xNjI3OTA2OTc2NzQ0MTg0cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGtleVRpbWVzPSIwOzEiIHZhbHVlcz0iMCA1MCA1MDszNjAgNTAgNTAiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9jaXJjbGU+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjEwIiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZT0iI2JiY2VkZCIgc3Ryb2tlLWRhc2hhcnJheT0iMTUuNzA3OTYzMjY3OTQ4OTY2IDE1LjcwNzk2MzI2Nzk0ODk2NiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjE1LjcwNzk2MzI2Nzk0ODk2NiIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj4KICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZHVyPSIxLjE2Mjc5MDY5NzY3NDQxODRzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIga2V5VGltZXM9IjA7MSIgdmFsdWVzPSIwIDUwIDUwOy0zNjAgNTAgNTAiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9jaXJjbGU+CjwhLS0gW2xkaW9dIGdlbmVyYXRlZCBieSBodHRwczovL2xvYWRpbmcuaW8vIC0tPjwvc3ZnPg==",i.imageSrc=i.sanitizer.bypassSecurityTrustUrl(i.defualtImgLoading),i}return Object(c.a)(t,[{key:"ngOnInit",value:function(){var n=this;this.readFile().then((function(e){return setTimeout((function(){return n.imageSrc=e}))})).catch((function(n){return console.error(n)}))}}]),t}(P);return n.\u0275fac=function(e){return new(e||n)(d.ac(g.b))},n.\u0275cmp=d.Ub({type:n,selectors:[["ngx-dropzone-image-preview"]],features:[d.Lb([{provide:P,useExisting:n}]),d.Jb],ngContentSelectors:f,decls:3,vars:2,consts:[[3,"src"],[3,"click",4,"ngIf"],[3,"click"]],template:function(n,e){1&n&&(d.Bc(p),d.bc(0,"img",0),d.Ac(1),d.ad(2,y,1,0,"ngx-dropzone-remove-badge",1)),2&n&&(d.Cc("src",e.imageSrc,d.Rc),d.Mb(2),d.Cc("ngIf",e.removable))},directives:function(){return[l.u,B]},styles:["[_nghost-%COMP%]{min-width:unset!important;max-width:unset!important;padding:0!important}[_nghost-%COMP%]:focus   img[_ngcontent-%COMP%], [_nghost-%COMP%]:hover   img[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;border-radius:5px;opacity:.8}[_nghost-%COMP%]     ngx-dropzone-label{position:absolute;overflow-wrap:break-word}"]}),n}(),B=function(){var n=function n(){Object(r.a)(this,n)};return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=d.Ub({type:n,selectors:[["ngx-dropzone-remove-badge"]],decls:3,vars:0,consts:[["x1","0","y1","0","x2","10","y2","10"],["x1","0","y1","10","x2","10","y2","0"]],template:function(n,e){1&n&&(d.uc(),d.gc(0,"svg"),d.bc(1,"line",0),d.bc(2,"line",1),d.fc())},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:22px;width:22px;position:absolute;top:5px;right:5px;border-radius:50%;background:#bbb;color:#333;cursor:pointer}[_nghost-%COMP%]:hover{background:#aeaeae}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{height:10px;width:10px}[_nghost-%COMP%] > svg[_ngcontent-%COMP%] > line[_ngcontent-%COMP%]{stroke-width:2px;stroke:#fff}"]}),n}(),k=function(){var n=function(n){Object(i.a)(t,n);var e=Object(o.a)(t);function t(n){return Object(r.a)(this,t),e.call(this,n)}return Object(c.a)(t,[{key:"ngOnInit",value:function(){this.file?(this.videoSrc=URL.createObjectURL(this.file),this.sanitizedVideoSrc=this.sanitizer.bypassSecurityTrustUrl(this.videoSrc)):console.error("No file to read. Please provide a file using the [file] Input property.")}},{key:"ngOnDestroy",value:function(){URL.revokeObjectURL(this.videoSrc)}}]),t}(P);return n.\u0275fac=function(e){return new(e||n)(d.ac(g.b))},n.\u0275cmp=d.Ub({type:n,selectors:[["ngx-dropzone-video-preview"]],features:[d.Lb([{provide:P,useExisting:n}]),d.Jb],ngContentSelectors:f,decls:3,vars:2,consts:[["controls","",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["controls","",3,"click"],[3,"src"],[3,"click"]],template:function(n,e){1&n&&(d.Bc(p),d.ad(0,C,2,1,"video",0),d.Ac(1),d.ad(2,M,1,0,"ngx-dropzone-remove-badge",1)),2&n&&(d.Cc("ngIf",e.sanitizedVideoSrc),d.Mb(2),d.Cc("ngIf",e.removable))},directives:[l.u,B],styles:["[_nghost-%COMP%]{min-width:unset!important;max-width:unset!important;padding:0!important}[_nghost-%COMP%]:focus   video[_ngcontent-%COMP%], [_nghost-%COMP%]:hover   video[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   video[_ngcontent-%COMP%]{max-height:100%;border-radius:5px}[_nghost-%COMP%]     ngx-dropzone-label{position:absolute;overflow-wrap:break-word}"]}),n}(),T=function(){var n=function n(){Object(r.a)(this,n)};return n.\u0275mod=d.Yb({type:n}),n.\u0275inj=d.Xb({factory:function(e){return new(e||n)},imports:[[l.c]]}),n}()},rYPC:function(n,e,t){"use strict";t.d(e,"a",(function(){return p}));var i,o,s,a,c=t("ALmS"),r=Object(c.gql)(i||(s=['\nmutation createImageLoggingSession(\n  $startTime: String!\n  $submission: String!\n) {\n  createImageLoggingSession(input: {\n    clientMutationId: ""\n    startTime: $startTime\n    submission: $submission\n  }) {\n  id\n  }\n}\n'],a=['\nmutation createImageLoggingSession(\n  $startTime: String!\n  $submission: String!\n) {\n  createImageLoggingSession(input: {\n    clientMutationId: ""\n    startTime: $startTime\n    submission: $submission\n  }) {\n  id\n  }\n}\n'],Object.defineProperty?Object.defineProperty(s,"raw",{value:a}):s.raw=a,i=s)),d=Object(c.gql)(o||(o=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation updateImageLoggingSessionEndTime(\n        $id: ID!\n        $endTime: String!\n    ) {\n        updateImageLoggingSession(input: {\n            id: $id,\n            endTime: $endTime,\n            clientMutationId: ""\n        }) {\n            id\n        }\n    }\n'],['\n    mutation updateImageLoggingSessionEndTime(\n        $id: ID!\n        $endTime: String!\n    ) {\n        updateImageLoggingSession(input: {\n            id: $id,\n            endTime: $endTime,\n            clientMutationId: ""\n        }) {\n            id\n        }\n    }\n']))),u=t("fXoL"),l=t("/IUn"),g=function(n,e,t,i){return new(t||(t=Promise))((function(o,s){function a(n){try{r(i.next(n))}catch(e){s(e)}}function c(n){try{r(i.throw(n))}catch(e){s(e)}}function r(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,c)}r((i=i.apply(n,e||[])).next())}))},m=function(n,e){var t,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(n,a)}catch(c){s=[6,c],i=0}finally{t=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},p=function(){function n(n){this.apollo=n}return n.prototype.create=function(n){return g(this,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return[4,this.apollo.mutate({mutation:r,variables:n}).toPromise()];case 1:return[2,e.sent().data]}}))}))},n.prototype.updateEndTime=function(n){return g(this,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return[4,this.apollo.mutate({mutation:d,variables:n}).toPromise()];case 1:return[2,e.sent().data]}}))}))},n.\u0275fac=function(e){return new(e||n)(u.oc(l.b))},n.\u0275prov=u.Wb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()},uA1o:function(n,e,t){"use strict";t.d(e,"a",(function(){return v}));var i,o,s,a,c,r,d,u=t("ALmS"),l=Object(u.gql)(i||(r=['\n    mutation createSubmissionBatch(\n        $status: String!\n        $partner: String\n        $createdAt: String!\n        $updatedAt: String!\n        $supplier: String\n        $notes: String\n    ) {\n        createSubmissionBatch(input: {\n            clientMutationId: ""\n            status: $status\n            partner: $partner\n            createdAt: $createdAt\n            updatedAt: $updatedAt\n            supplier: $supplier\n            notes: $notes\n        }) {\n            id\n            status {\n                id\n                name\n            }\n            partner {\n                id\n                name\n            }\n            supplier {\n                id\n                company\n            }\n            updatedAt\n            createdAt\n        }\n    }\n'],d=['\n    mutation createSubmissionBatch(\n        $status: String!\n        $partner: String\n        $createdAt: String!\n        $updatedAt: String!\n        $supplier: String\n        $notes: String\n    ) {\n        createSubmissionBatch(input: {\n            clientMutationId: ""\n            status: $status\n            partner: $partner\n            createdAt: $createdAt\n            updatedAt: $updatedAt\n            supplier: $supplier\n            notes: $notes\n        }) {\n            id\n            status {\n                id\n                name\n            }\n            partner {\n                id\n                name\n            }\n            supplier {\n                id\n                company\n            }\n            updatedAt\n            createdAt\n        }\n    }\n'],Object.defineProperty?Object.defineProperty(r,"raw",{value:d}):r.raw=d,i=r)),g=Object(u.gql)(o||(o=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(["\n    query submissionBatchList(\n        $after: String,\n        $partnerComplete: Boolean,\n        $manufacturerComplete: Boolean,\n        $supplierExists: Boolean\n        $order: String,\n        $inProduction: Boolean,\n        $inQualityControl: Boolean,\n    ) {\n        submissionBatches (\n            after: $after,\n            status_partnerComplete: $partnerComplete,\n            status_manufacturerComplete: $manufacturerComplete,\n            status_inProduction: $inProduction,\n            status_inQualityControl: $inQualityControl\n            order: {createdAt: $order}\n            supplier: {exists: $supplierExists},\n        ) {\n            edges  {\n                node {\n                    id\n                    invoice\n                    invoiced\n                    status {\n                        id\n                        name\n                    }\n                    partner {\n                        id\n                        name\n                    }\n                    supplier {\n                        id\n                        company\n                    }\n                    updatedAt\n                    createdAt\n                    dateSent\n                }\n                cursor\n            }\n            pageInfo {\n                hasNextPage\n            }\n        }\n    }\n"],["\n    query submissionBatchList(\n        $after: String,\n        $partnerComplete: Boolean,\n        $manufacturerComplete: Boolean,\n        $supplierExists: Boolean\n        $order: String,\n        $inProduction: Boolean,\n        $inQualityControl: Boolean,\n    ) {\n        submissionBatches (\n            after: $after,\n            status_partnerComplete: $partnerComplete,\n            status_manufacturerComplete: $manufacturerComplete,\n            status_inProduction: $inProduction,\n            status_inQualityControl: $inQualityControl\n            order: {createdAt: $order}\n            supplier: {exists: $supplierExists},\n        ) {\n            edges  {\n                node {\n                    id\n                    invoice\n                    invoiced\n                    status {\n                        id\n                        name\n                    }\n                    partner {\n                        id\n                        name\n                    }\n                    supplier {\n                        id\n                        company\n                    }\n                    updatedAt\n                    createdAt\n                    dateSent\n                }\n                cursor\n            }\n            pageInfo {\n                hasNextPage\n            }\n        }\n    }\n"]))),m=Object(u.gql)(s||(s=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(["\n    query submissionBatchById($id: ID!) {\n        submissionBatch(id: $id) {\n            id\n            status {\n                id\n                name\n                incomingBatched\n            }\n            partner {\n                id\n                name\n            }\n            supplier {\n                id\n                company\n            }\n            dateSent\n            notes\n            createdAt\n            updatedAt\n            invoiced\n            invoice\n            invoiceLabourCost\n            invoiceSilverCost\n            invoice9ctYellowGoldCost\n            invoice9ctRoseGoldCost\n            invoice9ctWhiteGoldCost\n            invoice14ctYellowGoldCost\n            invoice14ctRoseGoldCost\n            invoice14ctWhiteGoldCost\n            invoice18ctYellowGoldCost\n            invoice18ctRoseGoldCost\n            invoice18ctWhiteGoldCost\n            invoicePlatinumCost\n            invoiceDeliveryCost\n        }\n    }\n\n"],["\n    query submissionBatchById($id: ID!) {\n        submissionBatch(id: $id) {\n            id\n            status {\n                id\n                name\n                incomingBatched\n            }\n            partner {\n                id\n                name\n            }\n            supplier {\n                id\n                company\n            }\n            dateSent\n            notes\n            createdAt\n            updatedAt\n            invoiced\n            invoice\n            invoiceLabourCost\n            invoiceSilverCost\n            invoice9ctYellowGoldCost\n            invoice9ctRoseGoldCost\n            invoice9ctWhiteGoldCost\n            invoice14ctYellowGoldCost\n            invoice14ctRoseGoldCost\n            invoice14ctWhiteGoldCost\n            invoice18ctYellowGoldCost\n            invoice18ctRoseGoldCost\n            invoice18ctWhiteGoldCost\n            invoicePlatinumCost\n            invoiceDeliveryCost\n        }\n    }\n\n"]))),p=Object(u.gql)(a||(a=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation updateSubmissionBatch(\n        $id: ID!,\n        $updatedAt: String!,\n        $status: String,\n        $dateSent: String,\n        $invoiced: Boolean,\n        $invoice: String,\n        $invoiceLabourCost: Int,\n        $invoiceDeliveryCost: Int,\n        $invoiceSilverCost: Int,\n        $invoice9ctYellowGoldCost: Int,\n        $invoice9ctRoseGoldCost: Int,\n        $invoice9ctWhiteGoldCost: Int,\n        $invoice14ctYellowGoldCost: Int,\n        $invoice14ctRoseGoldCost: Int,\n        $invoice14ctWhiteGoldCost: Int,\n        $invoice18ctYellowGoldCost: Int,\n        $invoice18ctRoseGoldCost: Int,\n        $invoice18ctWhiteGoldCost: Int,\n        $invoicePlatinumCost: Int\n    ) {\n        updateSubmissionBatch(input: {\n            id: $id,\n            updatedAt: $updatedAt,\n            status: $status,\n            dateSent: $dateSent,\n            invoiced: $invoiced,\n            invoice: $invoice,\n            invoiceLabourCost: $invoiceLabourCost,\n            invoiceDeliveryCost: $invoiceDeliveryCost,\n            invoiceSilverCost: $invoiceSilverCost,\n            invoice9ctYellowGoldCost: $invoice9ctYellowGoldCost,\n            invoice9ctRoseGoldCost: $invoice9ctRoseGoldCost,\n            invoice9ctWhiteGoldCost: $invoice9ctWhiteGoldCost,\n            invoice14ctYellowGoldCost: $invoice14ctYellowGoldCost,\n            invoice14ctRoseGoldCost: $invoice14ctRoseGoldCost,\n            invoice14ctWhiteGoldCost: $invoice14ctWhiteGoldCost,\n            invoice18ctYellowGoldCost: $invoice18ctYellowGoldCost,\n            invoice18ctRoseGoldCost: $invoice18ctRoseGoldCost,\n            invoice18ctWhiteGoldCost: $invoice18ctWhiteGoldCost,\n            invoicePlatinumCost: $invoicePlatinumCost,\n            clientMutationId: "",\n        }) {\n            id\n            dateSent\n            invoiced\n            status {\n                id\n                name\n                incomingBatched\n            }\n            invoice\n            invoiceLabourCost\n            invoiceDeliveryCost\n            invoiceSilverCost\n            invoice9ctYellowGoldCost\n            invoice9ctRoseGoldCost\n            invoice9ctWhiteGoldCost\n            invoice14ctYellowGoldCost\n            invoice14ctRoseGoldCost\n            invoice14ctWhiteGoldCost\n            invoice18ctYellowGoldCost\n            invoice18ctRoseGoldCost\n            invoice18ctWhiteGoldCost\n            invoicePlatinumCost\n        }\n    }\n'],['\n    mutation updateSubmissionBatch(\n        $id: ID!,\n        $updatedAt: String!,\n        $status: String,\n        $dateSent: String,\n        $invoiced: Boolean,\n        $invoice: String,\n        $invoiceLabourCost: Int,\n        $invoiceDeliveryCost: Int,\n        $invoiceSilverCost: Int,\n        $invoice9ctYellowGoldCost: Int,\n        $invoice9ctRoseGoldCost: Int,\n        $invoice9ctWhiteGoldCost: Int,\n        $invoice14ctYellowGoldCost: Int,\n        $invoice14ctRoseGoldCost: Int,\n        $invoice14ctWhiteGoldCost: Int,\n        $invoice18ctYellowGoldCost: Int,\n        $invoice18ctRoseGoldCost: Int,\n        $invoice18ctWhiteGoldCost: Int,\n        $invoicePlatinumCost: Int\n    ) {\n        updateSubmissionBatch(input: {\n            id: $id,\n            updatedAt: $updatedAt,\n            status: $status,\n            dateSent: $dateSent,\n            invoiced: $invoiced,\n            invoice: $invoice,\n            invoiceLabourCost: $invoiceLabourCost,\n            invoiceDeliveryCost: $invoiceDeliveryCost,\n            invoiceSilverCost: $invoiceSilverCost,\n            invoice9ctYellowGoldCost: $invoice9ctYellowGoldCost,\n            invoice9ctRoseGoldCost: $invoice9ctRoseGoldCost,\n            invoice9ctWhiteGoldCost: $invoice9ctWhiteGoldCost,\n            invoice14ctYellowGoldCost: $invoice14ctYellowGoldCost,\n            invoice14ctRoseGoldCost: $invoice14ctRoseGoldCost,\n            invoice14ctWhiteGoldCost: $invoice14ctWhiteGoldCost,\n            invoice18ctYellowGoldCost: $invoice18ctYellowGoldCost,\n            invoice18ctRoseGoldCost: $invoice18ctRoseGoldCost,\n            invoice18ctWhiteGoldCost: $invoice18ctWhiteGoldCost,\n            invoicePlatinumCost: $invoicePlatinumCost,\n            clientMutationId: "",\n        }) {\n            id\n            dateSent\n            invoiced\n            status {\n                id\n                name\n                incomingBatched\n            }\n            invoice\n            invoiceLabourCost\n            invoiceDeliveryCost\n            invoiceSilverCost\n            invoice9ctYellowGoldCost\n            invoice9ctRoseGoldCost\n            invoice9ctWhiteGoldCost\n            invoice14ctYellowGoldCost\n            invoice14ctRoseGoldCost\n            invoice14ctWhiteGoldCost\n            invoice18ctYellowGoldCost\n            invoice18ctRoseGoldCost\n            invoice18ctWhiteGoldCost\n            invoicePlatinumCost\n        }\n    }\n']))),f=Object(u.gql)(c||(c=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation deleteSubmissionBatch($id: ID!) {\n        deleteSubmissionBatch (\n            input: {\n                id: $id,\n                clientMutationId: ""\n            }\n        ) {\n            id\n        }\n    }\n'],['\n    mutation deleteSubmissionBatch($id: ID!) {\n        deleteSubmissionBatch (\n            input: {\n                id: $id,\n                clientMutationId: ""\n            }\n        ) {\n            id\n        }\n    }\n']))),b=t("fXoL"),h=t("/IUn"),v=function(){function n(n){this.apollo=n}return n.prototype.list=function(n,e,t,i,o,s,a){return void 0===n&&(n=null),void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o="DESC"),void 0===s&&(s=null),void 0===a&&(a=null),this.apollo.query({query:g,variables:{after:n,partnerComplete:e,manufacturerComplete:t,supplierExists:i,order:o,inProduction:s,inQualityControl:a},fetchPolicy:"network-only"})},n.prototype.get=function(n){return this.apollo.query({query:m,variables:{id:n}})},n.prototype.create=function(n){return this.apollo.mutate({mutation:l,variables:n})},n.prototype.update=function(n){return this.apollo.mutate({mutation:p,variables:n})},n.prototype.delete=function(n){return this.apollo.mutate({mutation:f,variables:{id:n}})},n.\u0275fac=function(e){return new(e||n)(b.oc(h.b))},n.\u0275prov=b.Wb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()},uzfv:function(n,e,t){"use strict";t.d(e,"a",(function(){return s}));var i=t("QAmw"),o=t("fXoL"),s=function(){function n(){}return n.prototype.flattenObject=function(n,e){n=JSON.parse(JSON.stringify(n));var t={};for(var i in n)if(n.hasOwnProperty(i))if("object"==typeof n[i]){var o=this.flattenObject(n[i],e).data;for(var s in 0===Object.entries(o).length&&o.constructor===Object&&(o[i]=""),o)if(o.hasOwnProperty(s)){var a=i+"."+s,c=a.split("."),r=c.length;"__typename"!==a.substr(-10)&&(".id"===a.substr(-3)||(c[r-1]===c[r-2]?a=c[r-1]:"name"===c[r-1]?a=c[r-2]:c.length>1&&-1===c[r-2].indexOf("stones_")&&(a=c[r-1])),-1===e.indexOf(a)&&"stoneSize"!==a&&"stoneType"!==a&&e.push(a),t[a]=o[s])}}else{if("__typename"===i||"selected"===i)continue;-1===e.indexOf(i)&&"name"!==i&&"number"!==i&&e.push(i),"id"===i&&(n[i]=n[i].replace(/\D/g,"")),t[i]=n[i]}return{data:t,headers:e}},n.prototype.whiteListColumns=function(n,e){for(var t=0,i=e;t<i.length;t++)for(var o=i[t],s=0,a=Object.keys(o);s<a.length;s++){var c=a[s];n.includes(c)||delete o[c]}},n.prototype.renameColumns=function(n,e){for(var t=0,i=e;t<i.length;t++)for(var o=i[t],s=0,a=Object.keys(n);s<a.length;s++){var c=a[s];void 0!==o[c]&&(o[n[c]]=o[c],delete o[c])}},n.prototype.addStaticValues=function(n,e){for(var t=0,i=e;t<i.length;t++)for(var o=i[t],s=0,a=Object.keys(n);s<a.length;s++){var c=a[s];o[c]=n[c]}},n.prototype.exportToCsv=function(n,e,t){new i.ngxCsv(t,n,{showLabels:!0,headers:e})},n.\u0275prov=o.Wb({token:n,factory:n.\u0275fac=function(e){return new(e||n)},providedIn:"root"}),n}()}}]);