(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"+izf":function(n,e,t){},"/wnf":function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));var i=t("fXoL"),s=t("ofXK");function c(n,e){if(1&n){var t=i.hc();i.gc(0,"button",2),i.rc("click",(function(){return i.Pc(t),i.vc().showConfirmAction()})),i.bc(1,"span",3),i.fc()}if(2&n){var s=i.vc();i.Cc("disabled",s.state.disabled)}}function o(n,e){if(1&n){var t=i.hc();i.gc(0,"button",4),i.rc("click",(function(){return i.Pc(t),i.vc().confirmed()})),i.bc(1,"span",3),i.fc()}}var a=function(){function n(){this.state={confirming:!1,disabled:!1},this.confirmedAction=new i.q}return Object.defineProperty(n.prototype,"disabledState",{set:function(n){this.state.disabled=n},enumerable:!1,configurable:!0}),n.prototype.confirmed=function(){this.state.confirming=!1,this.confirmedAction.emit()},n.prototype.showConfirmAction=function(){var n=this;this.state.confirming=!0,setTimeout((function(){n.state.confirming=!1}),3e3)},n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=i.Ub({type:n,selectors:[["confirm-delete-no-modal"]],inputs:{disabledState:"disabledState"},outputs:{confirmedAction:"confirmedAction"},decls:2,vars:2,consts:[["class","small-button btn-outline-danger round",3,"disabled","click",4,"ngIf"],["class","small-button btn-outline-warning round",3,"click",4,"ngIf"],[1,"small-button","btn-outline-danger","round",3,"disabled","click"],[1,"fa","fa-trash-alt"],[1,"small-button","btn-outline-warning","round",3,"click"]],template:function(n,e){1&n&&(i.bd(0,c,2,1,"button",0),i.bd(1,o,2,0,"button",1)),2&n&&(i.Cc("ngIf",!e.state.confirming),i.Mb(1),i.Cc("ngIf",e.state.confirming))},directives:[s.u],encapsulation:2}),n}()},"9WpQ":function(n,e,t){"use strict";t.d(e,"a",(function(){return s}));var i=t("fXoL"),s=function(){function n(){}return n.prototype.transform=function(n,e){if(!n)return"";var t=e.length>0?parseInt(e[0],10):20,i=e.length>1?e[1]:"...";return n.length>t?n.substring(0,t)+i:n},n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=i.Zb({name:"truncate",type:n,pure:!0}),n}()},BaBC:function(n,e,t){"use strict";t.d(e,"a",(function(){return f}));var i,s,c,o,a=t("lTCR"),r=t.n(a),d=r()(i||(c=["\n    query suppliersList (\n        $isManufacturer: Boolean\n    ) {\n        suppliers (\n            isManufacturer: $isManufacturer\n        ) {\n            edges  {\n                node {\n                    id\n                    company\n                    contactName\n                    email\n                    telephone\n                    parent {\n                        id\n                        company\n                    }\n                    isManufacturer\n                }\n            }\n        }\n    }\n"],o=["\n    query suppliersList (\n        $isManufacturer: Boolean\n    ) {\n        suppliers (\n            isManufacturer: $isManufacturer\n        ) {\n            edges  {\n                node {\n                    id\n                    company\n                    contactName\n                    email\n                    telephone\n                    parent {\n                        id\n                        company\n                    }\n                    isManufacturer\n                }\n            }\n        }\n    }\n"],Object.defineProperty?Object.defineProperty(c,"raw",{value:o}):c.raw=o,i=c)),u=r()(s||(s=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation createSupplier(\n        $company: String!\n        $contactName: String!\n        $email: String\n        $telephone: String\n        $address: String\n        $notes: String\n        $isManufacturer: Boolean!\n    ) {\n        createSupplier(input: {\n            clientMutationId: ""\n            company: $company\n            contactName: $contactName\n            email: $email\n            telephone: $telephone\n            address: $address\n            notes: $notes\n            isManufacturer: $isManufacturer\n        }) {\n            id\n        }\n    }\n'],['\n    mutation createSupplier(\n        $company: String!\n        $contactName: String!\n        $email: String\n        $telephone: String\n        $address: String\n        $notes: String\n        $isManufacturer: Boolean!\n    ) {\n        createSupplier(input: {\n            clientMutationId: ""\n            company: $company\n            contactName: $contactName\n            email: $email\n            telephone: $telephone\n            address: $address\n            notes: $notes\n            isManufacturer: $isManufacturer\n        }) {\n            id\n        }\n    }\n']))),l=t("fXoL"),g=t("/IUn"),f=function(){function n(n){this.apollo=n}return n.prototype.list=function(n){return this.apollo.query({variables:{isManufacturer:n},query:d})},n.prototype.create=function(n){return this.apollo.mutate({mutation:u,variables:n})},n.\u0275fac=function(e){return new(e||n)(l.oc(g.b))},n.\u0275prov=l.Wb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()},D2Fp:function(n,e,t){"use strict";t.d(e,"a",(function(){return s}));var i=t("fXoL"),s=function(){function n(){this._value="\xa3"}return Object.defineProperty(n.prototype,"value",{set:function(n){this._value=n},enumerable:!1,configurable:!0}),n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=i.Ub({type:n,selectors:[["input-append"]],inputs:{value:"value"},decls:3,vars:1,consts:[[1,"input-group-append"],[1,"input-group-text"]],template:function(n,e){1&n&&(i.gc(0,"div",0),i.gc(1,"div",1),i.dd(2),i.fc(),i.fc()),2&n&&(i.Mb(2),i.ed(e._value))},encapsulation:2}),n}()},DwNB:function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));var i=t("fXoL"),s=t("ofXK");function c(n,e){if(1&n&&(i.gc(0,"div",1),i.gc(1,"b"),i.dd(2),i.fc(),i.fc()),2&n){var t=i.vc();i.Cc("ngClass","alert-"+t._alertType),i.Mb(2),i.ed(t._text)}}var o=function(){function n(){}return Object.defineProperty(n.prototype,"alertType",{set:function(n){this._alertType=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"text",{set:function(n){this._text=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"display",{set:function(n){this._display=n},enumerable:!1,configurable:!0}),n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=i.Ub({type:n,selectors:[["modal-alert"]],inputs:{alertType:"alertType",text:"text",display:"display"},decls:1,vars:1,consts:[["class","modal-alert",3,"ngClass",4,"ngIf"],[1,"modal-alert",3,"ngClass"]],template:function(n,e){1&n&&i.bd(0,c,3,2,"div",0),2&n&&i.Cc("ngIf",e._display)},directives:[s.u,s.r],encapsulation:2}),n}()},JEAg:function(n,e,t){"use strict";t.d(e,"a",(function(){return r}));var i=t("fXoL"),s=t("1kSV"),c=t("Lpkd"),o=t("XXSO");function a(n,e){if(1&n){var t=i.hc();i.gc(0,"div",2),i.gc(1,"div",3),i.gc(2,"div",4),i.gc(3,"h5",5),i.dd(4,"Submission "),i.gc(5,"a",6),i.wc(6,"numericId"),i.dd(7),i.wc(8,"numericId"),i.fc(),i.fc(),i.fc(),i.gc(9,"div",7),i.gc(10,"a",8),i.rc("click",(function(){return i.Pc(t),i.vc().closeModal()})),i.bc(11,"i",9),i.fc(),i.fc(),i.fc(),i.fc(),i.gc(12,"div",10),i.gc(13,"div",11),i.gc(14,"div",12),i.gc(15,"div",13),i.bc(16,"submission-view-notes",14),i.fc(),i.fc(),i.fc(),i.fc()}if(2&n){var s=i.vc();i.Mb(5),i.Ec("href","/submission/view/",i.xc(6,7,s._submissionId),"",i.Sc),i.Mb(2),i.fd(" #",i.xc(8,9,s._submissionId),""),i.Mb(9),i.Cc("customerNote",s._customerNote)("loadingNotes",s._loadingNotes)("isAdmin",s._isAdmin)("notes",s._notes)("submissionId",s._submissionId)}}var r=function(){function n(n){this.modalService=n,this._notes=[],this._isAdmin=!1,this._showOnHover=!1,this._loadingNotes=!1}return Object.defineProperty(n.prototype,"submissionId",{set:function(n){this._submissionId=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"notes",{set:function(n){this._notes=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAdmin",{set:function(n){this._isAdmin=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"loadingNotes",{set:function(n){this._loadingNotes=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"customerNote",{set:function(n){this._customerNote=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hover",{set:function(n){this._showOnHover=n},enumerable:!1,configurable:!0}),n.prototype.openModal=function(n,e){e.stopPropagation(),this.modalService.open(n,{size:"lg"})},n.prototype.closeModal=function(){this.modalService.dismissAll()},n.\u0275fac=function(e){return new(e||n)(i.ac(s.i))},n.\u0275cmp=i.Ub({type:n,selectors:[["view-submission-comms-modal"]],inputs:{submissionId:"submissionId",notes:"notes",isAdmin:"isAdmin",loadingNotes:"loadingNotes",customerNote:"customerNote",hover:"hover"},decls:3,vars:4,consts:[["type","button",1,"btn","icon-btn-outline","mx-1","far","fa-comment-dots",3,"click"],["modalViewNotes",""],[1,"modal-header","in-portal"],[1,"d-flex","w-100"],[1,"flex-grow-1"],["id","modal-basic-title",1,"modal-title"],["target","_blank",3,"href"],[1,"flex-shrink"],["aria-label","Close",3,"click"],[1,"fas","fa-times","text-right","text-white"],[1,"modal-body"],[1,"row"],[1,"col","main-content","CardlessUI"],[1,"col","Section","mb-5"],[3,"customerNote","loadingNotes","isAdmin","notes","submissionId"]],template:function(n,e){if(1&n){var t=i.hc();i.gc(0,"button",0),i.rc("click",(function(n){i.Pc(t);var s=i.Mc(2);return e.openModal(s,n)})),i.fc(),i.bd(1,a,17,11,"ng-template",null,1,i.cd)}2&n&&i.Sb("hover",e._showOnHover)("text-success",e._customerNote||e._notes.length)},directives:[c.a],pipes:[o.a],encapsulation:2}),n}()},KPdS:function(n,e,t){"use strict";t.d(e,"a",(function(){return d}));var i=t("fXoL"),s=t("ZOsW"),c=t("1QgP"),o=t("3Pt+"),a=t("ofXK");function r(n,e){if(1&n&&(i.gc(0,"ng-option",5),i.dd(1),i.fc()),2&n){var t=e.$implicit;i.Cc("value",t),i.Mb(1),i.ed(t)}}var d=function(){function n(){this.searchEmitter=new i.q}return Object.defineProperty(n.prototype,"searchFields",{set:function(n){this._searchFields=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"setSearch",{set:function(n){this.searchField=n.searchField,this.searchQuery=n.searchQuery},enumerable:!1,configurable:!0}),n.prototype.clearSearch=function(){this.searchQuery=null},n.prototype.search=function(){var n=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(e){n.searchEmitter.emit({searchField:n.searchField,searchQuery:n.searchQuery})}),500)},n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=i.Ub({type:n,selectors:[["search"]],inputs:{searchFields:"searchFields",setSearch:"setSearch"},outputs:{searchEmitter:"searchEmitter"},decls:5,vars:5,consts:[["role","group",1,"btn-group","table-search"],["appShowErrorInputClass","","id","searchFieldId","name","searchFieldId","placeholder","-- Please Select --",3,"ngModel","searchable","clearable","ngModelChange","change"],["searchFieldId","ngModel"],[3,"value",4,"ngFor","ngForOf"],["appShowErrorInputClass","","id","searchQuery","name","searchQuery","placeholder","Search","type","search","required","",1,"form-control",3,"ngModel","ngModelChange","keyup"],[3,"value"]],template:function(n,e){1&n&&(i.gc(0,"div",0),i.gc(1,"ng-select",1,2),i.rc("ngModelChange",(function(n){return e.searchField=n}))("change",(function(){return e.search()})),i.bd(3,r,2,2,"ng-option",3),i.fc(),i.gc(4,"input",4),i.rc("ngModelChange",(function(n){return e.searchQuery=n}))("keyup",(function(){return e.search()})),i.fc(),i.fc()),2&n&&(i.Mb(1),i.Cc("ngModel",e.searchField)("searchable",!1)("clearable",!1),i.Mb(2),i.Cc("ngForOf",e._searchFields),i.Mb(1),i.Cc("ngModel",e.searchQuery))},directives:[s.a,c.a,o.k,o.n,a.t,o.d,o.u,s.n],encapsulation:2}),n}()},KWY1:function(n,e,t){"use strict";t.d(e,"a",(function(){return s}));var i=t("fXoL"),s=function(){function n(){}return n.prototype.transform=function(n){return(100*n).toFixed(2)+"%"},n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=i.Zb({name:"percentage",type:n,pure:!0}),n}()},Lpkd:function(n,e,t){"use strict";t.d(e,"a",(function(){return h}));var i=t("Vf4f"),s=t("fXoL"),c=t("ofXK"),o=t("3Pt+"),a=t("wOBz");function r(n,e){if(1&n&&(s.gc(0,"div",12),s.gc(1,"div",13),s.bc(2,"div",14),s.fc(),s.gc(3,"div",15),s.gc(4,"h6"),s.dd(5,"Customer Note"),s.fc(),s.gc(6,"pre",16),s.dd(7),s.fc(),s.fc(),s.fc()),2&n){var t=s.vc();s.Mb(7),s.ed(t._customerNote)}}function d(n,e){1&n&&(s.gc(0,"span",25),s.dd(1,"Sent to Customer"),s.fc())}function u(n,e){1&n&&(s.gc(0,"span",26),s.dd(1,"Private"),s.fc())}function l(n,e){if(1&n&&(s.gc(0,"div",18),s.gc(1,"div",13),s.bc(2,"div",19),s.fc(),s.gc(3,"div",20),s.gc(4,"h6"),s.dd(5),s.fc(),s.gc(6,"p",21),s.dd(7),s.wc(8,"date"),s.fc(),s.gc(9,"pre"),s.dd(10),s.fc(),s.gc(11,"div",22),s.bd(12,d,2,0,"span",23),s.bd(13,u,2,0,"span",24),s.fc(),s.fc(),s.fc()),2&n){var t=e.$implicit;s.Mb(2),s.Sb("admin",t.node.isAdmin)("supplier",t.node.isSupplier)("partner",t.node.isPartner),s.Mb(3),s.gd("",t.node.addedBy," added a",t.node.adminOnly?" private":""," note"),s.Mb(2),s.ed(s.yc(8,12,t.node.createdAt,"medium")),s.Mb(3),s.ed(t.node.note),s.Mb(2),s.Cc("ngIf",t.node.emailToCustomer),s.Mb(1),s.Cc("ngIf",t.node.adminOnly)}}function g(n,e){if(1&n&&(s.ec(0),s.bd(1,l,14,15,"div",17),s.dc()),2&n){var t=s.vc();s.Mb(1),s.Cc("ngForOf",t._notes)}}function f(n,e){1&n&&(s.ec(0),s.gc(1,"div",27),s.bc(2,"loading-ring",28),s.fc(),s.dc())}function b(n,e){if(1&n){var t=s.hc();s.gc(0,"div",1),s.gc(1,"div",29),s.gc(2,"input",30),s.rc("ngModelChange",(function(n){return s.Pc(t),s.vc().adminOnly=n})),s.fc(),s.gc(3,"label",31),s.dd(4,"Admin Only"),s.fc(),s.fc(),s.gc(5,"div",29),s.gc(6,"input",32),s.rc("ngModelChange",(function(n){return s.Pc(t),s.vc().emailToCustomer=n})),s.fc(),s.gc(7,"label",33),s.dd(8,"Email Note to Customer"),s.fc(),s.fc(),s.fc()}if(2&n){var i=s.vc();s.Mb(2),s.Cc("ngModel",i.adminOnly),s.Mb(4),s.Cc("ngModel",i.emailToCustomer)}}function m(n,e){1&n&&(s.gc(0,"span"),s.dd(1,"Add Note"),s.fc())}function p(n,e){1&n&&s.bc(0,"span",34)}var h=function(){function n(n){this.submissionNoteService=n,this._isAdmin=!1,this._loadingNotes=!1,this._isSupplier=!1,this.adminOnly=!1,this.emailToCustomer=!1,this.newNote=null,this.submitting=!1}return Object.defineProperty(n.prototype,"customerNote",{set:function(n){this._customerNote=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAdmin",{set:function(n){this._isAdmin=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"loadingNotes",{set:function(n){this._loadingNotes=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"notes",{set:function(n){this._notes=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"submissionId",{set:function(n){this._submissionId=n},enumerable:!1,configurable:!0}),n.prototype.addNote=function(){var n=this;this.submitting=!0;var e=(new Date).toISOString();this.submissionNoteService.create({submissionId:this._submissionId,note:this.newNote,adminOnly:this.adminOnly,emailToCustomer:this.emailToCustomer,createdAt:e,updatedAt:e}).subscribe((function(e){n._notes.push({node:{id:e.data.createSubmissionNote.id,note:e.data.createSubmissionNote.note,adminOnly:e.data.createSubmissionNote.adminOnly,addedBy:e.data.createSubmissionNote.addedBy,emailToCustomer:e.data.createSubmissionNote.emailToCustomer,createdAt:e.data.createSubmissionNote.createdAt,updatedAt:e.data.createSubmissionNote.createdAt,isAdmin:e.data.createSubmissionNote.isAdmin,isSupplier:e.data.createSubmissionNote.isSupplier,isPartner:e.data.createSubmissionNote.isPartner}}),n.adminOnly=!1,n.emailToCustomer=!1,n.newNote="",n.submitting=!1}))},n.\u0275fac=function(e){return new(e||n)(s.ac(i.a))},n.\u0275cmp=s.Ub({type:n,selectors:[["submission-view-notes"]],inputs:{customerNote:"customerNote",isAdmin:"isAdmin",loadingNotes:"loadingNotes",notes:"notes",submissionId:"submissionId"},decls:18,vars:8,consts:[[1,"row","py-3","box-divider-bottom","justify-content-start","mb-4"],[1,"col"],[1,"mb-2"],["class","row NoteBlock NoteBlock-Customer",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col","px-0"],[1,"form-group"],["id","newSubmissionNote","maxlength","1023","name","newSubmissionNote","placeholder","Write your submission note here",1,"form-control",3,"ngModel","ngModelChange"],["class","col",4,"ngIf"],["type","button",1,"btn","btn-secondary","float-right","fas",3,"disabled","click"],["aria-hidden","true","class","spinner-border spinner-border-sm","role","status",4,"ngIf"],[1,"row","NoteBlock","NoteBlock-Customer"],[1,"col-auto","profile"],[1,"user-pic","customer"],[1,"col","flex-grow-1"],[1,"submissionNote"],["class","row NoteBlock",4,"ngFor","ngForOf"],[1,"row","NoteBlock"],[1,"user-pic"],[1,"col","note-column","flex-grow-1"],[1,"text-muted","mb-0"],[1,"pills"],["class","pill note-emailed",4,"ngIf"],["class","pill note-private",4,"ngIf"],[1,"pill","note-emailed"],[1,"pill","note-private"],[1,"row","py-4"],["size","30"],[1,"checkbox-wrapper","with-label"],["id","adminOnlyCheckbox","name","adminOnlyCheckbox","type","checkbox",3,"ngModel","ngModelChange"],["for","adminOnlyCheckbox"],["id","emailToCustomerCheckbox","name","emailToCustomerCheckbox","type","checkbox",3,"ngModel","ngModelChange"],["for","emailToCustomerCheckbox"],["aria-hidden","true","role","status",1,"spinner-border","spinner-border-sm"]],template:function(n,e){1&n&&(s.gc(0,"div",0),s.gc(1,"div",1),s.gc(2,"h5",2),s.dd(3,"Submission Notes"),s.fc(),s.fc(),s.fc(),s.bd(4,r,8,1,"div",3),s.bd(5,g,2,1,"ng-container",4),s.bd(6,f,3,0,"ng-container",4),s.gc(7,"div",5),s.gc(8,"div",6),s.gc(9,"div",7),s.gc(10,"textarea",8),s.rc("ngModelChange",(function(n){return e.newNote=n})),s.dd(11,"            "),s.fc(),s.fc(),s.fc(),s.fc(),s.gc(12,"div",5),s.bd(13,b,9,2,"div",9),s.gc(14,"div",1),s.gc(15,"button",10),s.rc("click",(function(){return e.addNote()})),s.bd(16,m,2,0,"span",4),s.bd(17,p,1,0,"span",11),s.fc(),s.fc(),s.fc()),2&n&&(s.Mb(4),s.Cc("ngIf",e._customerNote),s.Mb(1),s.Cc("ngIf",e._notes.length&&!e._loadingNotes),s.Mb(1),s.Cc("ngIf",e._loadingNotes),s.Mb(4),s.Cc("ngModel",e.newNote),s.Mb(3),s.Cc("ngIf",e._isAdmin),s.Mb(2),s.Cc("disabled",e.submitting),s.Mb(1),s.Cc("ngIf",!e.submitting),s.Mb(1),s.Cc("ngIf",e.submitting))},directives:[c.u,o.d,o.g,o.k,o.n,c.t,a.a,o.a],pipes:[c.f],styles:[""]}),n}()},QVjv:function(n,e,t){"use strict";t.d(e,"a",(function(){return M}));var i,s,c,o,a,r,d,u,l=t("lTCR"),g=t.n(l),f=g()(i||(d=["\n    query jobList(\n        $after: String\n        $complete: Boolean\n        $inProduction: Boolean\n        $jobId: Int\n        $submissionId: Int\n        $customerName: String\n        $eventName: String\n        $castingCode: String\n        $incomingBatch: String\n        $outgoingBatch: String\n        $incomingBatched: Boolean\n        $onHold: Boolean\n        $dueOrder: String\n    ) {\n        jobs (\n            after: $after\n            complete: $complete\n            status_inProduction: $inProduction\n            id: $jobId\n            submission_id: $submissionId\n            submission_customer_fullName: $customerName\n            submission_customer_event_name: $eventName\n            submission_castingCode: $castingCode\n            incomingBatch: $incomingBatch\n            outgoingBatch: $outgoingBatch\n            status_incomingBatched: $incomingBatched\n            onHold: $onHold\n            order: {due: $dueOrder},\n        ) {\n            totalCount\n            edges  {\n                node {\n                    id\n                    submission {\n                        id\n                        customer {\n                            id\n                            fullName\n                            address1\n                            address2\n                            city\n                            county\n                            country\n                            postcode\n                            phone\n                            email\n                            event {\n                                id\n                                name\n                            }\n                        }\n                        status {\n                            id\n                            name\n                        }\n                        kitType {\n                            id\n                            name\n                        }\n                        batch {\n                            id\n                        }\n                        waxWeight\n                        metalWeight\n                        baseMetal {\n                            id\n                            name\n                        }\n                        plating {\n                            id\n                            name\n                        }\n                        finish {\n                            id\n                            name\n                        }\n                        castingCode\n                        kit {\n                            id\n                            regCode\n                        }\n                        ringThickness {\n                            id\n                            name\n                        }\n                        ringResize\n                        originalRingSize {\n                            id\n                            name\n                        }\n                        ringSizeCustom {\n                            id\n                            name\n                        }\n                        jumpRing\n                        jumpRingPlacement\n                        chainType {\n                            id\n                            name\n                        }\n                        chainLength {\n                            id\n                            name\n                        }\n                        chainPlating {\n                            id\n                            name\n                        }\n                        earringConfig {\n                            id\n                            name\n                        }\n                        engravingFont\n                        engravingText\n                        stoneDescription\n                        customerNotes\n                        totalPrice\n                        submittedAt\n                        hardDeadline\n                        submissionPhotos {\n                            edges {\n                                node {\n                                    id\n                                    objectName\n                                    exifDate\n                                    signedDownloadUrl\n                                    signedMidsizeDownloadUrl\n                                    signedThumbnailDownloadUrl\n                                }\n                            }\n                        }\n                    }\n                    manufacturer {\n                        id\n                        company\n                    }\n                    currentlyWith {\n                        id\n                        company\n                    }\n                    status {\n                        id\n                        name\n                    }\n                    complete\n                    due\n                    rush\n                    onHold\n                    outgoingBatch {\n                        id\n                    }\n                    incomingBatch {\n                        id\n                    }\n                }\n                cursor\n            }\n            pageInfo {\n                endCursor\n                hasNextPage\n            }\n        }\n    }\n"],u=["\n    query jobList(\n        $after: String\n        $complete: Boolean\n        $inProduction: Boolean\n        $jobId: Int\n        $submissionId: Int\n        $customerName: String\n        $eventName: String\n        $castingCode: String\n        $incomingBatch: String\n        $outgoingBatch: String\n        $incomingBatched: Boolean\n        $onHold: Boolean\n        $dueOrder: String\n    ) {\n        jobs (\n            after: $after\n            complete: $complete\n            status_inProduction: $inProduction\n            id: $jobId\n            submission_id: $submissionId\n            submission_customer_fullName: $customerName\n            submission_customer_event_name: $eventName\n            submission_castingCode: $castingCode\n            incomingBatch: $incomingBatch\n            outgoingBatch: $outgoingBatch\n            status_incomingBatched: $incomingBatched\n            onHold: $onHold\n            order: {due: $dueOrder},\n        ) {\n            totalCount\n            edges  {\n                node {\n                    id\n                    submission {\n                        id\n                        customer {\n                            id\n                            fullName\n                            address1\n                            address2\n                            city\n                            county\n                            country\n                            postcode\n                            phone\n                            email\n                            event {\n                                id\n                                name\n                            }\n                        }\n                        status {\n                            id\n                            name\n                        }\n                        kitType {\n                            id\n                            name\n                        }\n                        batch {\n                            id\n                        }\n                        waxWeight\n                        metalWeight\n                        baseMetal {\n                            id\n                            name\n                        }\n                        plating {\n                            id\n                            name\n                        }\n                        finish {\n                            id\n                            name\n                        }\n                        castingCode\n                        kit {\n                            id\n                            regCode\n                        }\n                        ringThickness {\n                            id\n                            name\n                        }\n                        ringResize\n                        originalRingSize {\n                            id\n                            name\n                        }\n                        ringSizeCustom {\n                            id\n                            name\n                        }\n                        jumpRing\n                        jumpRingPlacement\n                        chainType {\n                            id\n                            name\n                        }\n                        chainLength {\n                            id\n                            name\n                        }\n                        chainPlating {\n                            id\n                            name\n                        }\n                        earringConfig {\n                            id\n                            name\n                        }\n                        engravingFont\n                        engravingText\n                        stoneDescription\n                        customerNotes\n                        totalPrice\n                        submittedAt\n                        hardDeadline\n                        submissionPhotos {\n                            edges {\n                                node {\n                                    id\n                                    objectName\n                                    exifDate\n                                    signedDownloadUrl\n                                    signedMidsizeDownloadUrl\n                                    signedThumbnailDownloadUrl\n                                }\n                            }\n                        }\n                    }\n                    manufacturer {\n                        id\n                        company\n                    }\n                    currentlyWith {\n                        id\n                        company\n                    }\n                    status {\n                        id\n                        name\n                    }\n                    complete\n                    due\n                    rush\n                    onHold\n                    outgoingBatch {\n                        id\n                    }\n                    incomingBatch {\n                        id\n                    }\n                }\n                cursor\n            }\n            pageInfo {\n                endCursor\n                hasNextPage\n            }\n        }\n    }\n"],Object.defineProperty?Object.defineProperty(d,"raw",{value:u}):d.raw=u,i=d)),b=g()(s||(s=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation updateJob(\n        $id: ID!,\n        $currentlyWith: String,\n        $due: String,\n        $rush: Boolean,\n        $onHold: Boolean,\n    ) {\n        updateJob(input: {\n            id: $id\n            currentlyWith: $currentlyWith,\n            due: $due,\n            rush: $rush,\n            onHold: $onHold,\n            clientMutationId: "",\n        }) {\n            id\n        }\n    }\n'],['\n    mutation updateJob(\n        $id: ID!,\n        $currentlyWith: String,\n        $due: String,\n        $rush: Boolean,\n        $onHold: Boolean,\n    ) {\n        updateJob(input: {\n            id: $id\n            currentlyWith: $currentlyWith,\n            due: $due,\n            rush: $rush,\n            onHold: $onHold,\n            clientMutationId: "",\n        }) {\n            id\n        }\n    }\n']))),m=g()(c||(c=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation updateOutgoingBatch(\n        $id: ID!,\n        $outgoingBatch: String\n        $status: String\n    ) {\n        updateJob(input: {\n            id: $id,\n            outgoingBatch: $outgoingBatch,\n            status: $status,\n            clientMutationId: "",\n        }) {\n            id\n            submission {\n                id\n            }\n        }\n    }\n'],['\n    mutation updateOutgoingBatch(\n        $id: ID!,\n        $outgoingBatch: String\n        $status: String\n    ) {\n        updateJob(input: {\n            id: $id,\n            outgoingBatch: $outgoingBatch,\n            status: $status,\n            clientMutationId: "",\n        }) {\n            id\n            submission {\n                id\n            }\n        }\n    }\n']))),p=g()(o||(o=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation createJob(\n        $submission: String!,\n        $manufacturer: String!,\n        $status: String!,\n        $outgoingBatch: String,\n        $complete: Boolean!,\n        $rush: Boolean!,\n        $onHold: Boolean!,\n        $due: String,\n        $createdAt: String!,\n    ) {\n        createJob(input: {\n            clientMutationId: ""\n            submission: $submission,\n            manufacturer: $manufacturer,\n            status: $status,\n            outgoingBatch: $outgoingBatch,\n            complete: $complete,\n            rush: $rush,\n            onHold: $onHold,\n            due: $due,\n            createdAt: $createdAt,\n        }) {\n            id\n            submission {\n                id\n            }\n        }\n    }\n'],['\n    mutation createJob(\n        $submission: String!,\n        $manufacturer: String!,\n        $status: String!,\n        $outgoingBatch: String,\n        $complete: Boolean!,\n        $rush: Boolean!,\n        $onHold: Boolean!,\n        $due: String,\n        $createdAt: String!,\n    ) {\n        createJob(input: {\n            clientMutationId: ""\n            submission: $submission,\n            manufacturer: $manufacturer,\n            status: $status,\n            outgoingBatch: $outgoingBatch,\n            complete: $complete,\n            rush: $rush,\n            onHold: $onHold,\n            due: $due,\n            createdAt: $createdAt,\n        }) {\n            id\n            submission {\n                id\n            }\n        }\n    }\n']))),h=g()(a||(a=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(["\n    query jobsByBatch(\n        $first: Int,\n        $outgoingBatch: String,\n        $incomingBatch: String\n    ) {\n        jobs(\n            first: $first,\n            outgoingBatch: $outgoingBatch,\n            incomingBatch: $incomingBatch,\n            \n        ) {\n            edges  {\n                node {\n                    id\n                    complete\n                    rush\n                    due\n                    createdAt\n                    submission {\n                        id\n                        status {\n                            id\n                            name\n                        }\n                        customer {\n                            id\n                            fullName\n                            address1\n                            address2\n                            city\n                            county\n                            postcode\n                            country\n                            email\n                            phone\n                            event {\n                                id\n                                name\n                            }\n                        }\n                        kitType {\n                            id\n                            name\n                        }\n                        castingCode\n                        ringThickness {\n                            id\n                            name\n                        }\n                        ringSize {\n                            id\n                            name\n                        }\n                        ringResize\n                        originalRingSize {\n                            id\n                            name\n                        }\n                        ringSizeCustom {\n                            id\n                            name\n                        }\n                        measuredRingSize {\n                            id\n                            name\n                        }\n                        chainType {\n                            id\n                            name\n                        }\n                        chainLength {\n                            id\n                            name\n                        }\n                        chainPlating {\n                            id\n                            name\n                        }\n                        earringConfig {\n                            id\n                            name\n                        }\n                        engravingFont\n                        engravingText\n                        baseMetal {\n                            id\n                            name\n                        }\n                        baseMetalPaid\n                        baseMetalPrice\n                        plating {\n                            id\n                            name\n                        }\n                        finish {\n                            id\n                            name\n                        }\n                        stoneDescription\n                        upsellAdditionalItem\n                        upsellPlating\n                        upsellEngraving\n                        upsellStoneSetting\n                        upsellBaseMetal\n                        upsellEarring\n                        submittedAt\n                        updatedAt\n                        customerNotes\n                        totalPrice\n                        amountPaid\n                        estimatedLaborCost\n                        estimatedMetalCost\n                        waxWeight\n                        metalWeight\n                        jumpRing\n                        jumpRingPlacement\n                        submissionPhotos {\n                            edges {\n                                node {\n                                    id\n                                    objectName\n                                    exifDate\n                                    signedDownloadUrl\n                                    signedMidsizeDownloadUrl\n                                    signedThumbnailDownloadUrl\n                                }\n                            }\n                        }\n                    }\n                    jobActions {\n                        edges {\n                            node {\n                                id\n                                action {\n                                    id\n                                    name\n                                }\n                                supplier {\n                                    id\n                                    company\n                                }\n                                started\n                                startedAt\n                                completed\n                                completedAt\n                                estimatedLaborCost\n                                estimatedMetalCost\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n"],["\n    query jobsByBatch(\n        $first: Int,\n        $outgoingBatch: String,\n        $incomingBatch: String\n    ) {\n        jobs(\n            first: $first,\n            outgoingBatch: $outgoingBatch,\n            incomingBatch: $incomingBatch,\n            \n        ) {\n            edges  {\n                node {\n                    id\n                    complete\n                    rush\n                    due\n                    createdAt\n                    submission {\n                        id\n                        status {\n                            id\n                            name\n                        }\n                        customer {\n                            id\n                            fullName\n                            address1\n                            address2\n                            city\n                            county\n                            postcode\n                            country\n                            email\n                            phone\n                            event {\n                                id\n                                name\n                            }\n                        }\n                        kitType {\n                            id\n                            name\n                        }\n                        castingCode\n                        ringThickness {\n                            id\n                            name\n                        }\n                        ringSize {\n                            id\n                            name\n                        }\n                        ringResize\n                        originalRingSize {\n                            id\n                            name\n                        }\n                        ringSizeCustom {\n                            id\n                            name\n                        }\n                        measuredRingSize {\n                            id\n                            name\n                        }\n                        chainType {\n                            id\n                            name\n                        }\n                        chainLength {\n                            id\n                            name\n                        }\n                        chainPlating {\n                            id\n                            name\n                        }\n                        earringConfig {\n                            id\n                            name\n                        }\n                        engravingFont\n                        engravingText\n                        baseMetal {\n                            id\n                            name\n                        }\n                        baseMetalPaid\n                        baseMetalPrice\n                        plating {\n                            id\n                            name\n                        }\n                        finish {\n                            id\n                            name\n                        }\n                        stoneDescription\n                        upsellAdditionalItem\n                        upsellPlating\n                        upsellEngraving\n                        upsellStoneSetting\n                        upsellBaseMetal\n                        upsellEarring\n                        submittedAt\n                        updatedAt\n                        customerNotes\n                        totalPrice\n                        amountPaid\n                        estimatedLaborCost\n                        estimatedMetalCost\n                        waxWeight\n                        metalWeight\n                        jumpRing\n                        jumpRingPlacement\n                        submissionPhotos {\n                            edges {\n                                node {\n                                    id\n                                    objectName\n                                    exifDate\n                                    signedDownloadUrl\n                                    signedMidsizeDownloadUrl\n                                    signedThumbnailDownloadUrl\n                                }\n                            }\n                        }\n                    }\n                    jobActions {\n                        edges {\n                            node {\n                                id\n                                action {\n                                    id\n                                    name\n                                }\n                                supplier {\n                                    id\n                                    company\n                                }\n                                started\n                                startedAt\n                                completed\n                                completedAt\n                                estimatedLaborCost\n                                estimatedMetalCost\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n"]))),v=g()(r||(r=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation updateIncomingBatch(\n        $id: ID!,\n        $incomingBatch: String,\n        $status: String,\n        \n    ) {\n        updateJob(input: {\n            id: $id,\n            incomingBatch: $incomingBatch,\n            status: $status,\n            clientMutationId: "",\n        }) {\n            id\n            submission {\n                id\n            }\n        }\n    }\n'],['\n    mutation updateIncomingBatch(\n        $id: ID!,\n        $incomingBatch: String,\n        $status: String,\n        \n    ) {\n        updateJob(input: {\n            id: $id,\n            incomingBatch: $incomingBatch,\n            status: $status,\n            clientMutationId: "",\n        }) {\n            id\n            submission {\n                id\n            }\n        }\n    }\n']))),y=t("fXoL"),C=t("/IUn"),M=function(){function n(n){this.apollo=n}return n.prototype.create=function(n){return this.apollo.mutate({mutation:p,variables:n})},n.prototype.list=function(n,e,t,i,s,c,o,a,r,d,u,l,g){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i=null),void 0===s&&(s=null),void 0===c&&(c=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===r&&(r=null),void 0===d&&(d=null),void 0===u&&(u=null),void 0===l&&(l=null),void 0===g&&(g="ASC"),this.apollo.watchQuery({query:f,fetchPolicy:"network-only",variables:{after:t,complete:n,inProduction:e,jobId:i,submissionId:s,customerName:c,eventName:o,castingCode:a,incomingBatch:r,outgoingBatch:d,incomingBatched:u,onHold:l,dueOrder:g}}).valueChanges},n.prototype.listByOutgoingBatch=function(n,e){return this.apollo.query({query:h,variables:{first:e,outgoingBatch:n},fetchPolicy:"network-only"})},n.prototype.listByIncomingBatch=function(n,e){return this.apollo.query({query:h,variables:{first:e,incomingBatch:n},fetchPolicy:"network-only"})},n.prototype.update=function(n){return this.apollo.mutate({mutation:b,variables:n})},n.prototype.updateOutgoingBatch=function(n){return this.apollo.mutate({mutation:m,variables:n})},n.prototype.updateIncomingBatch=function(n){return this.apollo.mutate({mutation:v,variables:n})},n.\u0275fac=function(e){return new(e||n)(y.oc(C.b))},n.\u0275prov=y.Wb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()},Vf4f:function(n,e,t){"use strict";t.d(e,"a",(function(){return b}));var i,s,c,o,a=t("lTCR"),r=t.n(a),d=r()(i||(c=['\n    mutation createSubmissionNote(\n        $submissionId: String!,\n        $note: String!,\n        $adminOnly: Boolean!,\n        $updatedAt: String!,\n        $createdAt: String!,\n        $emailToCustomer: Boolean!,\n    ) {\n        createSubmissionNote(input: {\n            clientMutationId: ""\n            submission: $submissionId,\n            note: $note,\n            adminOnly: $adminOnly,\n            updatedAt: $updatedAt,\n            createdAt: $createdAt,\n            emailToCustomer: $emailToCustomer,\n        }) {\n            id\n            note\n            addedBy\n            adminOnly\n            emailToCustomer\n            createdAt\n            isAdmin\n            isPartner\n            isSupplier\n        }\n    }\n'],o=['\n    mutation createSubmissionNote(\n        $submissionId: String!,\n        $note: String!,\n        $adminOnly: Boolean!,\n        $updatedAt: String!,\n        $createdAt: String!,\n        $emailToCustomer: Boolean!,\n    ) {\n        createSubmissionNote(input: {\n            clientMutationId: ""\n            submission: $submissionId,\n            note: $note,\n            adminOnly: $adminOnly,\n            updatedAt: $updatedAt,\n            createdAt: $createdAt,\n            emailToCustomer: $emailToCustomer,\n        }) {\n            id\n            note\n            addedBy\n            adminOnly\n            emailToCustomer\n            createdAt\n            isAdmin\n            isPartner\n            isSupplier\n        }\n    }\n'],Object.defineProperty?Object.defineProperty(c,"raw",{value:o}):c.raw=o,i=c)),u=t("EY2u"),l=r()(s||(s=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(["\n    query submissionNotesBySubmissions($submissions: [String]) {\n        submissionNotes(submission_list: $submissions) {\n            edges  {\n                node {\n                    id\n                    note\n                    adminOnly\n                    addedBy\n                    emailToCustomer\n                    createdAt\n                    updatedAt\n                    isAdmin\n                    isPartner\n                    isSupplier\n                    submission {\n                        id\n                    }\n                }\n            }\n        }\n    }\n\n"],["\n    query submissionNotesBySubmissions($submissions: [String]) {\n        submissionNotes(submission_list: $submissions) {\n            edges  {\n                node {\n                    id\n                    note\n                    adminOnly\n                    addedBy\n                    emailToCustomer\n                    createdAt\n                    updatedAt\n                    isAdmin\n                    isPartner\n                    isSupplier\n                    submission {\n                        id\n                    }\n                }\n            }\n        }\n    }\n\n"]))),g=t("fXoL"),f=t("/IUn"),b=function(){function n(n){this.apollo=n}return n.prototype.listBySubmission=function(n){return n.length?this.apollo.query({query:l,variables:{submissions:n}}):u.a},n.prototype.create=function(n){return this.apollo.mutate({mutation:d,variables:n})},n.\u0275fac=function(e){return new(e||n)(g.oc(f.b))},n.\u0275prov=g.Wb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()},XhFI:function(n,e,t){"use strict";t.d(e,"a",(function(){return w}));var i=t("fXoL"),s=t("1kSV"),c=t("ofXK"),o=t("aX/C"),a=t("o973"),r=t("jmmt"),d=t("b44C"),u=t("iUZM"),l=t("XXSO"),g=t("SjCM"),f=t("9tk/");function b(n,e){if(1&n){var t=i.hc();i.gc(0,"a",3),i.rc("click",(function(n){i.Pc(t);var e=i.vc(),s=i.Mc(3);return e.openModal(s,n)})),i.bc(1,"span",4),i.fc()}}function m(n,e){if(1&n){var t=i.hc();i.gc(0,"button",5),i.rc("click",(function(n){i.Pc(t);var e=i.vc(),s=i.Mc(3);return e.openModal(s,n)})),i.fc()}}function p(n,e){if(1&n&&(i.gc(0,"div",30),i.gc(1,"p",31),i.dd(2,"Date Submitted"),i.fc(),i.gc(3,"p",32),i.dd(4),i.wc(5,"simpleDateTime"),i.fc(),i.fc()),2&n){var t=i.vc(3);i.Mb(4),i.ed(i.xc(5,1,t._submission.submittedAt))}}function h(n,e){if(1&n&&(i.gc(0,"div",33),i.gc(1,"p",31),i.dd(2,"Date Received"),i.fc(),i.gc(3,"p",32),i.dd(4),i.wc(5,"simpleDateTime"),i.fc(),i.fc()),2&n){var t=i.vc(3);i.Mb(3),i.Sb("text-danger",!t._submission.dateReceived),i.Mb(1),i.fd(" ",t._submission.dateReceived?i.xc(5,3,t._submission.dateReceived):"Not yet received"," ")}}function v(n,e){if(1&n&&(i.gc(0,"div",35),i.gc(1,"p",31),i.dd(2,"Casting Type"),i.fc(),i.gc(3,"p",32),i.dd(4),i.wc(5,"titlecase"),i.fc(),i.fc()),2&n){var t=i.vc(4);i.Mb(4),i.fd(" ",i.xc(5,1,t._submission.castingType.name)," ")}}function y(n,e){if(1&n&&(i.ec(0),i.gc(1,"div",33),i.gc(2,"p",31),i.dd(3,"Kit Details"),i.fc(),i.gc(4,"p",32),i.dd(5),i.fc(),i.fc(),i.gc(6,"div",33),i.gc(7,"p",31),i.dd(8,"Casting Code"),i.fc(),i.gc(9,"p",32),i.dd(10),i.wc(11,"uppercase"),i.fc(),i.fc(),i.bd(12,v,6,3,"div",34),i.dc()),2&n){var t=i.vc(3);i.Mb(5),i.ed(t._submission.kit?t._submission.kit.regCode:"No Kit"),i.Mb(5),i.fd(" ",i.xc(11,3,t._submission.castingCode)," "),i.Mb(2),i.Cc("ngIf",t._submission.castingType)}}function C(n,e){if(1&n&&(i.ec(0),i.gc(1,"div",35),i.gc(2,"p",31),i.dd(3,"Event"),i.fc(),i.gc(4,"p",32),i.dd(5),i.fc(),i.fc(),i.dc()),2&n){var t=i.vc(3);i.Mb(5),i.ed(t._submission.customer.event.name)}}function M(n,e){if(1&n&&(i.gc(0,"div",26),i.gc(1,"div",19),i.gc(2,"div",27),i.bd(3,p,6,3,"div",28),i.bd(4,h,6,5,"div",29),i.bd(5,y,13,5,"ng-container",24),i.bd(6,C,6,1,"ng-container",24),i.fc(),i.fc(),i.fc()),2&n){var t=i.vc(2);i.Mb(3),i.Cc("ngIf",t._submission.submittedAt),i.Mb(1),i.Cc("ngIf",t._submission.castingCode||t._submission.kit),i.Mb(1),i.Cc("ngIf",t._submission.castingCode||t._submission.kit),i.Mb(1),i.Cc("ngIf",t._submission.customer.event)}}function S(n,e){if(1&n&&(i.ec(0),i.gc(1,"div",36),i.bc(2,"submission-view-photos",37),i.fc(),i.dc()),2&n){var t=i.vc(2);i.Mb(2),i.Cc("photos",t._photos)}}function _(n,e){if(1&n&&(i.ec(0),i.gc(1,"div",17),i.bc(2,"submission-view-jobs",38),i.fc(),i.dc()),2&n){var t=i.vc(2);i.Mb(2),i.Cc("jobs",t._submission.jobs.edges)}}function P(n,e){if(1&n&&(i.gc(0,"div",17),i.bc(1,"submission-view-customer",39),i.fc()),2&n){var t=i.vc(2);i.Mb(1),i.Cc("customer",t._submission.customer)("isAdmin",t._isAdmin)}}function k(n,e){if(1&n){var t=i.hc();i.gc(0,"div",6),i.gc(1,"div",7),i.gc(2,"div",8),i.gc(3,"h5",9),i.dd(4,"Submission "),i.gc(5,"a",10),i.wc(6,"numericId"),i.dd(7),i.wc(8,"numericId"),i.fc(),i.fc(),i.fc(),i.gc(9,"div",11),i.gc(10,"a",12),i.rc("click",(function(){return i.Pc(t),i.vc().closeModal()})),i.bc(11,"i",13),i.fc(),i.fc(),i.fc(),i.fc(),i.gc(12,"div",14),i.gc(13,"div",15),i.gc(14,"div",16),i.gc(15,"div",17),i.gc(16,"div",18),i.gc(17,"div",19),i.gc(18,"h6",20),i.dd(19),i.wc(20,"numericId"),i.fc(),i.gc(21,"h4"),i.dd(22),i.gc(23,"span"),i.wc(24,"lowercaseDashes"),i.gc(25,"span"),i.dd(26),i.fc(),i.fc(),i.fc(),i.fc(),i.fc(),i.bd(27,M,7,4,"div",21),i.fc(),i.gc(28,"div",17),i.bc(29,"submission-view-submission",22),i.fc(),i.ec(30),i.gc(31,"div",17),i.bc(32,"submission-view-stones",23),i.fc(),i.dc(),i.bd(33,S,3,1,"ng-container",24),i.bd(34,_,3,1,"ng-container",24),i.bd(35,P,2,2,"div",25),i.fc(),i.fc(),i.fc()}if(2&n){var s=i.vc();i.Mb(5),i.Ec("href","/submission/view/",i.xc(6,24,s._submission.id),"",i.Sc),i.Mb(2),i.fd(" #",i.xc(8,26,s._submission.id),""),i.Mb(12),i.hd(" ",s._submission.customer.event?"Event ":""," ",s._submission.castingCode||s._submission.kit?"Kit ":"","Submission - #",i.xc(20,28,s._submission.id)," "),i.Mb(3),i.fd(" ",s._submission.customer.fullName," "),i.Mb(1),i.Pb("status-pill status-",i.xc(24,30,s._submission.status.name)," ml-2"),i.Mb(3),i.ed(s._submission.status.name),i.Mb(1),i.Cc("ngIf",s._isAdmin),i.Mb(2),i.Cc("castingCode",s._castingCode)("isAdmin",s._isAdmin)("loadingCastingCode",s._loadingCastingCode)("originalCastingCode",s._castingCode)("submission",s._submission)("customerNote",s._submission.customerNotes)("hasStones",s._stones&&s._stones.length>0),i.Mb(3),i.Cc("loadingStones",s._loadingStones)("stoneDescription",s._submission.stoneDescription)("stones",s._stones),i.Mb(1),i.Cc("ngIf",s._photos&&s._photos.length>0),i.Mb(1),i.Cc("ngIf",s._submission.jobs&&s._submission.jobs.edges.length>0),i.Mb(1),i.Cc("ngIf",s._isAdmin)}}var w=function(){function n(n){this.modalService=n,this._isAdmin=!1}return Object.defineProperty(n.prototype,"submission",{set:function(n){this._submission=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"photos",{set:function(n){this._photos=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stones",{set:function(n){this._stones=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"castingCode",{set:function(n){this._castingCode=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"loadingStones",{set:function(n){this._loadingStones=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"loadingCastingCode",{set:function(n){this._loadingCastingCode=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAdmin",{set:function(n){this._isAdmin=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buttonStyle",{set:function(n){this._buttonStyle=n},enumerable:!1,configurable:!0}),n.prototype.openModal=function(n,e){e.stopPropagation(),this.modalService.open(n,{size:"lg"})},n.prototype.closeModal=function(){this.modalService.dismissAll()},n.\u0275fac=function(e){return new(e||n)(i.ac(s.i))},n.\u0275cmp=i.Ub({type:n,selectors:[["view-submission-modal"]],inputs:{submission:"submission",photos:"photos",stones:"stones",castingCode:"castingCode",loadingStones:"loadingStones",loadingCastingCode:"loadingCastingCode",isAdmin:"isAdmin",buttonStyle:"buttonStyle"},decls:4,vars:2,consts:[["class","discreet-button",3,"click",4,"ngIf"],["class","btn icon-btn-outline mx-1 fas fa-search","type","button",3,"click",4,"ngIf"],["modalViewSubmission",""],[1,"discreet-button",3,"click"],[1,"fas","fa-search"],["type","button",1,"btn","icon-btn-outline","mx-1","fas","fa-search",3,"click"],[1,"modal-header","in-portal"],[1,"d-flex","w-100"],[1,"flex-grow-1"],["id","modal-basic-title",1,"modal-title"],["target","_blank",3,"href"],[1,"flex-shrink"],["aria-label","Close",3,"click"],[1,"fas","fa-times","text-right","text-white"],[1,"modal-body"],[1,"row"],[1,"col","main-content","CardlessUI"],[1,"col","Section","mb-5"],[1,"row","py-3","box-divider-bottom","justify-content-start","align-items-start"],[1,"col"],[1,"text-muted","mb-2"],["class","row py-3 justify-content-start",4,"ngIf"],[3,"castingCode","isAdmin","loadingCastingCode","originalCastingCode","submission","customerNote","hasStones"],[3,"loadingStones","stoneDescription","stones"],[4,"ngIf"],["class","col Section mb-5",4,"ngIf"],[1,"row","py-3","justify-content-start"],[1,"row","mx-0","justify-content-start","submission-info"],["class","submission-info-block box-border-right pr-4",4,"ngIf"],["class","submission-info-block box-border-right px-4",4,"ngIf"],[1,"submission-info-block","box-border-right","pr-4"],[1,"label"],[1,"value"],[1,"submission-info-block","box-border-right","px-4"],["class","submission-info-block pl-4",4,"ngIf"],[1,"submission-info-block","pl-4"],["id","submissionPhotos",1,"col","Section","mb-5"],[3,"photos"],[3,"jobs"],[3,"customer","isAdmin"]],template:function(n,e){1&n&&(i.bd(0,b,2,0,"a",0),i.bd(1,m,1,0,"button",1),i.bd(2,k,36,32,"ng-template",null,2,i.cd)),2&n&&(i.Cc("ngIf",!e._buttonStyle),i.Mb(1),i.Cc("ngIf",e._buttonStyle))},directives:[c.u,o.a,a.a,r.a,d.a,u.a],pipes:[l.a,g.a,f.a,c.I,c.G],encapsulation:2}),n}()},YbyT:function(n,e,t){"use strict";t.d(e,"a",(function(){return c}));var i=t("fXoL"),s=t("jhN1"),c=function(){function n(n){this.sanitizer=n}return Object.defineProperty(n.prototype,"queryParams",{set:function(n){for(var e="",t=0,i=n;t<i.length;t++){var s=i[t];s&&(e+=s+" ")}e=e.replace(/[|&;$%@"<>()+,]/g,""),this.url=this.sanitizer.bypassSecurityTrustResourceUrl("https://maps.google.com/maps?q="+e+"&output=embed")},enumerable:!1,configurable:!0}),n.\u0275fac=function(e){return new(e||n)(i.ac(s.b))},n.\u0275cmp=i.Ub({type:n,selectors:[["embedded-map"]],inputs:{queryParams:"queryParams"},decls:1,vars:1,consts:[["frameborder","0","scrolling","no","marginheight","0","marginwidth","0",3,"src"]],template:function(n,e){1&n&&i.bc(0,"iframe",0),2&n&&i.Cc("src",e.url,i.Rc)},styles:["iframe[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}"]}),n}()},"aX/C":function(n,e,t){"use strict";t.d(e,"a",(function(){return jn}));var i=t("zOkP"),s=t("PC64"),c=t("Rmj+"),o=t("UYcP"),a=t("oZ8P"),r=t("S6Vu"),d=t("fXoL"),u=t("5eHb"),l=t("3Pt+"),g=t("ofXK"),f=t("z17N"),b=t("ZOsW"),m=t("1kSV"),p=t("G0jp");function h(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.dd(1),d.wc(2,"simpleDate"),d.gc(3,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc();return e.editing(e.keys.hardDeadline,n)})),d.fc(),d.fc()}if(2&n){var i=d.vc();d.Sb("text-muted",!i._submission.hardDeadline),d.Mb(1),d.fd(" ",i._submission.hardDeadline?d.xc(2,3,i._submission.hardDeadline):"No Hard Deadline"," ")}}function v(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc();return e.editing(e.keys.hardDeadline,n)})),d.bc(2,"label",20),d.gc(3,"input",21),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc()._submission.hardDeadline=n})),d.fc(),d.bc(4,"owl-date-time",22,23),d.fc(),d.gc(6,"div",24),d.gc(7,"button",25),d.rc("click",(function(n){return d.Pc(t),d.vc().stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.Mc(5),s=d.vc();d.Mb(3),d.Cc("ngModel",s._submission.hardDeadline)("owlDateTimeTrigger",i)("owlDateTime",i),d.Mb(1),d.Cc("pickerType","calendar")}}function y(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.dd(1),d.gc(2,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc();return e.editing(e.keys.waxWeight,n)})),d.fc(),d.fc()}if(2&n){var i=d.vc();d.Sb("no",!i._submission.waxWeight),d.Mb(1),d.fd(" ",i._submission.waxWeight?i._submission.waxWeight+"g":"Not yet weighed"," ")}}function C(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc();return e.editing(e.keys.waxWeight,n)})),d.bc(2,"label",26),d.gc(3,"input",27,28),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc()._submission.waxWeight=n})),d.fc(),d.fc(),d.gc(5,"div",24),d.gc(6,"button",25),d.rc("click",(function(n){return d.Pc(t),d.vc().stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.vc();d.Mb(3),d.Cc("ngModel",i._submission.waxWeight)}}function M(n,e){if(1&n&&(d.gc(0,"li"),d.gc(1,"span"),d.dd(2,"Expected Weight"),d.fc(),d.gc(3,"span"),d.dd(4),d.fc(),d.fc()),2&n){var t=d.vc();d.Mb(4),d.ed(t._submission.expectedFinishWeight+"g")}}function S(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.dd(1),d.wc(2,"titlecase"),d.gc(3,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc();return e.editing(e.keys.baseMetal,n,e._submission.baseMetal,e._submissionData.baseMetals)})),d.fc(),d.fc()}if(2&n){var i=d.vc();d.Sb("font-weight-bold",i._submission.baseMetal.name!==i.silverBaseMetalName),d.Mb(1),d.fd(" ",d.xc(2,3,i._submission.baseMetal.name)," ")}}function _(n,e){if(1&n&&(d.gc(0,"ng-option",31),d.dd(1),d.wc(2,"titlecase"),d.fc()),2&n){var t=e.$implicit;d.Cc("value",t.node),d.Mb(1),d.fd(" ",d.xc(2,2,t.node.name)," ")}}function P(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc();return e.editing(e.keys.baseMetal,n,e._submission.baseMetal,e._submissionData.baseMetals)})),d.gc(2,"ng-select",29),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc()._submission.baseMetal=n})),d.bd(3,_,3,4,"ng-option",30),d.fc(),d.fc(),d.gc(4,"div",24),d.gc(5,"button",25),d.rc("click",(function(n){return d.Pc(t),d.vc().stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.vc();d.Mb(2),d.Cc("ngModel",i._submission.baseMetal)("searchable",!1),d.Mb(1),d.Cc("ngForOf",i._submissionData.baseMetals)}}function k(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.dd(1),d.gc(2,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc();return e.editing(e.keys.finish,n,e._submission.finish,e._submissionData.finishes)})),d.fc(),d.fc()}if(2&n){var i=d.vc();d.Mb(1),d.fd(" ",i._submission.finish.name," ")}}function w(n,e){if(1&n&&(d.gc(0,"ng-option",31),d.dd(1),d.wc(2,"titlecase"),d.fc()),2&n){var t=e.$implicit;d.Cc("value",t.node),d.Mb(1),d.fd(" ",d.xc(2,2,t.node.name)," ")}}function I(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc();return e.editing(e.keys.finish,n,e._submission.finish,e._submissionData.finishes)})),d.gc(2,"ng-select",32),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc()._submission.finish=n})),d.bd(3,w,3,4,"ng-option",30),d.fc(),d.fc(),d.gc(4,"div",24),d.gc(5,"button",25),d.rc("click",(function(n){return d.Pc(t),d.vc().stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.vc();d.Mb(2),d.Cc("ngModel",i._submission.finish)("searchable",!1),d.Mb(1),d.Cc("ngForOf",i._submissionData.finishes)}}function x(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.dd(1),d.gc(2,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc(3);return e.editing(e.keys.ringThickness,n,e._submission.ringThickness,e._submissionData.ringThicknesses)})),d.fc(),d.fc()}if(2&n){var i=d.vc(3);d.Mb(1),d.fd(" ",i._submission.ringThickness.name," ")}}function $(n,e){if(1&n&&(d.gc(0,"ng-option",31),d.dd(1),d.wc(2,"titlecase"),d.fc()),2&n){var t=e.$implicit;d.Cc("value",t.node),d.Mb(1),d.fd(" ",d.xc(2,2,t.node.name)," ")}}function A(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc(3);return e.editing(e.keys.ringThickness,n,e._submission.ringThickness,e._submissionData.ringThicknesses)})),d.gc(2,"ng-select",35),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc(3)._submission.ringThickness=n})),d.bd(3,$,3,4,"ng-option",30),d.fc(),d.fc(),d.gc(4,"div",24),d.gc(5,"button",25),d.rc("click",(function(n){return d.Pc(t),d.vc(3).stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.vc(3);d.Mb(2),d.Cc("ngModel",i._submission.ringThickness)("searchable",!1),d.Mb(1),d.Cc("ngForOf",i._submissionData.ringThicknesses)}}function T(n,e){if(1&n&&(d.gc(0,"li"),d.gc(1,"span"),d.dd(2,"Ring Thickness"),d.fc(),d.bd(3,x,3,1,"span",11),d.bd(4,A,6,3,"div",9),d.fc()),2&n){var t=d.vc(2);d.Sb("editable",t.keys.ringThickness&&t._editable),d.Mb(3),d.Cc("ngIf",t.currentlyEditing!==t.keys.ringThickness),d.Mb(1),d.Cc("ngIf",t.currentlyEditing===t.keys.ringThickness)}}function j(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.dd(1),d.wc(2,"titlecase"),d.gc(3,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc(3);return e.editing(e.keys.originalRingSize,n,e._submission.originalRingSize,e._submissionData.ringSizeCustoms)})),d.fc(),d.fc()}if(2&n){var i=d.vc(3);d.Mb(1),d.fd(" ",i._submission.originalRingSize?d.xc(2,1,i._submission.originalRingSize.name):"N/A"," ")}}function O(n,e){if(1&n&&(d.gc(0,"ng-option",31),d.dd(1),d.wc(2,"titlecase"),d.fc()),2&n){var t=e.$implicit;d.Cc("value",t.node),d.Mb(1),d.fd(" ",d.xc(2,2,t.node.name)," ")}}function E(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc(3);return e.editing(e.keys.originalRingSize,n,e._submission.originalRingSize,e._submissionData.ringSizeCustoms)})),d.gc(2,"ng-select",36),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc(3)._submission.originalRingSize=n})),d.bd(3,O,3,4,"ng-option",30),d.fc(),d.fc(),d.gc(4,"div",24),d.gc(5,"button",25),d.rc("click",(function(n){return d.Pc(t),d.vc(3).stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.vc(3);d.Mb(2),d.Cc("ngModel",i._submission.originalRingSize)("searchable",!1),d.Mb(1),d.Cc("ngForOf",i._submissionData.ringSizeCustoms)}}function N(n,e){if(1&n&&(d.gc(0,"li"),d.gc(1,"span"),d.dd(2,"Original Ring Size"),d.fc(),d.bd(3,j,4,3,"span",11),d.bd(4,E,6,3,"div",9),d.fc()),2&n){var t=d.vc(2);d.Sb("editable",t.keys.originalRingSize&&t._editable),d.Mb(3),d.Cc("ngIf",t.currentlyEditing!==t.keys.originalRingSize),d.Mb(1),d.Cc("ngIf",t.currentlyEditing===t.keys.originalRingSize)}}function B(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.dd(1),d.wc(2,"titlecase"),d.gc(3,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc(2);return e.editing(e.keys.ringSizeCustom,n,e._submission.ringSizeCustom,e._submissionData.ringSizeCustoms)})),d.fc(),d.fc()}if(2&n){var i=d.vc(2);d.Mb(1),d.fd(" ",d.xc(2,1,i._submission.ringSizeCustom.name)," ")}}function D(n,e){if(1&n&&(d.gc(0,"ng-option",31),d.dd(1),d.wc(2,"titlecase"),d.fc()),2&n){var t=e.$implicit;d.Cc("value",t.node),d.Mb(1),d.fd(" ",d.xc(2,2,t.node.name)," ")}}function z(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc(2);return e.editing(e.keys.ringSizeCustom,n,e._submission.ringSizeCustom,e._submissionData.ringSizeCustoms)})),d.gc(2,"ng-select",37),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc(2)._submission.ringSizeCustom=n})),d.bd(3,D,3,4,"ng-option",30),d.fc(),d.fc(),d.gc(4,"div",24),d.gc(5,"button",25),d.rc("click",(function(n){return d.Pc(t),d.vc(2).stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.vc(2);d.Mb(2),d.Cc("ngModel",i._submission.ringSizeCustom)("searchable",!1),d.Mb(1),d.Cc("ngForOf",i._submissionData.ringSizeCustoms)}}function R(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.dd(1),d.wc(2,"titlecase"),d.gc(3,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc(2);return e.editing(e.keys.measuredRingSize,n,e._submission.measuredRingSize,e._submissionData.ringSizeCustoms)})),d.fc(),d.fc()}if(2&n){var i=d.vc(2);d.Sb("text-muted",!i._submission.measuredRingSize),d.Mb(1),d.fd(" ",i._submission.measuredRingSize?d.xc(2,3,i._submission.measuredRingSize.name):"Not measured"," ")}}function F(n,e){if(1&n&&(d.gc(0,"ng-option",31),d.dd(1),d.wc(2,"titlecase"),d.fc()),2&n){var t=e.$implicit;d.Cc("value",t.node),d.Mb(1),d.fd(" ",d.xc(2,2,t.node.name)," ")}}function L(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc(2);return e.editing(e.keys.measuredRingSize,n,e._submission.measuredRingSize,e._submissionData.ringSizeCustoms)})),d.gc(2,"ng-select",37),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc(2)._submission.measuredRingSize=n})),d.bd(3,F,3,4,"ng-option",30),d.fc(),d.fc(),d.gc(4,"div",24),d.gc(5,"button",25),d.rc("click",(function(n){return d.Pc(t),d.vc(2).stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.vc(2);d.Mb(2),d.Cc("ngModel",i._submission.measuredRingSize)("searchable",!1),d.Mb(1),d.Cc("ngForOf",i._submissionData.ringSizeCustoms)}}function W(n,e){if(1&n&&(d.ec(0),d.bd(1,T,5,4,"li",33),d.bd(2,N,5,4,"li",33),d.gc(3,"li"),d.gc(4,"span"),d.dd(5),d.fc(),d.bd(6,B,4,3,"span",11),d.bd(7,z,6,3,"div",9),d.fc(),d.gc(8,"li"),d.gc(9,"span",34),d.dd(10,"Measured Ring Size"),d.fc(),d.bd(11,R,4,5,"span",8),d.bd(12,L,6,3,"div",9),d.fc(),d.dc()),2&n){var t=d.vc();d.Mb(1),d.Cc("ngIf",t._submission.ringThickness),d.Mb(1),d.Cc("ngIf",t._submission.originalRingSize||t._submission.ringResize),d.Mb(1),d.Sb("editable",t.keys.ringSizeCustom&&t._editable),d.Mb(2),d.fd("",t._submission.ringResize?"Desired":""," Ring Size"),d.Mb(1),d.Cc("ngIf",t.currentlyEditing!==t.keys.ringSizeCustom),d.Mb(1),d.Cc("ngIf",t.currentlyEditing===t.keys.ringSizeCustom),d.Mb(1),d.Sb("editable",t.keys.measuredRingSize&&t._editable),d.Mb(1),d.Cc("ngbTooltip","The ring size when checked in by CAST"),d.Mb(2),d.Cc("ngIf",t.currentlyEditing!==t.keys.measuredRingSize),d.Mb(1),d.Cc("ngIf",t.currentlyEditing===t.keys.measuredRingSize)}}function U(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.dd(1),d.wc(2,"titlecase"),d.gc(3,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc(2);return e.editing(e.keys.earringConfig,n,e._submission.earringConfig,e._submissionData.earringConfigs)})),d.fc(),d.fc()}if(2&n){var i=d.vc(2);d.Mb(1),d.fd(" ",d.xc(2,1,i._submission.earringConfig.name)," ")}}function G(n,e){if(1&n&&(d.gc(0,"ng-option",31),d.dd(1),d.wc(2,"titlecase"),d.fc()),2&n){var t=e.$implicit;d.Cc("value",t.node),d.Mb(1),d.fd(" ",d.xc(2,2,t.node.name)," ")}}function J(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc(2);return e.editing(e.keys.earringConfig,n,e._submission.earringConfig,e._submissionData.earringConfigs)})),d.gc(2,"ng-select",38),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc(2)._submission.earringConfig=n})),d.bd(3,G,3,4,"ng-option",30),d.fc(),d.fc(),d.gc(4,"div",24),d.gc(5,"button",25),d.rc("click",(function(n){return d.Pc(t),d.vc(2).stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.vc(2);d.Mb(2),d.Cc("ngModel",i._submission.earringConfig)("searchable",!1),d.Mb(1),d.Cc("ngForOf",i._submissionData.earringConfigs)}}function X(n,e){if(1&n&&(d.ec(0),d.gc(1,"li"),d.gc(2,"span"),d.dd(3,"Earring Config"),d.fc(),d.bd(4,U,4,3,"span",11),d.bd(5,J,6,3,"div",9),d.fc(),d.dc()),2&n){var t=d.vc();d.Mb(1),d.Sb("editable",t.keys.earringConfig&&t._editable),d.Mb(3),d.Cc("ngIf",t.currentlyEditing!==t.keys.earringConfig),d.Mb(1),d.Cc("ngIf",t.currentlyEditing===t.keys.earringConfig)}}function Y(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.bc(1,"i"),d.gc(2,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc(3);return e.editing(e.keys.jumpRing,n)})),d.fc(),d.fc()}if(2&n){var i=d.vc(3);d.Sb("no",!i._submission.jumpRing)("yes",i._submission.jumpRing),d.Mb(1),d.Pb("fas ",i._submission.jumpRing?"fa-check":"fa-times","")}}function H(n,e){if(1&n){var t=d.hc();d.gc(0,"div",39),d.rc("click",(function(n){d.Pc(t);var e=d.vc(3);return e.editing(e.keys.jumpRing,n)})),d.gc(1,"input",40),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc(3)._submission.jumpRing=n})),d.fc(),d.bc(2,"label",41),d.fc()}if(2&n){var i=d.vc(3);d.Mb(1),d.Cc("ngModel",i._submission.jumpRing)}}function q(n,e){if(1&n&&(d.gc(0,"li"),d.gc(1,"span"),d.dd(2,"Jump Ring"),d.fc(),d.bd(3,Y,3,7,"span",13),d.bd(4,H,3,1,"div",14),d.fc()),2&n){var t=d.vc(2);d.Sb("editable",t.keys.jumpRing&&t._editable),d.Mb(3),d.Cc("ngIf",t.currentlyEditing!==t.keys.jumpRing),d.Mb(1),d.Cc("ngIf",t.currentlyEditing===t.keys.jumpRing)}}function V(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.dd(1),d.gc(2,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc(3);return e.editing(e.keys.jumpRingPlacement,n)})),d.fc(),d.fc()}if(2&n){var i=d.vc(3);d.Mb(1),d.fd(" ",i._submission.jumpRingPlacement," ")}}function Z(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc(3);return e.editing(e.keys.jumpRingPlacement,n)})),d.bc(2,"label",42),d.gc(3,"textarea",43),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc(3)._submission.jumpRingPlacement=n})),d.fc(),d.fc(),d.gc(4,"div",24),d.gc(5,"button",25),d.rc("click",(function(n){return d.Pc(t),d.vc(3).stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.vc(3);d.Mb(3),d.Cc("ngModel",i._submission.jumpRingPlacement)}}function Q(n,e){if(1&n&&(d.gc(0,"li"),d.gc(1,"span"),d.dd(2,"Placement"),d.fc(),d.bd(3,V,3,1,"span",11),d.bd(4,Z,6,1,"div",9),d.fc()),2&n){var t=d.vc(2);d.Sb("editable",t.keys.jumpRingPlacement&&t._editable),d.Mb(3),d.Cc("ngIf",t.currentlyEditing!==t.keys.jumpRingPlacement),d.Mb(1),d.Cc("ngIf",t.currentlyEditing===t.keys.jumpRingPlacement)}}function K(n,e){if(1&n&&(d.ec(0),d.bd(1,q,5,4,"li",33),d.bd(2,Q,5,4,"li",33),d.dc()),2&n){var t=d.vc();d.Mb(1),d.Cc("ngIf",null!==t._submission.jumpRing),d.Mb(1),d.Cc("ngIf",null!==t._submission.jumpRing&&t._submission.jumpRing)}}function nn(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.bc(1,"i"),d.gc(2,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc(2);return e.editing(e.keys.jumpRing,n)})),d.fc(),d.fc()}if(2&n){var i=d.vc(2);d.Sb("no",!i._submission.ringResize)("yes",i._submission.ringResize),d.Mb(1),d.Pb("fas ",i._submission.ringResize?"fa-check":"fa-times","")}}function en(n,e){if(1&n){var t=d.hc();d.gc(0,"div",39),d.rc("click",(function(n){d.Pc(t);var e=d.vc(2);return e.editing(e.keys.ringResize,n)})),d.gc(1,"input",45),d.rc("click",(function(){return d.Pc(t),d.vc(2).toggleRingResize()}))("ngModelChange",(function(n){return d.Pc(t),d.vc(2)._submission.ringResize=n})),d.fc(),d.bc(2,"label",46),d.fc()}if(2&n){var i=d.vc(2);d.Mb(1),d.Cc("ngModel",i._submission.ringResize)}}function tn(n,e){if(1&n){var t=d.hc();d.ec(0),d.gc(1,"li",44),d.rc("click",(function(n){d.Pc(t);var e=d.vc();return e.editing(e.keys.ringResize,n)})),d.gc(2,"span"),d.dd(3,"Ring Resize"),d.fc(),d.bd(4,nn,3,7,"span",13),d.bd(5,en,3,1,"div",14),d.fc(),d.dc()}if(2&n){var i=d.vc();d.Mb(4),d.Cc("ngIf",i.currentlyEditing!==i.keys.ringResize),d.Mb(1),d.Cc("ngIf",i.currentlyEditing===i.keys.ringResize)}}function sn(n,e){if(1&n&&(d.gc(0,"li"),d.gc(1,"span"),d.dd(2,"Chain"),d.fc(),d.gc(3,"span"),d.bc(4,"i"),d.fc(),d.fc()),2&n){var t=d.vc();d.Mb(3),d.Sb("no",!t._submission.chainType||t._submission.chainType.name===t.chainTypeNone)("yes",t._submission.chainType&&t._submission.chainType.name!==t.chainTypeNone),d.Mb(1),d.Pb("fas ",t._submission.chainType&&t._submission.chainType.name!==t.chainTypeNone?"fa-check":"fa-times","")}}function cn(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.bc(1,"i"),d.dd(2),d.wc(3,"titlecase"),d.gc(4,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc();return e.editing(e.keys.plating,n,e._submission.plating,e._submissionData.platings)})),d.fc(),d.fc()}if(2&n){var i=d.vc();d.Sb("no",i._submission.plating&&i._submission.plating.name===i.platingTypeNoPlating)("yes",i._submission.plating&&i._submission.plating.name!==i.platingTypeNoPlating),d.Mb(1),d.Pb("pr-1 fas ",i._submission.plating&&i._submission.plating.name!==i.platingTypeNoPlating?"fa-check":"fa-times",""),d.Mb(1),d.fd("",d.xc(3,8,i._submission.plating.name)," ")}}function on(n,e){if(1&n&&(d.gc(0,"ng-option",31),d.dd(1),d.wc(2,"titlecase"),d.fc()),2&n){var t=e.$implicit;d.Cc("value",t.node),d.Mb(1),d.fd(" ",d.xc(2,2,t.node.name)," ")}}function an(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc();return e.editing(e.keys.plating,n,e._submission.plating,e._submissionData.platings)})),d.gc(2,"ng-select",47),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc()._submission.plating=n})),d.bd(3,on,3,4,"ng-option",30),d.fc(),d.fc(),d.gc(4,"div",24),d.gc(5,"button",25),d.rc("click",(function(n){return d.Pc(t),d.vc().stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.vc();d.Mb(2),d.Cc("ngModel",i._submission.plating)("searchable",!1),d.Mb(1),d.Cc("ngForOf",i._submissionData.platings)}}function rn(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.bc(1,"i"),d.gc(2,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc();return e.editing(e.keys.showEngravingSection,n)})),d.fc(),d.fc()}if(2&n){var i=d.vc();d.Sb("no",!i._submission.engravingText)("yes",i._submission.engravingText),d.Mb(1),d.Pb("fas ",i._submission.engravingText||i.showEngravingSection?"fa-check":"fa-times","")}}function dn(n,e){if(1&n){var t=d.hc();d.gc(0,"div",39),d.rc("click",(function(n){d.Pc(t);var e=d.vc();return e.editing(e.keys.showEngravingSection,n)})),d.gc(1,"input",48),d.rc("click",(function(){return d.Pc(t),d.vc().toggleEngraving()}))("ngModelChange",(function(n){return d.Pc(t),d.vc().showEngravingSection=n})),d.fc(),d.bc(2,"label",49),d.fc()}if(2&n){var i=d.vc();d.Mb(1),d.Cc("ngModel",i.showEngravingSection)}}function un(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.dd(1),d.wc(2,"titlecase"),d.gc(3,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc(2);return e.editing(e.keys.chainType,n,e._submission.chainType,e._submissionData.chainTypes)})),d.fc(),d.fc()}if(2&n){var i=d.vc(2);d.Mb(1),d.fd(" ",d.xc(2,1,i._submission.chainType.name)," ")}}function ln(n,e){if(1&n&&(d.gc(0,"ng-option",31),d.dd(1),d.wc(2,"titlecase"),d.fc()),2&n){var t=e.$implicit;d.Cc("value",t.node),d.Mb(1),d.fd(" ",d.xc(2,2,t.node.name)," ")}}function gn(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc(2);return e.editing(e.keys.chainType,n,e._submission.chainType,e._submissionData.chainTypes)})),d.gc(2,"ng-select",52),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc(2)._submission.chainType=n})),d.bd(3,ln,3,4,"ng-option",30),d.fc(),d.fc(),d.gc(4,"div",24),d.gc(5,"button",53),d.rc("click",(function(n){return d.Pc(t),d.vc(2).stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.vc(2);d.Mb(2),d.Cc("ngModel",i._submission.chainType)("searchable",!1),d.Mb(1),d.Cc("ngForOf",i._submissionData.chainTypes)}}function fn(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.dd(1),d.wc(2,"titlecase"),d.gc(3,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc(3);return e.editing(e.keys.chainLength,n,e._submission.chainLength,e._submissionData.chainLengths)})),d.fc(),d.fc()}if(2&n){var i=d.vc(3);d.Mb(1),d.fd(" ",i._submission.chainLength?d.xc(2,1,i._submission.chainLength.name):""," ")}}function bn(n,e){if(1&n&&(d.gc(0,"ng-option",31),d.dd(1),d.wc(2,"titlecase"),d.fc()),2&n){var t=e.$implicit;d.Cc("value",t.node),d.Mb(1),d.fd(" ",d.xc(2,2,t.node.name)," ")}}function mn(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc(3);return e.editing(e.keys.chainLength,n,e._submission.chainLength,e._submissionData.chainLengths)})),d.gc(2,"ng-select",54),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc(3)._submission.chainLength=n})),d.bd(3,bn,3,4,"ng-option",30),d.fc(),d.fc(),d.gc(4,"div",24),d.gc(5,"button",53),d.rc("click",(function(n){return d.Pc(t),d.vc(3).stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.vc(3);d.Mb(2),d.Cc("ngModel",i._submission.chainLength)("searchable",!1),d.Mb(1),d.Cc("ngForOf",i._submissionData.chainLengths)}}function pn(n,e){if(1&n&&(d.gc(0,"li"),d.gc(1,"span"),d.dd(2,"Chain Length"),d.fc(),d.bd(3,fn,4,3,"span",11),d.bd(4,mn,6,3,"div",9),d.fc()),2&n){var t=d.vc(2);d.Sb("editable",t.keys.chainLength&&t._editable),d.Mb(3),d.Cc("ngIf",t.currentlyEditing!==t.keys.chainLength),d.Mb(1),d.Cc("ngIf",t.currentlyEditing===t.keys.chainLength)}}function hn(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.dd(1),d.wc(2,"titlecase"),d.gc(3,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc(3);return e.editing(e.keys.chainPlating,n,e._submission.chainPlating,e._submissionData.platings)})),d.fc(),d.fc()}if(2&n){var i=d.vc(3);d.Mb(1),d.fd(" ",i._submission.chainPlating?d.xc(2,1,i._submission.chainPlating.name):""," ")}}function vn(n,e){if(1&n&&(d.gc(0,"ng-option",31),d.dd(1),d.wc(2,"titlecase"),d.fc()),2&n){var t=e.$implicit;d.Cc("value",t.node),d.Mb(1),d.fd(" ",d.xc(2,2,t.node.name)," ")}}function yn(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc(3);return e.editing(e.keys.chainPlating,n,e._submission.chainPlating,e._submissionData.platings)})),d.gc(2,"ng-select",55),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc(3)._submission.chainPlating=n})),d.bd(3,vn,3,4,"ng-option",30),d.fc(),d.fc(),d.gc(4,"div",24),d.gc(5,"button",53),d.rc("click",(function(n){return d.Pc(t),d.vc(3).stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.vc(3);d.Mb(2),d.Cc("ngModel",i._submission.chainPlating)("searchable",!1),d.Mb(1),d.Cc("ngForOf",i._submissionData.platings)}}function Cn(n,e){if(1&n&&(d.gc(0,"li"),d.gc(1,"span"),d.dd(2,"Chain Plating"),d.fc(),d.bd(3,hn,4,3,"span",11),d.bd(4,yn,6,3,"div",9),d.fc()),2&n){var t=d.vc(2);d.Sb("editable",t.keys.chainPlating&&t._editable),d.Mb(3),d.Cc("ngIf",t.currentlyEditing!==t.keys.chainPlating),d.Mb(1),d.Cc("ngIf",t.currentlyEditing===t.keys.chainPlating)}}function Mn(n,e){if(1&n&&(d.ec(0),d.gc(1,"div",50),d.gc(2,"div",51),d.gc(3,"h6",6),d.dd(4,"Chain Details"),d.fc(),d.gc(5,"ul",7),d.gc(6,"li"),d.gc(7,"span"),d.dd(8,"Chain Type"),d.fc(),d.bd(9,un,4,3,"span",11),d.bd(10,gn,6,3,"div",9),d.fc(),d.bd(11,pn,5,4,"li",33),d.bd(12,Cn,5,4,"li",33),d.fc(),d.fc(),d.fc(),d.dc()),2&n){var t=d.vc();d.Mb(6),d.Sb("editable",t.keys.chainType&&t._editable),d.Mb(3),d.Cc("ngIf",t.currentlyEditing!==t.keys.chainType),d.Mb(1),d.Cc("ngIf",t.currentlyEditing===t.keys.chainType),d.Mb(1),d.Cc("ngIf",t._submission.chainType.name!==t.chainTypeNone),d.Mb(1),d.Cc("ngIf",t._submission.chainType.name!==t.chainTypeNone)}}function Sn(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.dd(1),d.wc(2,"titlecase"),d.gc(3,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc(2);return e.editing(e.keys.engravingFont,n)})),d.fc(),d.fc()}if(2&n){var i=d.vc(2);d.Mb(1),d.fd(" ",i._submission.engravingFont?d.xc(2,1,i._submission.engravingFont):""," ")}}function _n(n,e){if(1&n&&(d.gc(0,"ng-option",31),d.dd(1),d.wc(2,"titlecase"),d.fc()),2&n){var t=e.$implicit;d.Cc("value",t.name),d.Mb(1),d.fd(" ",d.xc(2,2,t.name)," ")}}function Pn(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc(2);return e.editing(e.keys.engravingFont,n)})),d.gc(2,"ng-select",57),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc(2)._submission.engravingFont=n})),d.bd(3,_n,3,4,"ng-option",30),d.fc(),d.fc(),d.gc(4,"div",24),d.gc(5,"button",53),d.rc("click",(function(n){return d.Pc(t),d.vc(2).stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.vc(2);d.Mb(2),d.Cc("ngModel",i._submission.engravingFont)("searchable",!1),d.Mb(1),d.Cc("ngForOf",i._submissionData.engravingFonts)}}function kn(n,e){if(1&n){var t=d.hc();d.gc(0,"span"),d.dd(1),d.gc(2,"button",17),d.rc("click",(function(n){d.Pc(t);var e=d.vc(2);return e.editing(e.keys.engravingText,n)})),d.fc(),d.fc()}if(2&n){var i=d.vc(2);d.Mb(1),d.fd(" ",i._submission.engravingText," ")}}function wn(n,e){if(1&n){var t=d.hc();d.gc(0,"div",18),d.gc(1,"div",19),d.rc("click",(function(n){d.Pc(t);var e=d.vc(2);return e.editing(e.keys.engravingText,n)})),d.bc(2,"label",58),d.gc(3,"input",59),d.rc("ngModelChange",(function(n){return d.Pc(t),d.vc(2)._submission.engravingText=n})),d.fc(),d.fc(),d.gc(4,"div",24),d.gc(5,"button",53),d.rc("click",(function(n){return d.Pc(t),d.vc(2).stopEditing(n)})),d.fc(),d.fc(),d.fc()}if(2&n){var i=d.vc(2);d.Mb(3),d.Cc("ngModel",i._submission.engravingText)}}function In(n,e){if(1&n&&(d.ec(0),d.gc(1,"div",50),d.gc(2,"div",56),d.gc(3,"h6",6),d.dd(4,"Engraving"),d.fc(),d.gc(5,"ul",7),d.gc(6,"li"),d.gc(7,"span"),d.dd(8,"Engraving Font"),d.fc(),d.bd(9,Sn,4,3,"span",11),d.bd(10,Pn,6,3,"div",9),d.fc(),d.gc(11,"li"),d.gc(12,"span"),d.dd(13,"Engraving Text"),d.fc(),d.bd(14,kn,3,1,"span",11),d.bd(15,wn,6,1,"div",9),d.fc(),d.fc(),d.fc(),d.fc(),d.dc()),2&n){var t=d.vc();d.Mb(6),d.Sb("editable",t.keys.engravingFont&&t._editable),d.Mb(3),d.Cc("ngIf",t.currentlyEditing!==t.keys.engravingFont),d.Mb(1),d.Cc("ngIf",t.currentlyEditing===t.keys.engravingFont),d.Mb(1),d.Sb("editable",t.keys.engravingText&&t._editable),d.Mb(3),d.Cc("ngIf",t.currentlyEditing!==t.keys.engravingText),d.Mb(1),d.Cc("ngIf",t.currentlyEditing===t.keys.engravingText)}}function xn(n,e){if(1&n&&(d.gc(0,"div",4),d.gc(1,"div",60),d.gc(2,"h6",6),d.dd(3,"Customer Note"),d.fc(),d.gc(4,"pre",61),d.dd(5),d.fc(),d.fc(),d.fc()),2&n){var t=d.vc();d.Mb(5),d.ed(t._customerNote)}}function $n(n,e){if(1&n){var t=d.hc();d.gc(0,"div",62),d.gc(1,"button",63),d.rc("click",(function(){d.Pc(t);var n=d.vc(),e=d.Mc(1);return n.updateSubmission(e)})),d.dd(2,"Update Submission "),d.fc(),d.fc()}if(2&n){var i=d.vc();d.Mb(1),d.Cc("disabled",i.state.updating)}}var An=function(){return function(){}}(),Tn=function(){return function(){this.metalWeight="metalWeight",this.waxWeight="waxWeight",this.baseMetal="baseMetal",this.baseMetalPaid="baseMetalPaid",this.baseMetalPrice="baseMetalPricePaid",this.plating="plating",this.finish="finish",this.castingCode="castingCode",this.castingPrice="castingPrice",this.castingEstimateCode="castingEstimateCode",this.castingEstimateLaborSubmission="castingEstimateLaborSubmission",this.castingEstimateMetalSubmission="castingEstimateMetalSubmission",this.ringThickness="ringThickness",this.ringResize="ringResize",this.originalRingSize="originalRingSize",this.ringSizeCustom="ringSizeCustom",this.measuredRingSize="measuredRingSize",this.jumpRing="jumpRing",this.jumpRingPlacement="jumpRingPlacement",this.chainType="chainType",this.chainLength="chainLength",this.chainPlating="chainPlating",this.earringConfig="earringConfig",this.showEngravingSection="showEngravingSection",this.engravingFont="engravingFont",this.engravingText="engravingText",this.submittedAt="submittedAt",this.dateReceived="dateReceived",this.hardDeadline="hardDeadline",this.isEvent="isEvent",this.customerNotes="customerNotes",this.internalNotes="internalNotes",this.totalPrice="totalPrice",this.amountPaid="amountPaid",this.notes="notes"}}(),jn=function(){function n(n,e){this.submissionService=n,this.toastrService=e,this._castingCode=null,this.clickEvent=null,this.currentlyEditing=null,this._editable=!1,this._isAdmin=!1,this._hasStones=!1,this.keys=new Tn,this._originalCastingCode=null,this.showEngravingSection=!1,this._submission=new An,this._submissionData=new a.b,this._customerNote=null,this.state={_loadingCastingCode:!0,updating:!1},this.chainTypeNone=c.b,this.kitTypeEarring=i.e,this.kitTypePendant=i.f,this.kitTypeRing=i.g,this.platingTypeNoPlating=o.a,this.silverBaseMetalName=s.m}return n.prototype.editing=function(n,e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),this._editable&&(t&&(this._submission[n]=i.find((function(n){return n.node.id===t.id})).node),e.stopPropagation(),this.currentlyEditing=n)},n.prototype.stopEditing=function(n){this.currentlyEditing=null},n.prototype.toggleEngraving=function(){this.showEngravingSection&&(this._submission.engravingText=null,this._submission.engravingFont=null)},n.prototype.toggleRingResize=function(){this._submission.ringResize&&(this._submission.originalRingSize=null)},n.prototype.updateSubmission=function(n){var e=this;this.state.updating=!0,this.toastrService.success("","Updating Submission Information");for(var t=JSON.parse(JSON.stringify(this._submission)),i=0,s=Object.keys(t);i<s.length;i++){var c=s[i];t[c]&&t[c].id&&(t[c]=t[c].id)}t.updatedAt=(new Date).toISOString(),this.submissionService.updateEdit(t).subscribe((function(t){e.state.updating=!1,e.toastrService.success("","Submission Information Updated"),n.form.markAsPristine()}))},Object.defineProperty(n.prototype,"castingCode",{set:function(n){this._castingCode=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"castingEstimateCode",{set:function(n){this._submission.castingEstimateCode=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"editable",{set:function(n){this._editable=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAdmin",{set:function(n){this._isAdmin=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"loadingCastingCode",{set:function(n){this.state._loadingCastingCode=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"originalCastingCode",{set:function(n){this._originalCastingCode=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"submission",{set:function(n){n.node&&(n=n.node),this._submission.id=n.id,this._submission.status=n.status,this._submission.kitType=n.kitType,this._submission.castingType=n.castingType?n.castingType:null,this._submission.waxWeight=n.waxWeight,this._submission.expectedFinishWeight=n.expectedFinishWeight,this._submission.metalWeight=n.metalWeight,this._submission.baseMetal=n.baseMetal,this._submission.plating=n.plating,this._submission.finish=n.finish,this._submission.castingCode=n.castingCode,this._submission.castingPrice=n.castingPrice,this._submission.castingEstimateLaborSubmission=n.estimatedLaborCost,this._submission.castingEstimateMetalSubmission=n.estimatedMetalCost,this._submission.ringThickness=n.ringThickness?n.ringThickness:null,this._submission.ringSizeCustom=n.ringSizeCustom?n.ringSizeCustom:null,this._submission.measuredRingSize=n.measuredRingSize?n.measuredRingSize:null,this._submission.originalRingSize=n.originalRingSize?n.originalRingSize:null,this._submission.ringResize=n.ringResize,this._submission.jumpRing=n.jumpRing,this._submission.jumpRingPlacement=n.jumpRingPlacement,this._submission.chainType=n.chainType?n.chainType:null,this._submission.chainLength=n.chainLength?n.chainLength:null,this._submission.chainPlating=n.chainPlating?n.chainPlating:null,this._submission.earringConfig=n.earringConfig?n.earringConfig:null,this._submission.engravingFont=n.engravingFont,this._submission.engravingText=n.engravingText,this._submission.submittedAt=n.submittedAt,this._submission.dateReceived=n.dateReceived,this._submission.hardDeadline=n.hardDeadline?n.hardDeadline:null,this._submission.isEvent=!!n.customer.event,this._submission.customerNotes=n.customerNotes,this._submission.internalNotes=n.internalNotes,this._submission.totalPrice=n.totalPrice,this._submission.amountPaid=n.amountPaid,this._submission.baseMetalPaid=n.baseMetalPaid,this._submission.baseMetalPrice=n.baseMetalPrice,this._submission.notes=n.notes},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"submissionData",{set:function(n){this._submissionData=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasStones",{set:function(n){this._hasStones=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"customerNote",{set:function(n){this._customerNote=n},enumerable:!1,configurable:!0}),n.\u0275fac=function(e){return new(e||n)(d.ac(r.a),d.ac(u.b))},n.\u0275cmp=d.Ub({type:n,selectors:[["submission-view-submission"]],hostBindings:function(n,e){1&n&&d.rc("click",(function(n){return e.stopEditing(n)}),!1,d.Nc)("keyup.Enter",(function(n){return e.stopEditing(n)}),!1,d.Nc)},inputs:{castingCode:"castingCode",castingEstimateCode:"castingEstimateCode",editable:"editable",isAdmin:"isAdmin",loadingCastingCode:"loadingCastingCode",originalCastingCode:"originalCastingCode",submission:"submission",submissionData:"submissionData",hasStones:"hasStones",customerNote:"customerNote"},decls:72,vars:53,consts:[["submissionViewForm","ngForm"],[1,"row","py-3","box-divider-bottom","justify-content-start","mb-4"],[1,"col"],[1,"mb-2"],[1,"row"],[1,"col-md-6"],[1,"box-title"],[1,"card-details"],[3,"text-muted",4,"ngIf"],["class","form-row w-100 align-items-center",4,"ngIf"],[3,"no",4,"ngIf"],[4,"ngIf"],[3,"font-weight-bold",4,"ngIf"],[3,"no","yes",4,"ngIf"],["class","checkbox-wrapper m-0",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["class","col-12 tc mt-3",4,"ngIf"],["type","button",1,"btn","ml-1","icon-btn-outline","hover","icon-btn-small","fas","fa-pencil-alt",3,"click"],[1,"form-row","w-100","align-items-center"],[1,"col","flex-grow-1",3,"click"],["for","hardDeadline",2,"display","none"],["id","hardDeadline","name","hardDeadline","placeholder","Hard Deadline","required","",3,"ngModel","owlDateTimeTrigger","owlDateTime","ngModelChange"],[3,"pickerType"],["hardD",""],[1,"col-auto"],["type","button",1,"btn","ml-1","icon-btn-outline","icon-btn-small","fas","fa-check",3,"click"],["for","waxWeight",2,"display","none"],["id","waxWeight","name","waxWeight","placeholder","Enter the weight of your wax","type","number",1,"form-control",3,"ngModel","ngModelChange"],["waxWeight","ngModel"],["name","baseMetal",3,"ngModel","searchable","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","finish",3,"ngModel","searchable","ngModelChange"],[3,"editable",4,"ngIf"],[3,"ngbTooltip"],["name","ringThickness",3,"ngModel","searchable","ngModelChange"],["name","originalRingSize",3,"ngModel","searchable","ngModelChange"],["name","ringSizeCustom",3,"ngModel","searchable","ngModelChange"],["name","earringConfig",3,"ngModel","searchable","ngModelChange"],[1,"checkbox-wrapper","m-0",3,"click"],["id","jumpRingCheckbox","name","jumpRingCheckbox","type","checkbox",3,"ngModel","ngModelChange"],["for","jumpRingCheckbox"],["for","jumpRingPlacement",2,"display","none"],["id","jumpRingPlacement","name","jumpRingPlacement",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"],["id","ringResizeCheckbox","name","ringResizeCheckbox","type","checkbox",3,"ngModel","click","ngModelChange"],["for","ringResizeCheckbox"],["name","plating",3,"ngModel","searchable","ngModelChange"],["id","showEngravingSectionCheckbox","name","showEngravingSectionCheckbox","type","checkbox",3,"ngModel","click","ngModelChange"],["for","showEngravingSectionCheckbox"],[1,"col-md-6","mt-4"],[1,"mb-4","pb-2"],["name","chainType",3,"ngModel","searchable","ngModelChange"],["type","button",1,"btn","ml-1","icon-btn-outline","icon-btn-small","fas","fa-times",3,"click"],["name","chainLength",3,"ngModel","searchable","ngModelChange"],["name","chainPlating",3,"ngModel","searchable","ngModelChange"],[1,"py-2"],["name","engravingFont",3,"ngModel","searchable","ngModelChange"],["for","engravingText",2,"display","none"],["id","engravingText","name","engravingText","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col","mt-4"],[1,"submissionNote"],[1,"col-12","tc","mt-3"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(n,e){if(1&n&&(d.gc(0,"form",null,0),d.gc(2,"div",1),d.gc(3,"div",2),d.gc(4,"h5",3),d.dd(5,"Submission Details"),d.fc(),d.fc(),d.fc(),d.gc(6,"div",4),d.gc(7,"div",5),d.gc(8,"h6",6),d.dd(9,"Basic Details"),d.fc(),d.gc(10,"ul",7),d.gc(11,"li"),d.gc(12,"span"),d.dd(13,"Hard Deadline"),d.fc(),d.bd(14,h,4,5,"span",8),d.bd(15,v,8,4,"div",9),d.fc(),d.gc(16,"li"),d.gc(17,"span"),d.dd(18,"Wax Weight"),d.fc(),d.bd(19,y,3,3,"span",10),d.bd(20,C,7,1,"div",9),d.fc(),d.bd(21,M,5,1,"li",11),d.gc(22,"li"),d.gc(23,"span"),d.dd(24,"Jewellery Type"),d.fc(),d.gc(25,"span"),d.dd(26),d.wc(27,"titlecase"),d.fc(),d.fc(),d.gc(28,"li"),d.gc(29,"span"),d.dd(30,"Base Metal"),d.fc(),d.bd(31,S,4,5,"span",12),d.bd(32,P,6,3,"div",9),d.fc(),d.gc(33,"li"),d.gc(34,"span"),d.dd(35,"Finish"),d.fc(),d.bd(36,k,3,1,"span",11),d.bd(37,I,6,3,"div",9),d.fc(),d.bd(38,W,13,12,"ng-container",11),d.bd(39,X,6,4,"ng-container",11),d.fc(),d.fc(),d.gc(40,"div",5),d.gc(41,"h6",6),d.dd(42,"Upgrades"),d.fc(),d.gc(43,"ul",7),d.bd(44,K,3,2,"ng-container",11),d.bd(45,tn,6,2,"ng-container",11),d.gc(46,"li"),d.gc(47,"span"),d.dd(48,"Metal Upgrade"),d.fc(),d.gc(49,"span"),d.bc(50,"i"),d.fc(),d.fc(),d.bd(51,sn,5,7,"li",11),d.gc(52,"li"),d.gc(53,"span"),d.dd(54,"Plating"),d.fc(),d.bd(55,cn,5,10,"span",13),d.bd(56,an,6,3,"div",9),d.fc(),d.gc(57,"li"),d.gc(58,"span"),d.dd(59,"Engraving"),d.fc(),d.bd(60,rn,3,7,"span",13),d.bd(61,dn,3,1,"div",14),d.fc(),d.gc(62,"li"),d.gc(63,"span"),d.dd(64,"Stone Setting"),d.fc(),d.gc(65,"span"),d.bc(66,"i"),d.fc(),d.fc(),d.fc(),d.fc(),d.fc(),d.gc(67,"div",4),d.bd(68,Mn,13,6,"ng-container",11),d.bd(69,In,16,8,"ng-container",11),d.fc(),d.bd(70,xn,6,1,"div",15),d.fc(),d.bd(71,$n,3,1,"div",16)),2&n){var t=d.Mc(1);d.Mb(11),d.Sb("editable",e.keys.hardDeadline&&e._editable),d.Mb(3),d.Cc("ngIf",e.currentlyEditing!==e.keys.hardDeadline),d.Mb(1),d.Cc("ngIf",e.currentlyEditing===e.keys.hardDeadline),d.Mb(1),d.Sb("editable",e.keys.waxWeight&&e._editable),d.Mb(3),d.Cc("ngIf",e.currentlyEditing!==e.keys.waxWeight),d.Mb(1),d.Cc("ngIf",e.currentlyEditing===e.keys.waxWeight),d.Mb(1),d.Cc("ngIf",e._submission.waxWeight&&e._submission.expectedFinishWeight&&!e._isAdmin),d.Mb(5),d.ed(d.xc(27,51,e._submission.kitType.name)),d.Mb(2),d.Sb("editable",e.keys.baseMetal&&e._editable),d.Mb(3),d.Cc("ngIf",e.currentlyEditing!==e.keys.baseMetal),d.Mb(1),d.Cc("ngIf",e.currentlyEditing===e.keys.baseMetal),d.Mb(1),d.Sb("editable",e.keys.finish&&e._editable),d.Mb(3),d.Cc("ngIf",e.currentlyEditing!==e.keys.finish),d.Mb(1),d.Cc("ngIf",e.currentlyEditing===e.keys.finish),d.Mb(1),d.Cc("ngIf",e._submission.kitType.name===e.kitTypeRing),d.Mb(1),d.Cc("ngIf",e._submission.kitType.name===e.kitTypeEarring),d.Mb(5),d.Cc("ngIf",null!==e._submission.jumpRing&&e._submission.kitType.name===e.kitTypePendant),d.Mb(1),d.Cc("ngIf",(null!==e._submission.ringResize||e._editable)&&e._submission.kitType.name===e.kitTypeRing),d.Mb(4),d.Sb("no",e._submission.baseMetal.name===e.silverBaseMetalName)("yes",e._submission.baseMetal.name!==e.silverBaseMetalName),d.Mb(1),d.Pb("fas ",e._submission.baseMetal.name!==e.silverBaseMetalName?"fa-check":"fa-times",""),d.Mb(1),d.Cc("ngIf",e._submission.kitType.name===e.kitTypePendant),d.Mb(1),d.Sb("editable",e.keys.plating&&e._editable),d.Mb(3),d.Cc("ngIf",e.currentlyEditing!==e.keys.plating),d.Mb(1),d.Cc("ngIf",e.currentlyEditing===e.keys.plating),d.Mb(1),d.Sb("editable",e.keys.showEngravingSection&&e._editable),d.Mb(3),d.Cc("ngIf",e.currentlyEditing!==e.keys.showEngravingSection),d.Mb(1),d.Cc("ngIf",e.currentlyEditing===e.keys.showEngravingSection),d.Mb(1),d.Sb("editable",e._editable),d.Mb(3),d.Sb("no",!e._hasStones)("yes",e._hasStones),d.Mb(1),d.Pb("fas ",e._hasStones?"fa-check":"fa-times",""),d.Mb(2),d.Cc("ngIf",e._submission.kitType.name===e.kitTypePendant&&(e._submission.chainType.name!==e.chainTypeNone||e._editable)),d.Mb(1),d.Cc("ngIf",e._submission.engravingFont&&e._submission.engravingText||e.showEngravingSection),d.Mb(1),d.Cc("ngIf",e._customerNote),d.Mb(1),d.Cc("ngIf",t.dirty)}},directives:[l.z,l.l,l.m,g.u,l.d,f.e,l.u,l.k,l.n,f.g,f.c,l.q,b.a,g.t,b.n,m.m,l.a],pipes:[g.G,p.a],styles:[""]}),n}()},b44C:function(n,e,t){"use strict";t.d(e,"a",(function(){return p})),t("+izf");var i=t("fXoL"),s=t("1kSV"),c=t("ofXK"),o=t("tyNb"),a=t("XXSO"),r=t("G0jp");function d(n,e){if(1&n&&(i.gc(0,"span",10),i.dd(1),i.wc(2,"simpleDate"),i.fc()),2&n){var t=i.vc().$implicit;i.Mb(1),i.fd(" ",i.xc(2,1,t.node.outgoingBatch.dateSent)," ")}}function u(n,e){if(1&n){var t=i.hc();i.gc(0,"a",11),i.rc("click",(function(){return i.Pc(t),i.vc(2).dismissModal("Redirecting to batch")})),i.wc(1,"numericId"),i.dd(2),i.wc(3,"numericId"),i.fc()}if(2&n){var s=i.vc().$implicit;i.Ec("routerLink","/manufacturing/batches/view/",i.xc(1,2,s.node.outgoingBatch.id),""),i.Mb(2),i.fd(" ",i.xc(3,4,s.node.outgoingBatch.id)," ")}}function l(n,e){1&n&&(i.gc(0,"span",10),i.dd(1,"N/A"),i.fc())}function g(n,e){if(1&n){var t=i.hc();i.gc(0,"a",11),i.rc("click",(function(){return i.Pc(t),i.vc(2).dismissModal("Redirecting to batch")})),i.wc(1,"numericId"),i.dd(2),i.wc(3,"numericId"),i.fc()}if(2&n){var s=i.vc().$implicit;i.Ec("routerLink","/manufacturing/batches/view/",i.xc(1,2,s.node.incomingBatch.id),""),i.Mb(2),i.fd(" ",i.xc(3,4,s.node.incomingBatch.id)," ")}}function f(n,e){1&n&&(i.gc(0,"span",10),i.dd(1,"N/A"),i.fc())}function b(n,e){if(1&n&&(i.gc(0,"tr"),i.gc(1,"th"),i.dd(2),i.wc(3,"numericId"),i.bc(4,"br"),i.bd(5,d,3,3,"span",8),i.fc(),i.gc(6,"td"),i.dd(7),i.fc(),i.gc(8,"td"),i.dd(9),i.wc(10,"simpleDate"),i.fc(),i.gc(11,"td"),i.bd(12,u,4,6,"a",9),i.bd(13,l,2,0,"span",8),i.fc(),i.gc(14,"td"),i.bd(15,g,4,6,"a",9),i.bd(16,f,2,0,"span",8),i.fc(),i.gc(17,"td"),i.dd(18),i.fc(),i.fc()),2&n){var t=e.$implicit;i.Mb(2),i.fd(" ",i.xc(3,9,t.node.id),""),i.Mb(3),i.Cc("ngIf",t.node.outgoingBatch&&t.node.outgoingBatch.dateSent),i.Mb(2),i.ed(t.node.manufacturer.company),i.Mb(2),i.ed(i.xc(10,11,t.node.due)),i.Mb(3),i.Cc("ngIf",t.node.outgoingBatch),i.Mb(1),i.Cc("ngIf",!t.node.outgoingBatch),i.Mb(2),i.Cc("ngIf",t.node.incomingBatch),i.Mb(1),i.Cc("ngIf",!t.node.incomingBatch),i.Mb(2),i.ed(t.node.status.name)}}function m(n,e){1&n&&(i.gc(0,"tr"),i.gc(1,"td",12),i.gc(2,"span",13),i.dd(3,"No jobs yet."),i.fc(),i.fc(),i.fc())}var p=function(){function n(n){this.modalService=n}return Object.defineProperty(n.prototype,"jobs",{set:function(n){n&&(this._jobs=n)},enumerable:!1,configurable:!0}),n.prototype.ngOnInit=function(){},n.prototype.dismissModal=function(n){void 0===n&&(n=null),this.modalService.dismissAll(n)},n.\u0275fac=function(e){return new(e||n)(i.ac(s.i))},n.\u0275cmp=i.Ub({type:n,selectors:[["submission-view-jobs"]],inputs:{jobs:"jobs"},decls:24,vars:2,consts:[[1,"row","py-3","box-divider-bottom","justify-content-start","mb-4"],[1,"col"],[1,"mb-2"],[1,"row"],[1,"col","px-0"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","text-muted",4,"ngIf"],[3,"routerLink","click",4,"ngIf"],[1,"text-muted"],[3,"routerLink","click"],["colspan","72"],[1,"text-muted","text-center"]],template:function(n,e){1&n&&(i.gc(0,"div",0),i.gc(1,"div",1),i.gc(2,"h5",2),i.dd(3,"Jobs"),i.fc(),i.fc(),i.fc(),i.gc(4,"div",3),i.gc(5,"div",4),i.gc(6,"table",5),i.gc(7,"thead"),i.gc(8,"tr"),i.gc(9,"th"),i.dd(10,"ID"),i.fc(),i.gc(11,"th"),i.dd(12,"Supplier"),i.fc(),i.gc(13,"th"),i.dd(14,"Due"),i.fc(),i.gc(15,"th"),i.dd(16,"Batch Out"),i.fc(),i.gc(17,"th"),i.dd(18,"Batch In"),i.fc(),i.gc(19,"th"),i.dd(20,"Status"),i.fc(),i.fc(),i.fc(),i.gc(21,"tbody"),i.bd(22,b,19,13,"tr",6),i.bd(23,m,4,0,"tr",7),i.fc(),i.fc(),i.fc(),i.fc()),2&n&&(i.Mb(22),i.Cc("ngForOf",e._jobs),i.Mb(1),i.Cc("ngIf",!e._jobs))},directives:[c.t,c.u,o.e],pipes:[a.a,r.a],styles:[""]}),n}()},c3nT:function(n,e,t){"use strict";t.r(e),t.d(e,"SubmissionModule",(function(){return Jt}));var i,s=t("ofXK"),c=t("3Pt+"),o=t("PCNd"),a=t("S6Vu"),r=t("HKlZ"),d=t("5Ndf"),u={id:"/base_metals/6",name:"Silver"},l=t("zOkP"),g=t("rYPC"),f=t("uA1o"),b=t("BaBC"),m=t("Nlbt"),p=t("1uah"),h=t("CIHE"),v=t("9TxS"),y=t("uzfv"),C=t("cXB8"),M=t("QVjv"),S=t("Vf4f"),_=t("fXoL"),P=t("1kSV"),k=t("tyNb"),w=t("5eHb"),I=t("n4kJ"),x=t("KPdS"),$=t("Xv7A"),A=t("JEAg"),T=t("XhFI"),j=t("PxxC"),O=t("wOBz"),E=t("r1eF"),N=t("ZOsW"),B=t("1QgP"),D=t("VdD3"),z=t("sMau"),R=t("SjCM"),F=t("zVvu"),L=t("9tk/"),W=t("XXSO"),U=(i=function(n,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])})(n,e)},function(n,e){function t(){this.constructor=n}i(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}),G=function(n,e,t,i){return new(t||(t=Promise))((function(s,c){function o(n){try{r(i.next(n))}catch(e){c(e)}}function a(n){try{r(i.throw(n))}catch(e){c(e)}}function r(n){var e;n.done?s(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(o,a)}r((i=i.apply(n,e||[])).next())}))},J=function(n,e){var t,i,s,c,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(c){return function(a){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,i&&(s=2&c[0]?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,i=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){o.label=c[1];break}if(6===c[0]&&o.label<s[1]){o.label=s[1],s=c;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(c);break}s[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(n,o)}catch(a){c=[6,a],i=0}finally{t=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}},X=["submissionWeightModal"];function Y(n,e){if(1&n){var t=_.hc();_.ec(0),_.gc(1,"button",44),_.rc("click",(function(){_.Pc(t);var n=_.vc(2),e=_.Mc(95);return n.modalService.open(e)})),_.dd(2," Create Manufacture Batch "),_.fc(),_.gc(3,"button",44),_.rc("click",(function(){_.Pc(t);var n=_.vc(2),e=_.Mc(97);return n.modalService.open(e)})),_.dd(4," Add to Existing Batch "),_.fc(),_.gc(5,"button",44),_.rc("click",(function(){return _.Pc(t),_.vc(2).exportAddressData()})),_.dd(6," Export Address Data "),_.fc(),_.dc()}}function H(n,e){1&n&&(_.gc(0,"button",45),_.dd(1," No Available Actions "),_.fc())}function q(n,e){if(1&n&&(_.ec(0),_.bd(1,Y,7,0,"ng-container",26),_.bd(2,H,2,0,"button",27),_.dc()),2&n){var t=_.vc();_.Mb(1),_.Cc("ngIf",t.isAdmin),_.Mb(1),_.Cc("ngIf",!t.isAdmin)}}function V(n,e){1&n&&(_.gc(0,"button",45),_.dd(1," Loading Actions... "),_.fc())}function Z(n,e){if(1&n){var t=_.hc();_.gc(0,"div",46),_.gc(1,"input",47),_.rc("click",(function(){return _.Pc(t),_.vc().selectAll()}))("ngModelChange",(function(n){return _.Pc(t),_.vc().state.allSelected=n})),_.fc(),_.bc(2,"label",48),_.fc()}if(2&n){var i=_.vc();_.Mb(1),_.Cc("ngModel",i.state.allSelected)("value",i.state.allSelected)}}function Q(n,e){1&n&&(_.gc(0,"th"),_.dd(1,"Submission"),_.fc())}function K(n,e){1&n&&(_.gc(0,"th"),_.dd(1,"Detail"),_.fc())}function nn(n,e){1&n&&(_.gc(0,"th"),_.dd(1,"Code"),_.fc())}function en(n,e){1&n&&(_.gc(0,"th"),_.dd(1,"Event Name"),_.fc())}function tn(n,e){if(1&n&&(_.gc(0,"td"),_.dd(1),_.fc()),2&n){var t=_.vc().$implicit;_.Mb(1),_.ed(null===t.submission.node.customer.event?"Kit":"Event")}}function sn(n,e){if(1&n&&(_.gc(0,"td"),_.gc(1,"a",65),_.wc(2,"numericId"),_.dd(3),_.fc(),_.fc()),2&n){var t=_.vc().$implicit;_.Mb(1),_.Ec("routerLink","/event/view/",_.xc(2,2,t.submission.node.customer.event.id),""),_.Mb(2),_.ed(t.submission.node.customer.event.name)}}function cn(n,e){if(1&n&&(_.gc(0,"td"),_.dd(1),_.fc()),2&n){var t=_.vc().$implicit;_.Mb(1),_.ed(t.submission.node.castingCode)}}function on(n,e){if(1&n&&(_.gc(0,"td"),_.dd(1),_.wc(2,"uppercase"),_.fc()),2&n){var t=_.vc().$implicit;_.Mb(1),_.ed(_.xc(2,1,t.submission.node.castingCode))}}function an(n,e){if(1&n&&(_.gc(0,"td"),_.dd(1),_.fc()),2&n){var t=_.vc().$implicit;_.Mb(1),_.ed(t.submission.node.customer.event.name)}}function rn(n,e){if(1&n&&(_.gc(0,"span"),_.dd(1," BMU "),_.bc(2,"i",66),_.fc()),2&n){var t=_.vc().$implicit;_.Sb("color-danger",!t.submission.node.baseMetalPaid)("color-success",!0===t.submission.node.baseMetalPaid),_.Mb(2),_.Sb("fa-check",!0===t.submission.node.baseMetalPaid)("fa-times",!t.submission.node.baseMetalPaid)}}function dn(n,e){if(1&n&&(_.gc(0,"span"),_.dd(1),_.wc(2,"date"),_.fc()),2&n){var t=_.vc(3);_.Mb(1),_.fd(" Elapsed: ",_.zc(2,1,1e3*t.timeElapsed,"mm:ss","UTC"),"s \xa0 ")}}function un(n,e){1&n&&_.bc(0,"span",69)}function ln(n,e){if(1&n){var t=_.hc();_.gc(0,"button",67),_.rc("click",(function(){_.Pc(t);var n=_.vc().$implicit;return _.vc(2).toggleSubmissionPhotoTimer(n.submission.node.id)})),_.bd(1,un,1,0,"span",68),_.fc()}if(2&n){var i=_.vc().$implicit,s=_.vc(2);_.Sb("fa-stop",s.model.submissionPhotoTimingMap[i.submission.node.id]&&!1===s.submitting)("fa-stopwatch-20",!s.model.submissionPhotoTimingMap[i.submission.node.id]&&!1===s.submitting)("hover",!s.model.submissionPhotoTimingMap[i.submission.node.id]||!1===s.submitting),_.Cc("disabled",s.submitting),_.Mb(1),_.Cc("ngIf",!0===s.submitting)}}function gn(n,e){if(1&n){var t=_.hc();_.gc(0,"button",70),_.rc("click",(function(){_.Pc(t);var n=_.vc().$implicit;return _.vc(2).openWeightModal(n.submission.node)})),_.fc()}if(2&n){var i=_.vc(3);_.Cc("disabled",i.submitting)}}function fn(n,e){if(1&n&&_.bc(0,"view-submission-modal",71),2&n){var t=_.vc().$implicit,i=_.vc(2);_.Cc("buttonStyle",!0)("castingCode",t.castingCodes.length?t.castingCodes[0]:null)("isAdmin",i.isAdmin)("loadingCastingCode",i.loadingCastingCode)("loadingStones",i.loadingStones)("photos",t.submission.node.submissionPhotos.edges)("stones",t.stones)("submission",t.submission.node)}}function bn(n,e){if(1&n){var t=_.hc();_.ec(0),_.gc(1,"tr"),_.wc(2,"lowercaseDashes"),_.gc(3,"td",53),_.rc("click",(function(){_.Pc(t);var n=e.$implicit;return _.vc(2).selectRow(n)})),_.gc(4,"div",46),_.gc(5,"input",54),_.rc("click",(function(){_.Pc(t);var n=e.$implicit;return _.vc(2).selectRow(n)}))("ngModelChange",(function(n){return _.Pc(t),e.$implicit.selected=n})),_.fc(),_.bc(6,"label",55),_.fc(),_.fc(),_.gc(7,"td"),_.bc(8,"i",56),_.fc(),_.gc(9,"td",57),_.rc("click",(function(){_.Pc(t);var n=e.$implicit;return _.vc(2).selectRow(n)})),_.dd(10),_.fc(),_.bd(11,tn,2,1,"td",26),_.bd(12,sn,4,4,"td",26),_.bd(13,cn,2,1,"td",26),_.bd(14,on,3,3,"td",26),_.bd(15,an,2,1,"td",26),_.gc(16,"td"),_.dd(17),_.wc(18,"titlecase"),_.bc(19,"br"),_.bd(20,rn,3,8,"span",58),_.fc(),_.gc(21,"td"),_.dd(22),_.wc(23,"currency"),_.fc(),_.gc(24,"td"),_.dd(25),_.wc(26,"simpleDateTime"),_.fc(),_.gc(27,"td",59),_.gc(28,"span"),_.dd(29),_.fc(),_.fc(),_.gc(30,"td",37),_.bd(31,dn,3,5,"span",26),_.gc(32,"div",60),_.bd(33,ln,2,8,"button",61),_.bd(34,gn,1,1,"button",62),_.bc(35,"view-submission-comms-modal",63),_.fc(),_.bd(36,fn,1,8,"view-submission-modal",64),_.fc(),_.fc(),_.dc()}if(2&n){var i=e.$implicit,s=_.vc(2);_.Mb(1),_.Pb("status-",_.xc(2,36,i.submission.node.status.name),""),_.Sb("row-blocked",!s.model.submissionPhotoTimingMap[i.submission.node.id]&&!0===s.imageLoggingSessionState)("selected",i.selected),_.Mb(4),_.Ec("id","sub-cb-",i.submission.node.id,""),_.Cc("ngModel",i.selected)("name","submission"+i.submission.node.id),_.Mb(1),_.Ec("for","sub-cb-",i.submission.node.id,""),_.Mb(2),_.Sb("text-muted",0===i.submission.node.submissionPhotos.edges.length)("text-success",i.submission.node.submissionPhotos.edges.length>0),_.Mb(2),_.ed(i.submission.node.customer.fullName),_.Mb(1),_.Cc("ngIf",null===s.model.typeEvent),_.Mb(1),_.Cc("ngIf",null===s.model.typeEvent&&null!==i.submission.node.customer.event),_.Mb(1),_.Cc("ngIf",null===s.model.typeEvent&&null===i.submission.node.customer.event),_.Mb(1),_.Cc("ngIf",!1===s.model.typeEvent),_.Mb(1),_.Cc("ngIf",!0===s.model.typeEvent),_.Mb(2),_.fd(" ",_.xc(18,38,i.submission.node.kitType.name),""),_.Mb(3),_.Cc("ngIf",i.submission.node.baseMetal&&i.submission.node.baseMetal.id!==s.metalSilver.id),_.Mb(2),_.ed(_.xc(23,40,i.submission.node.amountPaid)),_.Mb(3),_.ed(_.xc(26,42,i.submission.node.submittedAt)),_.Mb(4),_.ed(i.submission.node.status.name),_.Mb(2),_.Cc("ngIf",s.model.submissionPhotoTimingMap[i.submission.node.id]),_.Mb(2),_.Cc("ngIf",!1===s.imageLoggingSessionState||s.model.submissionPhotoTimingMap[i.submission.node.id]),_.Mb(1),_.Cc("ngIf",null===i.submission.node.customer.event&&i.submission.node.status.id===s.statusSubmissionCreated.id),_.Mb(1),_.Cc("hover",!i.submission.node.customerNotes&&i.notes&&!i.notes.length)("loadingNotes",s.loadingNotes)("submissionId",i.submission.node.id)("notes",i.notes)("customerNote",i.submission.node.customerNotes)("isAdmin",s.isAdmin),_.Mb(1),_.Cc("ngIf",!1===s.imageLoggingSessionState)}}function mn(n,e){1&n&&(_.gc(0,"tr"),_.gc(1,"td",72),_.gc(2,"p",73),_.dd(3,"No submissions found"),_.fc(),_.fc(),_.fc())}function pn(n,e){if(1&n&&(_.gc(0,"tbody"),_.gc(1,"tr",49),_.gc(2,"td",50),_.bc(3,"p",51),_.fc(),_.fc(),_.bd(4,bn,37,44,"ng-container",52),_.bd(5,mn,4,0,"tr",26),_.fc()),2&n){var t=_.vc();_.Mb(4),_.Cc("ngForOf",t.data.submissionAndInfos),_.Mb(1),_.Cc("ngIf",!t.data.submissionAndInfos.length)}}function hn(n,e){1&n&&(_.gc(0,"tr"),_.gc(1,"td"),_.gc(2,"app-loading-shimmer"),_.gc(3,"div",74),_.gc(4,"div",75),_.bc(5,"div",76),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(6,"td"),_.gc(7,"app-loading-shimmer"),_.gc(8,"div",77),_.gc(9,"div",75),_.bc(10,"div",76),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(11,"td"),_.gc(12,"app-loading-shimmer"),_.gc(13,"div",77),_.gc(14,"div",78),_.bc(15,"div",76),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(16,"td"),_.gc(17,"app-loading-shimmer"),_.gc(18,"div",77),_.gc(19,"div",79),_.bc(20,"div",76),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(21,"td"),_.gc(22,"app-loading-shimmer"),_.gc(23,"div",77),_.gc(24,"div",80),_.bc(25,"div",76),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(26,"td"),_.gc(27,"app-loading-shimmer"),_.gc(28,"div",77),_.gc(29,"div",80),_.bc(30,"div",76),_.fc(),_.gc(31,"div",81),_.bc(32,"div",82),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(33,"td"),_.gc(34,"app-loading-shimmer"),_.gc(35,"div",77),_.gc(36,"div",80),_.bc(37,"div",76),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(38,"td"),_.gc(39,"app-loading-shimmer"),_.gc(40,"div",77),_.gc(41,"div",78),_.bc(42,"div",76),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(43,"td"),_.gc(44,"app-loading-shimmer"),_.gc(45,"div",77),_.gc(46,"div",83),_.bc(47,"div",76),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(48,"td",37),_.gc(49,"app-loading-shimmer"),_.gc(50,"div",74),_.gc(51,"div",80),_.bc(52,"div",76),_.fc(),_.fc(),_.fc(),_.fc(),_.fc())}function vn(n,e){1&n&&(_.gc(0,"tbody"),_.gc(1,"tr",49),_.gc(2,"td",50),_.bc(3,"p",51),_.fc(),_.fc(),_.bd(4,hn,53,0,"tr",52),_.fc()),2&n&&(_.Mb(4),_.Cc("ngForOf"," ".repeat(3).split("")))}function yn(n,e){1&n&&(_.gc(0,"div",84),_.bc(1,"loading-ring",85),_.fc()),2&n&&(_.Mb(1),_.Cc("size",40))}function Cn(n,e){1&n&&_.bc(0,"loading-ring",85),2&n&&_.Cc("size",30)}function Mn(n,e){if(1&n&&(_.gc(0,"ng-option",95),_.dd(1),_.wc(2,"titlecase"),_.fc()),2&n){var t=e.$implicit;_.Cc("value",t),_.Mb(1),_.fd("",_.xc(2,2,t.node.company)," ")}}function Sn(n,e){if(1&n&&(_.gc(0,"label",99),_.dd(1),_.wc(2,"titlecase"),_.fc()),2&n){var t=_.vc(3);_.Mb(1),_.fd(" Notes for ",_.xc(2,1,t.model.selectedSupplier.node.company)," ")}}function _n(n,e){if(1&n){var t=_.hc();_.ec(0),_.bd(1,Sn,3,3,"label",96),_.gc(2,"textarea",97,98),_.rc("ngModelChange",(function(n){return _.Pc(t),_.vc(2).model.batchNotes=n})),_.dd(4,"                    "),_.fc(),_.dc()}if(2&n){var i=_.vc(2);_.Mb(1),_.Cc("ngIf",i.model.selectedSupplier),_.Mb(1),_.Cc("ngModel",i.model.batchNotes)}}function Pn(n,e){if(1&n){var t=_.hc();_.bc(0,"modal-header",86),_.gc(1,"div",87),_.gc(2,"form",8,88),_.gc(4,"div",89),_.gc(5,"label",90),_.dd(6,"Which Supplier?"),_.fc(),_.gc(7,"ng-select",91,92),_.rc("ngModelChange",(function(n){return _.Pc(t),_.vc().model.selectedSupplier=n})),_.bd(9,Mn,3,4,"ng-option",93),_.fc(),_.bd(10,_n,5,2,"ng-container",26),_.fc(),_.fc(),_.fc(),_.gc(11,"modal-footer",94),_.rc("modalSaved",(function(){return _.Pc(t),_.vc().createManufactureBatch()})),_.fc()}if(2&n){var i=e.$implicit,s=_.Mc(3),c=_.vc();_.Cc("modal",i),_.Mb(7),_.Cc("ngModel",c.model.selectedSupplier)("searchable",!1),_.Mb(2),_.Cc("ngForOf",c.data.suppliers),_.Mb(1),_.Cc("ngIf",c.model.selectedSupplier),_.Mb(1),_.Cc("form",s)("modal",i)("saveButtonName","Create")}}function kn(n,e){if(1&n&&(_.gc(0,"ng-option",95),_.dd(1),_.wc(2,"numericId"),_.fc()),2&n){var t=e.$implicit;_.Cc("value",t.node),_.Mb(1),_.fd("Batch #",_.xc(2,2,t.node.id)," ")}}function wn(n,e){if(1&n){var t=_.hc();_.bc(0,"modal-header",100),_.gc(1,"div",87),_.gc(2,"form",8,101),_.gc(4,"div",89),_.gc(5,"label",90),_.dd(6,"Which Batch?"),_.fc(),_.gc(7,"ng-select",102,92),_.rc("ngModelChange",(function(n){return _.Pc(t),_.vc().data.mutationBatch=n})),_.bd(9,kn,3,4,"ng-option",93),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(10,"modal-footer",94),_.rc("modalSaved",(function(){return _.Pc(t),_.vc().addSelectedToManufactureBatch()})),_.fc()}if(2&n){var i=e.$implicit,s=_.Mc(3),c=_.vc();_.Cc("modal",i),_.Mb(7),_.Cc("ngModel",c.data.mutationBatch)("searchable",!1),_.Mb(2),_.Cc("ngForOf",c.data.availableBatches),_.Mb(1),_.Cc("form",s)("modal",i)("saveButtonName","Add")}}function In(n,e){if(1&n&&(_.gc(0,"ng-option",95),_.dd(1),_.wc(2,"uppercase"),_.fc()),2&n){var t=_.vc().$implicit;_.Cc("value",t),_.Mb(1),_.fd(" ",_.xc(2,2,t.node.name)," ")}}function xn(n,e){if(1&n&&(_.ec(0),_.bd(1,In,3,4,"ng-option",113),_.dc()),2&n){var t=e.$implicit;_.Mb(1),_.Cc("ngIf","Leave as is"!==t.node.name)}}function $n(n,e){if(1&n){var t=_.hc();_.gc(0,"div",105),_.gc(1,"label",109),_.dd(2,"Measured Ring Size (optional)"),_.fc(),_.gc(3,"ng-select",110,111),_.rc("ngModelChange",(function(n){return _.Pc(t),_.vc(2).model.measuredRingSize=n})),_.bd(5,xn,2,1,"ng-container",52),_.fc(),_.bc(6,"app-error-messages",112),_.fc()}if(2&n){var i=_.Mc(4),s=_.vc(2);_.Mb(3),_.Cc("ngModel",s.model.measuredRingSize)("notFoundText",s.loadingActions?"Loading":"Nothing found")("searchable",!0),_.Mb(2),_.Cc("ngForOf",s.data.ringSizeCustoms),_.Mb(1),_.Cc("field",i)}}function An(n,e){if(1&n){var t=_.hc();_.bc(0,"modal-header",103),_.wc(1,"numericId"),_.gc(2,"div",87),_.gc(3,"form",8,104),_.gc(5,"div",105),_.gc(6,"label",106),_.dd(7,"Wax Weight"),_.fc(),_.gc(8,"input",107),_.rc("ngModelChange",(function(n){return _.Pc(t),_.vc().model.waxWeight=n})),_.fc(),_.fc(),_.bd(9,$n,7,5,"div",108),_.fc(),_.fc(),_.gc(10,"modal-footer",94),_.rc("modalSaved",(function(){return _.Pc(t),_.vc().markAsReceived()})),_.fc()}if(2&n){var i=e.$implicit,s=_.Mc(4),c=_.vc();_.Ec("title","Check In Item - #",_.xc(1,7,c.data.submission.id),""),_.Cc("modal",i),_.Mb(8),_.Cc("ngModel",c.model.waxWeight),_.Mb(1),_.Cc("ngIf",c.data.submission.kitType.id===c.TYPE_RING),_.Mb(1),_.Cc("form",s)("modal",i)("saveButtonName","Confirm")}}var Tn,jn,On,En=function(n){return{searchField:n,searchQuery:null}},Nn=function(n,e,t,i){return[n,e,t,i]},Bn=function(n){function e(e,t,i,s,c,o,a,r,g,f,b,m,p,h){var v=n.call(this)||this;return v.appUserService=e,v.castingCodeService=t,v.exportDataService=i,v.imageLoggingSessionService=s,v.jobService=c,v.modalService=o,v.ringSizeCustomService=a,v.router=r,v.stoneSubmissionService=g,v.submissionBatchService=f,v.submissionNoteService=b,v.submissionService=m,v.supplierService=p,v.toastrService=h,v.submissionStatusPending="pending",v.submissionStatusReceived="received",v.submissionStatusCreated="created",v.submissionStatusCompleted="completed",v.submissionId="Submission ID",v.customerName="Customer Name",v.eventName="Event Name",v.castingCode="Casting Code",v.TYPE_RING=l.d,v.statusSubmissionCreated=d.e,v.metalSilver=u,v.model={batchNotes:null,createImageLoggingSessionMap:{},currentSubmissionSearch:null,selectedSupplier:null,status:v.submissionStatusCreated,submissionPhotoTimingMap:{},typeEvent:null,waxWeight:null,measuredRingSize:null},v.data={availableBatches:[],mutationBatch:null,selections:[],submissionAndInfos:[],suppliers:[],submission:null,ringSizeCustoms:[]},v.imageLoggingSessionState=!1,v.isAdmin=!1,v.loadingActions=!0,v.loadingStones=!0,v.loadingCastingCode=!0,v.loadingNotes=!0,v.submitting=!1,v.timeElapsed=0,v}return U(e,n),e.prototype.unloadNotification=function(n){var e=this;this.data.submissionAndInfos.some((function(n){return e.model.submissionPhotoTimingMap[n.submission.node.id]}))&&(n.returnValue=!0)},e.prototype.ngOnDestroy=function(){return G(this,void 0,void 0,(function(){var n,e,t;return J(this,(function(i){switch(i.label){case 0:n=0,e=this.data.submissionAndInfos,i.label=1;case 1:return n<e.length?this.model.submissionPhotoTimingMap[(t=e[n]).submission.node.id]?[4,this.endImageLoggingSession(t.submission.node)]:[3,3]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.ngOnInit=function(){return G(this,void 0,void 0,(function(){var n=this;return J(this,(function(e){switch(e.label){case 0:return this.appUserService.getMe().subscribe((function(e){n.isAdmin=n.appUserService.isAdmin(e.data.appUser.roles),n.isAdmin?Object(p.a)(n.submissionBatchService.list(null,null,!1,!0,"DESC",!1),n.supplierService.list(!0),n.ringSizeCustomService.list()).subscribe((function(e){var t=e[0],i=e[2];n.data.suppliers=e[1].data.suppliers.edges,n.data.availableBatches=t.data.submissionBatches.edges,n.data.ringSizeCustoms=i.data.ringSizeCustoms.edges,n.loadingActions=!1})):n.loadingActions=!1})),this.liveTimeInterval=setInterval((function(){n.liveTimeCreate()}),500),[4,this.updateTable(null)];case 1:return e.sent(),[2]}}))}))},e.prototype.updateTableWithSearch=function(n,e){return G(this,void 0,void 0,(function(){var n=this;return J(this,(function(t){return this.state.loading=!0,this.state.allSelected=!1,this.data.selections=[],this.model.currentSubmissionSearch&&this.model.currentSubmissionSearch.unsubscribe(),this.model.currentSubmissionSearch=e.subscribe((function(e){var t=JSON.parse(JSON.stringify(n.data.submissionAndInfos));n.data.submissionAndInfos=[];for(var i=0,s=e.data.submissions.edges;i<s.length;i++){for(var c=s[i],o=!1,a=0,r=t;a<r.length;a++){var d=r[a];d.submission.node.id===c.node.id&&(o=d.selected)}n.data.submissionAndInfos.push({submission:c,selected:o,stones:[],castingCodes:[],notes:[]})}for(var u=[],l=[],g=0,f=n.data.submissionAndInfos;g<f.length;g++){var b=f[g];b.submission.node.kit&&l.push(b.submission.node.kit.id),u.push(b.submission.node.id.replace(/^\D+/,""))}n.castingCodeService.listByKitIds(l).subscribe((function(e){for(var t=0,i=n.data.submissionAndInfos;t<i.length;t++)for(var s=i[t],c=0,o=e.data.castingCodes.edges;c<o.length;c++){var a=o[c];s.submission.node.castingCode===a.node.code&&s.castingCodes.push(a.node)}n.loadingCastingCode=!1})),n.stoneSubmissionService.listBySubmission(u).subscribe((function(e){for(var t=0,i=n.data.submissionAndInfos;t<i.length;t++)for(var s=i[t],c=0,o=e.data.stoneSubmissions.edges;c<o.length;c++){var a=o[c];s.submission.node.id===a.node.submission.id&&s.stones.push(a)}n.loadingStones=!1})),n.submissionNoteService.listBySubmission(u).subscribe((function(e){for(var t=0,i=n.data.submissionAndInfos;t<i.length;t++)for(var s=i[t],c=0,o=e.data.submissionNotes.edges;c<o.length;c++){var a=o[c];s.submission.node.id===a.node.submission.id&&s.notes.push(a)}n.loadingNotes=!1})),n.handlePagination(e.data.submissions)})),[2]}))}))},e.prototype.updateTable=function(n){return G(this,void 0,void 0,(function(){var e,t,i;return J(this,(function(s){return e=null,t=null,i=null,this.model.status===this.submissionStatusPending?e=d.l.id:this.model.status===this.submissionStatusReceived?e=d.o.id:this.model.status===this.submissionStatusCreated?t=!0:this.model.status===this.submissionStatusCompleted&&(i=!0),this.updateTableWithSearch(null,this.submissionService.listAllSubmission(n,"DESC",this.model.typeEvent,e,t,i)),[2]}))}))},e.prototype.search=function(n){if(n.searchQuery&&n.searchField){var e=null,t=null,i=null;this.model.status===this.submissionStatusPending?e=d.l.id:this.model.status===this.submissionStatusReceived?e=d.o.id:this.model.status===this.submissionStatusCreated?t=!0:this.model.status===this.submissionStatusCompleted&&(i=!0);var s=null;switch(n.searchField){case this.submissionId:s=this.submissionService.listAllSubmission(null,"DESC",this.model.typeEvent,e,t,i,n.searchQuery);break;case this.customerName:s=this.submissionService.listAllSubmission(null,"DESC",this.model.typeEvent,e,t,i,null,n.searchQuery);break;case this.eventName:s=this.submissionService.listAllSubmission(null,"DESC",this.model.typeEvent,e,t,i,null,null,n.searchQuery);break;case this.castingCode:s=this.submissionService.listAllSubmission(null,"DESC",this.model.typeEvent,e,t,i,null,null,null,n.searchQuery)}this.updateTableWithSearch(null,s)}else this.updateTable(null)},e.prototype.onChangeStatusFilter=function(){return G(this,void 0,void 0,(function(){return J(this,(function(n){return this.softReset(),this.updateTable(null),[2]}))}))},e.prototype.startTimer=function(){var n=this;this.timeElapsed=0,this.interval=setInterval((function(){n.timeElapsed++}),1e3)},e.prototype.endTimer=function(){clearInterval(this.interval)},e.prototype.liveTimeCreate=function(){var n=new Date;this.liveTime=("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)+":"+("0"+n.getSeconds()).slice(-2)},e.prototype.toggleSubmissionPhotoTimer=function(n){return G(this,void 0,void 0,(function(){var e,t,i;return J(this,(function(s){switch(s.label){case 0:this.submitting=!0,e=0,t=this.data.submissionAndInfos,s.label=1;case 1:return e<t.length?(i=t[e]).submission.node.id!==n?[3,6]:this.model.submissionPhotoTimingMap[i.submission.node.id]?[3,3]:[4,this.createImageLoggingSession(i.submission.node)]:[3,9];case 2:return s.sent(),[3,5];case 3:return[4,this.endImageLoggingSession(i.submission.node)];case 4:s.sent(),s.label=5;case 5:return[3,8];case 6:return this.model.submissionPhotoTimingMap[i.submission.node.id]?(this.model.submissionPhotoTimingMap[i.submission.node.id]=!1,[4,this.endImageLoggingSession(i.submission.node)]):[3,8];case 7:s.sent(),s.label=8;case 8:return e++,[3,1];case 9:return this.submitting=!1,[2]}}))}))},e.prototype.createImageLoggingSession=function(n){return G(this,void 0,void 0,(function(){var e,t,i;return J(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),e=this.model.createImageLoggingSessionMap,t=n.id,[4,this.imageLoggingSessionService.create({startTime:(new Date).toISOString(),submission:n.id})];case 1:return e[t]=s.sent(),this.imageLoggingSessionState=!0,this.startTimer(),this.toastrService.success("Started photo timing session for submission "+n.kitType.name+" ("+n.customer.fullName+")"),this.model.submissionPhotoTimingMap[n.id]=!this.model.submissionPhotoTimingMap[n.id],[3,3];case 2:return i=s.sent(),this.toastrService.error("Error starting image logging session!"),console.error(i),[3,3];case 3:return[2]}}))}))},e.prototype.endImageLoggingSession=function(n){return G(this,void 0,void 0,(function(){var e;return J(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.imageLoggingSessionService.updateEndTime({id:this.model.createImageLoggingSessionMap[n.id].createImageLoggingSession.id,endTime:(new Date).toISOString()})];case 1:return t.sent(),this.imageLoggingSessionState=!1,this.endTimer(),this.toastrService.success("Ended photo timing session for "+n.kitType.name+" ("+n.customer.fullName+")"),this.model.submissionPhotoTimingMap[n.id]=!1,[3,3];case 2:return e=t.sent(),this.toastrService.error("Error stopping image logging session!"),console.error(e),[3,3];case 3:return[2]}}))}))},e.prototype.selectRow=function(n){if(!this.submitting)if(n.selected){n.selected=!n.selected;var e=this.data.selections.findIndex((function(e){return e.submission.node.id===n.submission.node.id}));this.data.selections.splice(e,1)}else n.selected=!0,this.data.selections.push(n)},e.prototype.selectAll=function(){if(!this.submitting){if(this.state.allSelected=!this.state.allSelected,!this.state.allSelected)for(var n=0,e=this.data.submissionAndInfos;n<e.length;n++)(s=e[n]).selected=!0,this.selectRow(s);for(var t=0,i=this.data.submissionAndInfos;t<i.length;t++){var s;(s=i[t]).selected=this.state.allSelected,this.state.allSelected&&-1===this.data.selections.indexOf(s)&&this.data.selections.push(s)}}},e.prototype.createManufactureBatch=function(){var n=this;if(!this.submitting&&this.data.selections.length){this.submitting=!0;var e=(new Date).toISOString();this.toastrService.success(null,"Creating Batch"),this.submissionBatchService.create({status:d.g.id,createdAt:e,updatedAt:e,supplier:this.model.selectedSupplier.node.id,notes:this.model.batchNotes}).subscribe((function(e){n.data.mutationBatch=e.data.createSubmissionBatch,n.toastrService.success(null,"Batch Created"),n.addSelectedToManufactureBatch()}))}},e.prototype.addSelectedToManufactureBatch=function(){for(var n=this,e=(new Date).toISOString(),t=0,i=0,s=this.toastrService.success(null,"Adding Items to Batch",{timeOut:3e4}),c=0,o=this.data.selections;c<o.length;c++){var a=o[c];if(a.submission.node.waxWeight){var r=a.submission.node.jobs.edges.find((function(n){return!1===n.node.complete}));i+=1,(r?this.jobService.updateOutgoingBatch({id:r.node.id,outgoingBatch:this.data.mutationBatch.id,status:d.g.id}):this.jobService.create({submission:a.submission.node.id,manufacturer:this.data.mutationBatch.supplier.id,status:d.g.id,outgoingBatch:this.data.mutationBatch.id,complete:!1,rush:!1,onHold:!1,createdAt:e})).subscribe((function(e){t+=1;for(var c=0,o=n.data.selections;c<o.length;c++){var a=o[c];if(e.data.updateJob&&e.data.updateJob.submission.id===a.submission.node.id){a.submission.node.status=d.g;break}if(e.data.createJob&&e.data.createJob.submission.id===a.submission.node.id){a.submission.node.status=d.g;break}}t===i?(s.toastRef.close(),n.toastrService.success(null,"Added "+i+" Items to Batch"),n.router.navigate(["manufacturing","batches","view",n.data.mutationBatch.id.replace(/\D/g,"")])):(s.toastRef.componentInstance.title="Added "+t+"/"+i+" Items to Batch",s.toastRef.timeoutReset())}))}else this.toastrService.info(null,"Item by "+a.submission.node.customer.fullName+" must be received and logged first")}0===i&&(s.toastRef.close(),this.submitting=!1)},e.prototype.resetSelections=function(){this.data.selections=[];for(var n=0,e=this.data.submissionAndInfos;n<e.length;n++)e[n].selected=!1},e.prototype.previousPage=function(){this.resetSelections(),n.prototype.previousPage.call(this)},e.prototype.nextPage=function(){this.resetSelections(),n.prototype.nextPage.call(this)},e.prototype.exportAddressData=function(){if(this.state.exporting=!0,this.data.selections.length<1)return this.toastrService.error("You must select at least one submission."),void(this.state.exporting=!1);for(var n,e=[],t=[],i=0,s=this.data.selections;i<s.length;i++)n=this.exportDataService.flattenObject(s[i],e),t.push(n.data),e=n.headers;this.exportDataService.whiteListColumns(["submission.node.id","fullName","address1","address2","city","county","postcode","country","email","castingCode"],t),this.exportDataService.renameColumns({"submission.node.id":"Order Reference"},t),this.exportDataService.addStaticValues({weight:.03,packageSize:"large letter",serviceCode:"BPR1",serviceRegisterCode:"01"},t),this.exportDataService.exportToCsv("submission_export_"+(new Date).toLocaleString(),Object.keys(t[0]),t),this.toastrService.success("Exported and downloading file"),this.state.exporting=!1},e.prototype.openWeightModal=function(n){this.modalService.open(this.submissionWeightModal,{keyboard:!1,centered:!0,backdrop:"static",size:"sm"}),this.data.submission=n},e.prototype.markAsReceived=function(){return G(this,void 0,void 0,(function(){var n,e,t,i,s,c;return J(this,(function(o){switch(o.label){case 0:return this.data.submission?(n=null,e=this.model.waxWeight,t=this.model.measuredRingSize,this.model.waxWeight=null,this.model.measuredRingSize=null,t&&(n=t.node.id),i=this.data.submission,this.toastrService.info("Updating submission","Processing"),i.markingAsReceived=!0,s={id:i.id,status:d.o.id,updatedAt:(new Date).toISOString(),waxWeight:e,measuredRingSize:n},[4,this.submissionService.update(s)]):(this.toastrService.warning("No submission selected","Warning!"),[2]);case 1:return(c=o.sent()).data&&c.data.updateSubmission.status.id===d.o.id&&(i.status={id:c.data.updateSubmission.status.id,name:c.data.updateSubmission.status.name,partnerComplete:c.data.updateSubmission.status.partnerComplete,customerComplete:c.data.updateSubmission.status.customerComplete,__typename:"Status"},i.waxWeight=e,t&&(i.measuredRingSize=t.node),this.toastrService.success("Submission ("+i.castingCode+") has been updated.","Complete")),i.markingAsReceived=!1,this.data.submission=null,[2]}}))}))},e.\u0275fac=function(n){return new(n||e)(_.ac(m.a),_.ac(v.a),_.ac(y.a),_.ac(g.a),_.ac(M.a),_.ac(P.i),_.ac(C.a),_.ac(k.b),_.ac(h.a),_.ac(f.a),_.ac(S.a),_.ac(a.a),_.ac(b.a),_.ac(w.b))},e.\u0275cmp=_.Ub({type:e,selectors:[["ng-component"]],viewQuery:function(n,e){var t;1&n&&_.jd(X,!0),2&n&&_.Lc(t=_.sc())&&(e.submissionWeightModal=t.first)},hostBindings:function(n,e){1&n&&_.rc("beforeunload",(function(n){return e.unloadNotification(n)}),!1,_.Oc)},features:[_.Jb],decls:100,vars:60,consts:[["subtitle","All Created Submissions","title","All Submissions"],[1,"container","form-container"],[1,"row","mb-2","transparent","justify-content-center"],[1,"col"],[1,"bd-callout","bd-callout-warning"],[1,"language-term"],[1,"token","input"],[1,"token","prompt"],["novalidate",""],["allSubmissionsForm","ngForm"],[1,"row","mt-5","transparent","justify-content-center"],[1,"row","text-center"],[1,"col-sm-5"],["data-toggle","buttons",1,"btn-group","btn-group-toggle"],[1,"btn","btn-primary","nav-group"],["autocomplete","off","id","allSubmissions","name","allSubmissions","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","eventSubmissions","name","eventSubmissions","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","kitSubmissions","name","kitSubmissions","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","allStatuses","name","allStatuses","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","statusCreated","name","statusCreated","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","statusReceived","name","statusReceived","type","radio",3,"ngModel","value","change","ngModelChange"],["autocomplete","off","id","statusCompleted","name","statusCompleted","type","radio",3,"ngModel","value","change","ngModelChange"],[1,"col-sm-2"],["ngbDropdown","",1,"d-inline-block"],["id","sortMenu","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["aria-labelledby","sortMenu","ngbDropdownMenu",""],[4,"ngIf"],["class","btn btn-outline-primary","ngbDropdownItem","",4,"ngIf"],[1,"row","mt-3"],[1,"col-12"],[1,"tc"],[3,"setSearch","searchFields","searchEmitter"],[1,"table-responsive"],[1,"table","list-view"],[1,"shrink","checkbox"],["class","checkbox-wrapper checkbox-inline","style","margin: 0;",4,"ngIf"],[1,"shrink"],[1,"tr"],["class","text-center",4,"ngIf"],[3,"state","nextPage","previousPage"],[3,"size",4,"ngIf"],["modalCreateSupplierBatch",""],["modalAddToManufactureBatch",""],["submissionWeightModal",""],["ngbDropdownItem","",1,"btn","btn-outline-primary",3,"click"],["ngbDropdownItem","",1,"btn","btn-outline-primary"],[1,"checkbox-wrapper","checkbox-inline",2,"margin","0"],["id","selectAll","name","selectAll","type","checkbox",3,"ngModel","value","click","ngModelChange"],["for","selectAll"],[1,"spacer",2,"height","21px"],["colspan","42"],[1,"selected-text"],[4,"ngFor","ngForOf"],[1,"pr-0","checkbox",3,"click"],["type","checkbox",3,"ngModel","name","id","click","ngModelChange"],[3,"for"],[1,"fas","fa-camera"],[3,"click"],[3,"color-danger","color-success",4,"ngIf"],[1,"status"],[1,"btn-group"],["class","btn icon-btn-outline mx-1 fas","type","button",3,"fa-stop","fa-stopwatch-20","hover","disabled","click",4,"ngIf"],["class","btn icon-btn-outline mx-1 fas fa-clipboard-check hover text-danger","type","button",3,"disabled","click",4,"ngIf"],[3,"hover","loadingNotes","submissionId","notes","customerNote","isAdmin"],[3,"buttonStyle","castingCode","isAdmin","loadingCastingCode","loadingStones","photos","stones","submission",4,"ngIf"],[3,"routerLink"],[1,"fas"],["type","button",1,"btn","icon-btn-outline","mx-1","fas",3,"disabled","click"],["aria-hidden","true","class","spinner-border spinner-border-sm",4,"ngIf"],["aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","icon-btn-outline","mx-1","fas","fa-clipboard-check","hover","text-danger",3,"disabled","click"],[3,"buttonStyle","castingCode","isAdmin","loadingCastingCode","loadingStones","photos","stones","submission"],["colspan","6"],[1,"text-muted","text-center"],[1,"row","align-items-center","justify-content-center"],[1,"col-4"],[1,"shimmer","py-2"],[1,"row","align-items-center"],[1,"col-10"],[1,"col-5"],[1,"col-6"],[1,"col-2"],[1,"shimmer","pl-1","py-2"],[1,"col-8"],[1,"text-center"],[3,"size"],["title","Create Supplier Batch?",3,"modal"],[1,"modal-body"],["createSupplierBatchModalForm","ngForm"],[1,"form-group","mb-0"],["for","selectSupplier",1,"req"],["appShowErrorInputClass","","id","selectSupplier","name","selectSupplier","placeholder","-- Please Select --","required","",3,"ngModel","searchable","ngModelChange"],["selectSupplier","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"form","modal","saveButtonName","modalSaved"],[3,"value"],["class","mt-3","for","batchNotes",4,"ngIf"],["id","batchNotes","maxlength","511","name","batchNotes",1,"col-12","ta-medium-height",3,"ngModel","ngModelChange"],["batchNotes","ngModel"],["for","batchNotes",1,"mt-3"],["title","Add To Batch",3,"modal"],["addToManufactureBatchModalForm","ngForm"],["appShowErrorInputClass","","id","selectBatch","name","selectBatch","placeholder","-- Please Select --","required","",3,"ngModel","searchable","ngModelChange"],[3,"modal","title"],["updateWaxWeightForm","ngForm"],[1,"form-group"],["for","waxWeight",1,"req"],["appShowErrorInputClass","","id","waxWeight","maxlength","255","min","0","name","waxWeight","placeholder","0.000g","required","","type","number",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],["for","measuredRingSize",1,"req"],["appShowErrorInputClass","","id","measuredRingSize","name","measuredRingSize","placeholder","-- Please Select--",3,"ngModel","notFoundText","searchable","ngModelChange"],["measuredRingSize","ngModel"],[3,"field"],[3,"value",4,"ngIf"]],template:function(n,e){1&n&&(_.bc(0,"page-title",0),_.gc(1,"div",1),_.gc(2,"div",2),_.gc(3,"div",3),_.gc(4,"div",4),_.gc(5,"h4"),_.dd(6,"Sync the Camera Time"),_.fc(),_.gc(7,"p"),_.dd(8," Before you start photographing, ensure that the camera or device is synchronised to the second with the server and UK time. "),_.bc(9,"br"),_.dd(10," The current live time is: "),_.gc(11,"strong"),_.dd(12),_.fc(),_.bc(13,"br"),_.dd(14," Alternatively, you can see the server time by entering the following command from your CLI "),_.fc(),_.gc(15,"pre",5),_.dd(16,"        "),_.gc(17,"code",5),_.dd(18,"\n            "),_.gc(19,"span",6),_.dd(20,"\n                "),_.gc(21,"span",7),_.dd(22,"$ "),_.fc(),_.dd(23),_.fc(),_.dd(24,"\n        "),_.fc(),_.dd(25,"\n    "),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(26,"form",8,9),_.gc(28,"div",10),_.gc(29,"div",3),_.gc(30,"div",11),_.gc(31,"div",12),_.gc(32,"div",13),_.gc(33,"label",14),_.gc(34,"input",15),_.rc("change",(function(){return e.onChangeStatusFilter()}))("ngModelChange",(function(n){return e.model.typeEvent=n})),_.fc(),_.dd(35," All "),_.fc(),_.gc(36,"label",14),_.gc(37,"input",16),_.rc("change",(function(){return e.onChangeStatusFilter()}))("ngModelChange",(function(n){return e.model.typeEvent=n})),_.fc(),_.dd(38," Event "),_.fc(),_.gc(39,"label",14),_.gc(40,"input",17),_.rc("change",(function(){return e.onChangeStatusFilter()}))("ngModelChange",(function(n){return e.model.typeEvent=n})),_.fc(),_.dd(41," Kit "),_.fc(),_.fc(),_.fc(),_.gc(42,"div",12),_.gc(43,"div",13),_.gc(44,"label",14),_.gc(45,"input",18),_.rc("change",(function(){return e.onChangeStatusFilter()}))("ngModelChange",(function(n){return e.model.status=n})),_.fc(),_.dd(46," All "),_.fc(),_.gc(47,"label",14),_.gc(48,"input",19),_.rc("change",(function(){return e.onChangeStatusFilter()}))("ngModelChange",(function(n){return e.model.status=n})),_.fc(),_.dd(49," Created "),_.fc(),_.gc(50,"label",14),_.gc(51,"input",20),_.rc("change",(function(){return e.onChangeStatusFilter()}))("ngModelChange",(function(n){return e.model.status=n})),_.fc(),_.dd(52," Received "),_.fc(),_.gc(53,"label",14),_.gc(54,"input",21),_.rc("change",(function(){return e.onChangeStatusFilter()}))("ngModelChange",(function(n){return e.model.status=n})),_.fc(),_.dd(55," Completed "),_.fc(),_.fc(),_.fc(),_.gc(56,"div",22),_.gc(57,"div",23),_.gc(58,"button",24),_.dd(59,"Action"),_.fc(),_.gc(60,"div",25),_.bd(61,q,3,2,"ng-container",26),_.bd(62,V,2,0,"button",27),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(63,"div",28),_.gc(64,"div",29),_.gc(65,"div",30),_.gc(66,"search",31),_.rc("searchEmitter",(function(n){return e.search(n)})),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(67,"div",32),_.gc(68,"table",33),_.gc(69,"thead"),_.gc(70,"tr"),_.gc(71,"th",34),_.bd(72,Z,3,2,"div",35),_.fc(),_.bc(73,"th",36),_.gc(74,"th"),_.dd(75,"Customer"),_.fc(),_.bd(76,Q,2,0,"th",26),_.bd(77,K,2,0,"th",26),_.bd(78,nn,2,0,"th",26),_.bd(79,en,2,0,"th",26),_.gc(80,"th"),_.dd(81,"Type"),_.fc(),_.gc(82,"th"),_.dd(83,"Paid (\xa3)"),_.fc(),_.gc(84,"th"),_.dd(85,"Submitted"),_.fc(),_.gc(86,"th"),_.dd(87,"Status"),_.fc(),_.bc(88,"th",37),_.fc(),_.fc(),_.bd(89,pn,6,2,"tbody",26),_.bd(90,vn,5,1,"tbody",26),_.fc(),_.bd(91,yn,2,1,"div",38),_.fc(),_.gc(92,"table-controls",39),_.rc("nextPage",(function(){return e.nextPage()}))("previousPage",(function(){return e.previousPage()})),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.bd(93,Cn,1,1,"loading-ring",40),_.bd(94,Pn,12,8,"ng-template",null,41,_.cd),_.bd(96,wn,11,7,"ng-template",null,42,_.cd),_.bd(98,An,11,9,"ng-template",null,43,_.cd)),2&n&&(_.Mb(12),_.ed(e.liveTime),_.Mb(11),_.fd("\n                ",' heroku run -a management-tool-api "{ while true ; do date ; sleep 0.1 ; done } | uniq"',"\n            "),_.Mb(5),_.Sb("form-blocked",!0===e.submitting),_.Mb(5),_.Sb("active",null===e.model.typeEvent),_.Nb("disabled",e.state.loading||e.imageLoggingSessionState),_.Mb(1),_.Cc("ngModel",e.model.typeEvent)("value",null),_.Mb(2),_.Sb("active",!0===e.model.typeEvent),_.Nb("disabled",e.state.loading||e.imageLoggingSessionState),_.Mb(1),_.Cc("ngModel",e.model.typeEvent)("value",!0),_.Mb(2),_.Sb("active",!1===e.model.typeEvent),_.Nb("disabled",e.state.loading||e.imageLoggingSessionState),_.Mb(1),_.Cc("ngModel",e.model.typeEvent)("value",!1),_.Mb(4),_.Sb("active",null===e.model.status),_.Nb("disabled",e.state.loading||e.imageLoggingSessionState),_.Mb(1),_.Cc("ngModel",e.model.status)("value",null),_.Mb(2),_.Sb("active",e.model.status===e.submissionStatusCreated),_.Nb("disabled",e.state.loading||e.imageLoggingSessionState),_.Mb(1),_.Cc("ngModel",e.model.status)("value",e.submissionStatusCreated),_.Mb(2),_.Sb("active",e.model.status===e.submissionStatusReceived),_.Nb("disabled",e.state.loading||e.imageLoggingSessionState),_.Mb(1),_.Cc("ngModel",e.model.status)("value",e.submissionStatusReceived),_.Mb(2),_.Sb("active",e.model.status===e.submissionStatusCompleted),_.Nb("disabled",e.state.loading||e.imageLoggingSessionState),_.Mb(1),_.Cc("ngModel",e.model.status)("value",e.submissionStatusCompleted),_.Mb(7),_.Cc("ngIf",!e.loadingActions),_.Mb(1),_.Cc("ngIf",e.loadingActions),_.Mb(4),_.Cc("setSearch",_.Gc(53,En,e.customerName))("searchFields",_.Jc(55,Nn,e.submissionId,e.customerName,e.castingCode,e.eventName)),_.Mb(6),_.Cc("ngIf",!e.state.loading),_.Mb(4),_.Cc("ngIf",null===e.model.typeEvent),_.Mb(1),_.Cc("ngIf",null===e.model.typeEvent),_.Mb(1),_.Cc("ngIf",!1===e.model.typeEvent),_.Mb(1),_.Cc("ngIf",!0===e.model.typeEvent),_.Mb(10),_.Cc("ngIf",!e.state.loading),_.Mb(1),_.Cc("ngIf",e.state.loading),_.Mb(1),_.Cc("ngIf",e.state.loading),_.Mb(1),_.Cc("state",e.state),_.Mb(1),_.Cc("ngIf",e.submitting))},directives:[I.a,c.z,c.l,c.m,c.s,c.d,c.k,c.n,P.c,P.h,P.f,s.u,x.a,$.a,P.e,c.a,s.t,A.a,k.e,T.a,j.a,O.a,E.a,N.a,B.a,c.u,D.a,N.n,c.g,c.q,z.a],pipes:[R.a,s.G,F.a,L.a,W.a,s.I,s.f],styles:[""]}),e}(r.a),Dn=t("oZ8P"),zn=t("lTCR"),Rn=t.n(zn),Fn=Rn()(Tn||(jn=["\n    query submissionsByIdSimple($id: ID!) {\n        submission(id: $id) {\n            id\n            status {\n                id\n                name\n            }\n            kitType {\n                id\n                name\n            }\n            submittedAt\n            amountPaid\n            totalPrice\n            customer {\n                id\n                fullName\n                email\n                address1\n                address2\n                city\n                county\n                postcode\n                country\n            }\n        }\n    }\n"],On=["\n    query submissionsByIdSimple($id: ID!) {\n        submission(id: $id) {\n            id\n            status {\n                id\n                name\n            }\n            kitType {\n                id\n                name\n            }\n            submittedAt\n            amountPaid\n            totalPrice\n            customer {\n                id\n                fullName\n                email\n                address1\n                address2\n                city\n                county\n                postcode\n                country\n            }\n        }\n    }\n"],Object.defineProperty?Object.defineProperty(jn,"raw",{value:On}):jn.raw=On,Tn=jn)),Ln=t("/IUn"),Wn=function(){function n(n){this.apollo=n}return n.prototype.getSubmissionByIdSimple=function(n){return this.apollo.query({query:Fn,variables:{id:n}})},n.\u0275fac=function(e){return new(e||n)(_.oc(Ln.b))},n.\u0275prov=_.Wb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}();function Un(n,e){if(1&n&&(_.gc(0,"pre",15),_.dd(1,"        "),_.gc(2,"code",15),_.dd(3,"\n            "),_.gc(4,"span",16),_.dd(5,"\n                "),_.gc(6,"span",17),_.dd(7,"Submission ID: "),_.fc(),_.dd(8),_.fc(),_.dd(9,"\n        "),_.fc(),_.dd(10,"\n    "),_.fc()),2&n){_.vc();var t=_.Mc(6);_.Mb(8),_.fd("\n              ",t.value,"\n            ")}}function Gn(n,e){1&n&&(_.gc(0,"td"),_.bc(1,"loading-ring",20),_.fc()),2&n&&(_.Mb(1),_.Cc("size",20))}function Jn(n,e){1&n&&(_.gc(0,"td",11),_.dd(1,"Success"),_.fc())}function Xn(n,e){1&n&&(_.gc(0,"td",11),_.dd(1,"Fetched"),_.fc())}function Yn(n,e){1&n&&(_.gc(0,"td",11),_.dd(1,"Error"),_.fc())}function Hn(n,e){1&n&&(_.gc(0,"td",11),_.dd(1,"Already Scanned"),_.fc())}function qn(n,e){if(1&n&&(_.gc(0,"tr"),_.gc(1,"td"),_.dd(2),_.fc(),_.bd(3,Gn,2,1,"td",18),_.bd(4,Jn,2,0,"td",19),_.bd(5,Xn,2,0,"td",19),_.bd(6,Yn,2,0,"td",19),_.bd(7,Hn,2,0,"td",19),_.fc()),2&n){var t=e.$implicit;_.Mb(2),_.ed(t.id),_.Mb(1),_.Cc("ngIf","loading"===t.status),_.Mb(1),_.Cc("ngIf","success"===t.status),_.Mb(1),_.Cc("ngIf","fetched"===t.status),_.Mb(1),_.Cc("ngIf","error"===t.status),_.Mb(1),_.Cc("ngIf","alreadyScanned"===t.status)}}function Vn(n,e){if(1&n){var t=_.hc();_.bc(0,"modal-header",2),_.gc(1,"div",3),_.gc(2,"div",4),_.bc(3,"img",5),_.bd(4,Un,11,1,"pre",6),_.fc(),_.gc(5,"input",7,8),_.rc("ngModelChange",(function(n){return _.Pc(t),_.vc()._barcodeValue=n}))("keyup.enter",(function(){return _.Pc(t),_.vc().onScanned()})),_.fc(),_.gc(7,"div",9),_.gc(8,"table",10),_.gc(9,"thead"),_.gc(10,"tr"),_.gc(11,"th"),_.dd(12,"ID"),_.fc(),_.gc(13,"th",11),_.dd(14,"STATUS"),_.fc(),_.fc(),_.fc(),_.gc(15,"tbody"),_.bd(16,qn,8,6,"tr",12),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(17,"div",13),_.gc(18,"button",14),_.rc("click",(function(){return _.Pc(t),_.vc().modalService.dismissAll()})),_.dd(19," Done Scanning "),_.fc(),_.fc()}if(2&n){var i=e.$implicit,s=_.Mc(6),c=_.vc();_.Cc("modal",i),_.Mb(4),_.Cc("ngIf",s.value),_.Mb(1),_.Cc("ngModel",c._barcodeValue),_.Mb(11),_.Cc("ngForOf",c.scanned)}}var Zn=function(){function n(n){this.modalService=n,this.scanned=[],this._onScanned=new _.q}return Object.defineProperty(n.prototype,"disabled",{set:function(n){this._disabled=n},enumerable:!1,configurable:!0}),n.prototype.onScanned=function(){if(null!==this._barcodeValue){for(var n=0,e=this.scanned;n<e.length;n++)if(e[n].id===this._barcodeValue)return this.scanned.push({id:this._barcodeValue,status:"alreadyScanned"}),void(this._barcodeValue=null);this.scanned.push({id:this._barcodeValue,status:"loading"}),this._onScanned.emit(this._barcodeValue),this._barcodeValue=null}},n.prototype.openScannerModal=function(n){var e=this;this.modalService.open(n).result.then((function(){clearInterval(e.scannerInterval)}),(function(){clearInterval(e.scannerInterval)})),this.scannerInterval=setInterval((function(n){document.getElementById("scannerInput").focus()}),100)},Object.defineProperty(n.prototype,"updateScanned",{set:function(n){for(var e=0,t=this.scanned;e<t.length;e++){var i=t[e];if(n.id===i.id)return void(i.status=n.status)}},enumerable:!1,configurable:!0}),n.\u0275fac=function(e){return new(e||n)(_.ac(P.i))},n.\u0275cmp=_.Ub({type:n,selectors:[["scanner-modal"]],inputs:{disabled:"disabled",updateScanned:"updateScanned"},outputs:{_onScanned:"_onScanned"},decls:4,vars:1,consts:[["type","button",1,"btn","btn-primary",3,"disabled","click"],["scanModal",""],["title","Scanning Now",3,"modal"],[1,"modal-body"],[1,"text-center"],["src","/assets/img/barcode.gif",2,"max-width","50%"],["class","language-term",4,"ngIf"],["id","scannerInput",1,"ui-hidden-accessible",3,"ngModel","ngModelChange","keyup.enter"],["barcodeValue","ngModel"],[1,"table-responsive"],[1,"table"],[1,"tc"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],[1,"language-term"],[1,"token","input"],[1,"token","prompt"],[4,"ngIf"],["class","tc",4,"ngIf"],[3,"size"]],template:function(n,e){if(1&n){var t=_.hc();_.gc(0,"button",0),_.rc("click",(function(){_.Pc(t);var n=_.Mc(3);return e.openScannerModal(n)})),_.dd(1," Scan\n"),_.fc(),_.bd(2,Vn,20,4,"ng-template",null,1,_.cd)}2&n&&_.Cc("disabled",e._disabled)},directives:[E.a,s.u,c.d,c.k,c.n,s.t,O.a],styles:[""]}),n}();function Qn(n,e){if(1&n){var t=_.hc();_.ec(0),_.gc(1,"tr"),_.wc(2,"lowercase"),_.gc(3,"td"),_.dd(4),_.fc(),_.gc(5,"td"),_.dd(6),_.wc(7,"titlecase"),_.fc(),_.gc(8,"td"),_.dd(9),_.wc(10,"currency"),_.fc(),_.gc(11,"td"),_.dd(12),_.wc(13,"simpleDateTime"),_.fc(),_.gc(14,"td",23),_.gc(15,"span"),_.dd(16),_.fc(),_.fc(),_.gc(17,"td",24),_.gc(18,"button",25),_.rc("click",(function(){_.Pc(t);var n=e.$implicit;return _.vc(2).viewSubmission(n.id)})),_.bc(19,"span",26),_.fc(),_.fc(),_.fc(),_.dc()}if(2&n){var i=e.$implicit;_.Mb(1),_.Pb("status-",_.xc(2,8,i.status),""),_.Mb(3),_.ed(i.customerName),_.Mb(2),_.ed(_.xc(7,10,i.kitType)),_.Mb(3),_.ed(_.xc(10,12,i.totalPrice)),_.Mb(3),_.ed(_.xc(13,14,i.submittedAt)),_.Mb(4),_.ed(i.status)}}function Kn(n,e){1&n&&(_.gc(0,"tr"),_.gc(1,"td",27),_.gc(2,"p",28),_.dd(3,"No submissions scanned"),_.fc(),_.fc(),_.fc())}function ne(n,e){if(1&n&&(_.gc(0,"div",3),_.gc(1,"div",4),_.gc(2,"div",19),_.gc(3,"table",20),_.gc(4,"thead"),_.gc(5,"tr"),_.gc(6,"th"),_.dd(7,"Customer"),_.fc(),_.gc(8,"th"),_.dd(9,"Type"),_.fc(),_.gc(10,"th"),_.dd(11,"Paid (\xa3)"),_.fc(),_.gc(12,"th"),_.dd(13,"Submitted"),_.fc(),_.gc(14,"th"),_.dd(15,"Status"),_.fc(),_.bc(16,"th"),_.fc(),_.fc(),_.gc(17,"tbody"),_.bd(18,Qn,20,16,"ng-container",21),_.bd(19,Kn,4,0,"tr",22),_.fc(),_.fc(),_.fc(),_.fc(),_.fc()),2&n){var t=_.vc();_.Mb(18),_.Cc("ngForOf",t.data.scannedItems),_.Mb(1),_.Cc("ngIf",!t.data.scannedItems.length)}}var ee,te,ie=function(){return function(n,e,t,i,s,c,o,a,r,d,u,l,g,f){this.id=n,this.status=e,this.kitType=t,this.submittedAt=i,this.amountPaid=s,this.totalPrice=c,this.customerEmail=o,this.customerName=a,this.address1=r,this.address2=d,this.city=u,this.county=l,this.postcode=g,this.country=f}}(),se=function(){function n(n,e,t,i,s,c){this.appUserService=n,this.exportDataService=e,this.router=t,this.eventSubmissionService=i,this.submissionService=s,this.toastr=c,this.receivedByCAST="receivedByCAST",this.atManufacturing="atManufacturing",this.backAtCAST="backAtCAST",this.sentToCustomer="sentToCustomer",this.onlyFetch="onlyFetch",this.model={typeScan:null,status:null,updateScanned:null},this.data={scannedIds:[],scannedItems:[]},this.state={isAdmin:!1,exporting:!1}}return n.prototype.ngOnInit=function(){var n=this;this.appUserService.getMe().subscribe((function(e){n.state.isAdmin=n.appUserService.isAdmin(e.data.appUser.roles)}))},n.prototype.onChangeSubmissionType=function(){},n.prototype.submissionScanned=function(n){var e=this,t=new Date,i=null;switch(this.model.typeScan){case this.receivedByCAST:i=d.o.id;break;case this.atManufacturing:i=d.i.id;break;case this.backAtCAST:i=d.d.id;break;case this.sentToCustomer:i=d.n.id;break;case this.onlyFetch:i=null}var s="/submissions/"+n;if(i){var c={id:s,updatedAt:t.toUTCString(),status:i};this.eventSubmissionService.update(c).then((function(t){if(t.data.updateSubmission){var i=new ie(t.data.updateSubmission.id,t.data.updateSubmission.status.name,t.data.updateSubmission.kitType?t.data.updateSubmission.kitType.name:null,t.data.updateSubmission.submittedAt,t.data.updateSubmission.amountPaid,t.data.updateSubmission.totalPrice,t.data.updateSubmission.customer.email,t.data.updateSubmission.customer.fullName,t.data.updateSubmission.customer.address1,t.data.updateSubmission.customer.address2,t.data.updateSubmission.customer.city,t.data.updateSubmission.customer.county,t.data.updateSubmission.customer.postcode,t.data.updateSubmission.customer.country);e.data.scannedItems.push(i),e.model.updateScanned={id:t.data.updateSubmission.id.replace(/\D/g,""),status:"success"}}else e.model.updateScanned={id:n,status:"error"}}),(function(t){e.model.updateScanned={id:n,status:"error"}}))}else this.submissionService.getSubmissionByIdSimple(s).subscribe((function(t){if(t.data.submission){var i=new ie(t.data.submission.id,t.data.submission.status.name,t.data.submission.kitType?t.data.submission.kitType.name:null,t.data.submission.submittedAt,t.data.submission.amountPaid,t.data.submission.totalPrice,t.data.submission.customer.email,t.data.submission.customer.fullName,t.data.submission.customer.address1,t.data.submission.customer.address2,t.data.submission.customer.city,t.data.submission.customer.county,t.data.submission.customer.postcode,t.data.submission.customer.country);e.data.scannedItems.push(i),e.model.updateScanned={id:t.data.submission.id.replace(/\D/g,""),status:"fetched"}}else e.model.updateScanned={id:n,status:"error"}}),(function(t){e.model.updateScanned={id:n,status:"error"}}))},n.prototype.viewSubmission=function(n){this.router.navigate(["submission","view",n.replace(/\D/g,"")])},n.prototype.exportAddresses=function(){if(this.state.exporting=!0,this.data.scannedItems.length<1)return this.toastr.error("You must scan at least one barcode."),void(this.state.exporting=!1);for(var n,e=[],t=[],i=0,s=this.data.scannedItems;i<s.length;i++)n=this.exportDataService.flattenObject(s[i],e),t.push(n.data),e=n.headers;this.exportDataService.whiteListColumns(["id","kitType","customerName","address1","address2","city","county","postcode","country","customerEmail"],t),this.exportDataService.renameColumns({id:"Order Reference",customerName:"Full Name",customerEmail:"Email Address"},t),this.exportDataService.addStaticValues({weight:.06,packageSize:"large letter",serviceCode:"BPR1",serviceRegisterCode:"01"},t),this.exportDataService.exportToCsv("Scanned_submissions_export_"+(new Date).toLocaleString(),Object.keys(t[0]),t),this.toastr.success("Exported and downloading file"),this.state.exporting=!1},n.\u0275fac=function(e){return new(e||n)(_.ac(m.a),_.ac(y.a),_.ac(k.b),_.ac(a.a),_.ac(Wn),_.ac(w.b))},n.\u0275cmp=_.Ub({type:n,selectors:[["ng-component"]],decls:31,vars:23,consts:[["title","Scan In Submissions"],["novalidate",""],["scanSubmissionsForm","ngForm"],[1,"card","mt-5"],[1,"card-body"],[1,"row","text-center","mb-5"],[1,"col-sm-12"],["data-toggle","buttons",1,"btn-group","btn-group-toggle"],[1,"btn","btn-primary","nav-group"],["type","radio","name","receivedByCAST","id","receivedByCAST","autocomplete","off",3,"value","ngModel","ngModelChange","change"],["type","radio","name","atManufacturing","id","atManufacturing","autocomplete","off",3,"value","ngModel","ngModelChange","change"],["type","radio","name","backAtCAST","id","backAtCAST","autocomplete","off",3,"value","ngModel","ngModelChange","change"],["type","radio","name","sentToCustomer","id","sentToCustomer","autocomplete","off",3,"value","ngModel","ngModelChange","change"],["type","radio","name","onlyFetch","id","onlyFetch","autocomplete","off",3,"value","ngModel","ngModelChange","change"],[1,"row","my-2"],[1,"col-12","tc"],[3,"disabled","updateScanned","_onScanned"],["type","button",1,"btn","btn-primary",3,"click"],["class","card mt-5",4,"ngIf"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"status"],[1,"tr"],["type","button",1,"small-button","btn-outline-secondary","round",3,"click"],[1,"fa","fa-eye"],["colspan","6"],[1,"text-muted","text-center"]],template:function(n,e){1&n&&(_.bc(0,"page-title",0),_.gc(1,"form",1,2),_.gc(3,"div",3),_.gc(4,"div",4),_.gc(5,"div",5),_.gc(6,"div",6),_.gc(7,"div",7),_.gc(8,"label",8),_.gc(9,"input",9),_.rc("ngModelChange",(function(n){return e.model.typeScan=n}))("change",(function(){return e.onChangeSubmissionType()})),_.fc(),_.dd(10," Received by CAST "),_.fc(),_.gc(11,"label",8),_.gc(12,"input",10),_.rc("ngModelChange",(function(n){return e.model.typeScan=n}))("change",(function(){return e.onChangeSubmissionType()})),_.fc(),_.dd(13," At Manufacturing "),_.fc(),_.gc(14,"label",8),_.gc(15,"input",11),_.rc("ngModelChange",(function(n){return e.model.typeScan=n}))("change",(function(){return e.onChangeSubmissionType()})),_.fc(),_.dd(16," Back At CAST "),_.fc(),_.gc(17,"label",8),_.gc(18,"input",12),_.rc("ngModelChange",(function(n){return e.model.typeScan=n}))("change",(function(){return e.onChangeSubmissionType()})),_.fc(),_.dd(19," Sent to Customer "),_.fc(),_.gc(20,"label",8),_.gc(21,"input",13),_.rc("ngModelChange",(function(n){return e.model.typeScan=n}))("change",(function(){return e.onChangeSubmissionType()})),_.fc(),_.dd(22," Read Only "),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(23,"div",14),_.gc(24,"div",15),_.gc(25,"scanner-modal",16),_.rc("_onScanned",(function(n){return e.submissionScanned(n)})),_.fc(),_.fc(),_.fc(),_.gc(26,"div",14),_.gc(27,"div",15),_.gc(28,"button",17),_.rc("click",(function(){return e.exportAddresses()})),_.dd(29," Export Submissions "),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.bd(30,ne,20,2,"div",18),_.fc()),2&n&&(_.Mb(8),_.Sb("active",e.model.typeScan===e.receivedByCAST),_.Mb(1),_.Cc("value",e.receivedByCAST)("ngModel",e.model.typeScan),_.Mb(2),_.Sb("active",e.model.typeScan===e.atManufacturing),_.Mb(1),_.Cc("value",e.atManufacturing)("ngModel",e.model.typeScan),_.Mb(2),_.Sb("active",e.model.typeScan===e.backAtCAST),_.Mb(1),_.Cc("value",e.backAtCAST)("ngModel",e.model.typeScan),_.Mb(2),_.Sb("active",e.model.typeScan===e.sentToCustomer),_.Mb(1),_.Cc("value",e.sentToCustomer)("ngModel",e.model.typeScan),_.Mb(2),_.Sb("active",e.model.typeScan===e.onlyFetch),_.Mb(1),_.Cc("value",e.onlyFetch)("ngModel",e.model.typeScan),_.Mb(4),_.Cc("disabled",null===e.model.typeScan)("updateScanned",e.model.updateScanned),_.Mb(5),_.Cc("ngIf",e.data.scannedItems.length>0))},directives:[I.a,c.z,c.l,c.m,c.s,c.d,c.k,c.n,Zn,s.u,s.t],pipes:[s.q,s.G,F.a,L.a],styles:[""]}),n}(),ce=t("tk/3"),oe=Rn()(ee||(ee=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation createSignedUploadUrl(\n        $contentType: String!,\n        $extension: String!\n    ) {\n        createSignedUploadUrl(input: {\n            _id: "1",\n            contentType: $contentType,\n            extension: $extension,\n            clientMutationId: ""\n        }) {\n            id,\n            objectName,\n            signedUrl\n        }\n    }\n'],['\n    mutation createSignedUploadUrl(\n        $contentType: String!,\n        $extension: String!\n    ) {\n        createSignedUploadUrl(input: {\n            _id: "1",\n            contentType: $contentType,\n            extension: $extension,\n            clientMutationId: ""\n        }) {\n            id,\n            objectName,\n            signedUrl\n        }\n    }\n']))),ae=Rn()(te||(te=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation createProcessUploadedSubmissionsRequest(\n        $numberToProcess: Int!\n    ) {\n        createProcessUploadedSubmissionsRequest(input: {\n            numberToProcess: $numberToProcess,\n            clientMutationId: ""\n        }) {\n            id,\n            numberProcessed\n        }\n    }\n'],['\n    mutation createProcessUploadedSubmissionsRequest(\n        $numberToProcess: Int!\n    ) {\n        createProcessUploadedSubmissionsRequest(input: {\n            numberToProcess: $numberToProcess,\n            clientMutationId: ""\n        }) {\n            id,\n            numberProcessed\n        }\n    }\n']))),re=function(n,e,t,i){return new(t||(t=Promise))((function(s,c){function o(n){try{r(i.next(n))}catch(e){c(e)}}function a(n){try{r(i.throw(n))}catch(e){c(e)}}function r(n){var e;n.done?s(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(o,a)}r((i=i.apply(n,e||[])).next())}))},de=function(n,e){var t,i,s,c,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(c){return function(a){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,i&&(s=2&c[0]?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,i=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){o.label=c[1];break}if(6===c[0]&&o.label<s[1]){o.label=s[1],s=c;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(c);break}s[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(n,o)}catch(a){c=[6,a],i=0}finally{t=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}},ue=function(){function n(n,e){this.http=n,this.apollo=e}return n.prototype.createSignedUploadUrl=function(n){return re(this,void 0,void 0,(function(){return de(this,(function(e){switch(e.label){case 0:return[4,this.apollo.mutate({mutation:oe,variables:n}).toPromise()];case 1:return[2,e.sent().data]}}))}))},n.prototype.uploadFile=function(n,e){return re(this,void 0,void 0,(function(){var t,i;return de(this,(function(s){return t=new ce.d({"Content-Type":n.type}),i=new ce.e("PUT",e,n,{headers:t,reportProgress:!0}),[2,this.http.request(i).toPromise()]}))}))},n.prototype.processUploads=function(n){return re(this,void 0,void 0,(function(){return de(this,(function(e){switch(e.label){case 0:return[4,this.apollo.mutate({mutation:ae,variables:n}).toPromise()];case 1:return[2,e.sent().data]}}))}))},n.\u0275fac=function(e){return new(e||n)(_.oc(ce.b),_.oc(Ln.b))},n.\u0275prov=_.Wb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),le=t("kvL/"),ge=function(n,e,t,i){return new(t||(t=Promise))((function(s,c){function o(n){try{r(i.next(n))}catch(e){c(e)}}function a(n){try{r(i.throw(n))}catch(e){c(e)}}function r(n){var e;n.done?s(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(o,a)}r((i=i.apply(n,e||[])).next())}))},fe=function(n,e){var t,i,s,c,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(c){return function(a){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,i&&(s=2&c[0]?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,i=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){o.label=c[1];break}if(6===c[0]&&o.label<s[1]){o.label=s[1],s=c;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(c);break}s[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(n,o)}catch(a){c=[6,a],i=0}finally{t=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}};function be(n,e){if(1&n){var t=_.hc();_.gc(0,"ngx-dropzone-preview",10),_.rc("removed",(function(){_.Pc(t);var n=e.$implicit;return _.vc().onRemove(n)})),_.gc(1,"ngx-dropzone-label"),_.dd(2),_.fc(),_.fc()}if(2&n){var i=e.$implicit;_.Cc("file",i)("removable",!0),_.Mb(2),_.gd("",i.name," (",i.type,")")}}function me(n,e){if(1&n&&(_.gc(0,"p",11),_.dd(1),_.fc()),2&n){var t=_.vc();_.Mb(1),_.fd("Processed: ",t.processed," file(s)")}}function pe(n,e){1&n&&_.bc(0,"loading-ring",12),2&n&&_.Cc("size",100)}var he=function(){function n(n,e){this.fileUploadService=n,this.toastr=e,this.numUploadsToProcess=20,this.data={files:[]},this.state={submitting:!1},this.model={},this.processed=0}return n.prototype.onSelect=function(n){var e;(e=this.data.files).push.apply(e,n.addedFiles)},n.prototype.onRemove=function(n){this.data.files.splice(this.data.files.indexOf(n),1)},n.prototype.doUpload=function(){return ge(this,void 0,void 0,(function(){var n,e,t=this;return fe(this,(function(i){switch(i.label){case 0:this.state.submitting=!0,this.processed=0,i.label=1;case 1:return i.trys.push([1,3,4,5]),n=this.data.files.map((function(n){return t.fileUploadService.createSignedUploadUrl({contentType:n.type,extension:n.name.split(".").pop()}).then((function(e){return t.processed++,t.fileUploadService.uploadFile(n,e.createSignedUploadUrl.signedUrl)}))})),[4,Promise.all(n)];case 2:return i.sent(),this.toastr.success("Image(s) uploaded successfully!"),this.data.files=[],[3,5];case 3:return e=i.sent(),this.toastr.error("Ohnoes! Something went wrong with the upload :("),console.error(e),[3,5];case 4:return this.state.submitting=!1,[7];case 5:return[2]}}))}))},n.prototype.processUploads=function(){return ge(this,void 0,void 0,(function(){var n,e,t,i;return fe(this,(function(s){switch(s.label){case 0:this.state.submitting=!0,s.label=1;case 1:s.trys.push([1,5,6,7]),n=-1,e=0,s.label=2;case 2:return 0===n?[3,4]:[4,this.fileUploadService.processUploads({numberToProcess:this.numUploadsToProcess})];case 3:return t=s.sent(),e+=n=t.createProcessUploadedSubmissionsRequest.numberProcessed,[3,2];case 4:return 0===e?this.toastr.warning("0 files were succesfully processed on the server"):this.toastr.success(e+" files processed"),[3,7];case 5:return i=s.sent(),this.toastr.error("Error requesting processing of uploads"),console.error(i),[3,7];case 6:return this.state.submitting=!1,[7];case 7:return[2]}}))}))},n.\u0275fac=function(e){return new(e||n)(_.ac(ue),_.ac(w.b))},n.\u0275cmp=_.Ub({type:n,selectors:[["ng-component"]],decls:23,vars:5,consts:[["subtitle","Upload the photos taken from a wax logging session","title","Upload Wax Images"],[1,"card","mt-5"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"mb-3",3,"change"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["class","lead",4,"ngIf"],[3,"size",4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"],[1,"lead"],[3,"size"]],template:function(n,e){1&n&&(_.bc(0,"page-title",0),_.gc(1,"div",1),_.gc(2,"div",2),_.gc(3,"div",3),_.gc(4,"div",4),_.gc(5,"h4"),_.dd(6,"Upload Photos"),_.fc(),_.gc(7,"ngx-dropzone",5),_.rc("change",(function(n){return e.onSelect(n)})),_.gc(8,"ngx-dropzone-label"),_.dd(9,"Drop you photo(s) here."),_.fc(),_.bd(10,be,3,4,"ngx-dropzone-preview",6),_.fc(),_.gc(11,"button",7),_.rc("click",(function(){return e.doUpload()})),_.dd(12," Upload "),_.fc(),_.bd(13,me,2,1,"p",8),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(14,"div",1),_.gc(15,"div",2),_.gc(16,"div",3),_.gc(17,"div",4),_.gc(18,"h4"),_.dd(19,"Process Uploads on the Server"),_.fc(),_.gc(20,"button",7),_.rc("click",(function(){return e.processUploads()})),_.dd(21," Process Uploads "),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.bd(22,pe,1,1,"loading-ring",9)),2&n&&(_.Mb(10),_.Cc("ngForOf",e.data.files),_.Mb(1),_.Cc("disabled",e.state.submitting||0===e.data.files.length),_.Mb(2),_.Cc("ngIf",!0===e.state.submitting||e.processed>0),_.Mb(7),_.Cc("disabled",e.state.submitting),_.Mb(2),_.Cc("ngIf",e.state.submitting))},directives:[I.a,le.a,le.g,s.t,s.u,le.d,O.a],encapsulation:2}),n}(),ve=[{path:"list",component:Bn},{path:"view/:id",component:Dn.a},{path:"scan",component:se},{path:"upload",component:he}],ye=function(){function n(){}return n.\u0275mod=_.Yb({type:n}),n.\u0275inj=_.Xb({factory:function(e){return new(e||n)},imports:[[k.f.forChild(ve)],k.f]}),n}(),Ce=t("z17N"),Me=t("lUu4");function Se(n,e){if(1&n){var t=_.hc();_.gc(0,"button",2),_.rc("click",(function(){return _.Pc(t),_.vc().showConfirmAction()})),_.dd(1),_.fc()}if(2&n){var i=_.vc();_.Cc("disabled",i.state.disabled),_.Mb(1),_.fd(" ",i._buttonText,"\n")}}function _e(n,e){if(1&n){var t=_.hc();_.gc(0,"button",3),_.rc("click",(function(){return _.Pc(t),_.vc().confirmed()})),_.dd(1," Confirm?\n"),_.fc()}}var Pe=function(){function n(){this.state={confirming:!1,disabled:!1},this.confirmedAction=new _.q}return Object.defineProperty(n.prototype,"buttonText",{set:function(n){this._buttonText=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disabledState",{set:function(n){this.state.disabled=n},enumerable:!1,configurable:!0}),n.prototype.confirmed=function(){this.state.confirming=!1,this.confirmedAction.emit()},n.prototype.showConfirmAction=function(){var n=this;this.state.confirming=!0,setTimeout((function(){n.state.confirming=!1}),3e3)},n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=_.Ub({type:n,selectors:[["confirm-action"]],inputs:{buttonText:"buttonText",disabledState:"disabledState"},outputs:{confirmedAction:"confirmedAction"},decls:2,vars:2,consts:[["class","btn btn-lg btn-primary",3,"disabled","click",4,"ngIf"],["class","btn btn-lg btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-lg","btn-primary",3,"disabled","click"],[1,"btn","btn-lg","btn-warning",3,"click"]],template:function(n,e){1&n&&(_.bd(0,Se,2,2,"button",0),_.bd(1,_e,2,0,"button",1)),2&n&&(_.Cc("ngIf",!e.state.confirming),_.Mb(1),_.Cc("ngIf",e.state.confirming))},directives:[s.u],encapsulation:2}),n}(),ke=t("rhck"),we=t("/wnf"),Ie=t("YbyT"),xe=t("57tZ"),$e=t("xzcs"),Ae=t("D2Fp"),Te=t("lbMj"),je=t("IfPz"),Oe=t("ZtzB"),Ee=t("zoH9"),Ne=t("DWOX"),Be=t("DwNB"),De=t("Cdzh"),ze=t("BAfr"),Re=t("mhvR"),Fe=t("iUZM"),Le=t("Lpkd"),We=t("jmmt"),Ue=t("o973"),Ge=t("aX/C"),Je=t("PC64"),Xe=t("Rmj+"),Ye=t("UYcP"),He=t("szSY");function qe(n,e){if(1&n&&(_.gc(0,"li"),_.gc(1,"span"),_.dd(2,"Casting Price"),_.fc(),_.gc(3,"span"),_.dd(4),_.wc(5,"currency"),_.fc(),_.fc()),2&n){var t=_.vc();_.Mb(4),_.ed(_.xc(5,1,t._submission.castingPrice))}}function Ve(n,e){if(1&n&&(_.gc(0,"li"),_.gc(1,"span"),_.dd(2,"Existing Code Price Paid"),_.fc(),_.gc(3,"span"),_.dd(4),_.wc(5,"currency"),_.fc(),_.fc()),2&n){var t=_.vc();_.Mb(4),_.ed(_.xc(5,1,t._castingCode.castingPricePaid))}}function Ze(n,e){if(1&n){var t=_.hc();_.gc(0,"span"),_.bc(1,"i"),_.gc(2,"button",18),_.rc("click",(function(n){_.Pc(t);var e=_.vc(2);return e.editing(e.keys.baseMetalPaid,n)})),_.fc(),_.fc()}if(2&n){var i=_.vc(2);_.Sb("no",!i._submission.baseMetalPaid)("yes",i._submission.baseMetalPaid),_.Mb(1),_.Pb("fas ",i._submission.baseMetalPaid?"fa-check":"fa-times","")}}function Qe(n,e){if(1&n){var t=_.hc();_.gc(0,"div",19),_.rc("click",(function(n){_.Pc(t);var e=_.vc(2);return e.editing(e.keys.baseMetalPaid,n)})),_.gc(1,"input",20),_.rc("ngModelChange",(function(n){return _.Pc(t),_.vc(2)._submission.baseMetalPaid=n})),_.fc(),_.bc(2,"label",21),_.fc()}if(2&n){var i=_.vc(2);_.Mb(1),_.Cc("ngModel",i._submission.baseMetalPaid)}}function Ke(n,e){if(1&n&&(_.gc(0,"li"),_.gc(1,"span"),_.dd(2,"Base Metal Paid"),_.fc(),_.bd(3,Ze,3,7,"span",16),_.bd(4,Qe,3,1,"div",17),_.fc()),2&n){var t=_.vc();_.Sb("editable",t.keys.baseMetalPaid&&t._editable),_.Mb(3),_.Cc("ngIf",t.currentlyEditing!==t.keys.baseMetalPaid),_.Mb(1),_.Cc("ngIf",t.currentlyEditing===t.keys.baseMetalPaid)}}function nt(n,e){if(1&n&&(_.gc(0,"li"),_.gc(1,"span"),_.dd(2,"Discount"),_.fc(),_.gc(3,"span"),_.dd(4),_.wc(5,"currency"),_.wc(6,"currency"),_.fc(),_.fc()),2&n){var t=_.vc();_.Mb(4),_.ed(t._castingCode.discount?_.xc(5,1,t._castingCode.discount):_.xc(6,3,0))}}function et(n,e){if(1&n){var t=_.hc();_.gc(0,"span"),_.gc(1,"strong"),_.dd(2),_.wc(3,"currency"),_.fc(),_.gc(4,"button",18),_.rc("click",(function(n){_.Pc(t);var e=_.vc(2);return e.editing(e.keys.amountPaid,n)})),_.fc(),_.fc()}if(2&n){var i=_.vc(2);_.Mb(2),_.ed(_.xc(3,1,i._submission.amountPaid))}}function tt(n,e){if(1&n){var t=_.hc();_.gc(0,"div",23),_.gc(1,"div",24),_.rc("click",(function(n){_.Pc(t);var e=_.vc(2);return e.editing(e.keys.amountPaid,n)})),_.gc(2,"input",25,26),_.rc("ngModelChange",(function(n){return _.Pc(t),_.vc(2)._submission.amountPaid=n})),_.fc(),_.fc(),_.gc(4,"div",27),_.gc(5,"button",28),_.rc("click",(function(n){return _.Pc(t),_.vc(2).stopEditing(n)})),_.fc(),_.fc(),_.fc()}if(2&n){var i=_.vc(2);_.Mb(2),_.Cc("ngModel",i._submission.amountPaid)}}function it(n,e){if(1&n&&(_.gc(0,"li"),_.gc(1,"span"),_.gc(2,"strong"),_.dd(3,"Amount Paid"),_.fc(),_.fc(),_.bd(4,et,5,3,"span",8),_.bd(5,tt,6,1,"div",22),_.fc()),2&n){var t=_.vc();_.Sb("editable",t.keys.amountPaid&&t._editable),_.Mb(4),_.Cc("ngIf",t.currentlyEditing!==t.keys.amountPaid),_.Mb(1),_.Cc("ngIf",t.currentlyEditing===t.keys.amountPaid)}}function st(n,e){if(1&n){var t=_.hc();_.gc(0,"div",29),_.gc(1,"button",30),_.rc("click",(function(){_.Pc(t);var n=_.vc(),e=_.Mc(1);return n.updateSubmission(e)})),_.dd(2,"Update Submission "),_.fc(),_.fc()}if(2&n){var i=_.vc();_.Mb(1),_.Cc("disabled",i.state.updating)}}function ct(n,e){if(1&n&&(_.gc(0,"li"),_.gc(1,"span"),_.dd(2,"Expected Weight"),_.fc(),_.gc(3,"span"),_.dd(4),_.wc(5,"number"),_.fc(),_.fc()),2&n){var t=_.vc();_.Mb(4),_.fd("",_.yc(5,1,t._submissionData.submission.expectedFinishWeight,"1.3-3"),"g")}}function ot(n,e){if(1&n){var t=_.hc();_.gc(0,"span"),_.dd(1),_.wc(2,"number"),_.gc(3,"button",18),_.rc("click",(function(n){_.Pc(t);var e=_.vc(2);return e.editing(e.keys.metalWeight,n)})),_.fc(),_.fc()}if(2&n){var i=_.vc(2);_.Mb(1),_.fd(" ",i._submission.metalWeight?_.yc(2,1,i._submission.metalWeight,"1.3-3")+"g":"Not Weighed"," ")}}function at(n,e){if(1&n){var t=_.hc();_.gc(0,"div",23),_.gc(1,"div",24),_.rc("click",(function(n){_.Pc(t);var e=_.vc(2);return e.editing(e.keys.metalWeight,n)})),_.gc(2,"input",31,32),_.rc("ngModelChange",(function(n){return _.Pc(t),_.vc(2)._submission.metalWeight=n})),_.fc(),_.fc(),_.gc(4,"div",27),_.gc(5,"button",28),_.rc("click",(function(n){return _.Pc(t),_.vc(2).stopEditing(n)})),_.fc(),_.fc(),_.fc()}if(2&n){var i=_.vc(2);_.Mb(2),_.Cc("ngModel",i._submission.metalWeight)}}function rt(n,e){if(1&n&&(_.gc(0,"li"),_.gc(1,"span"),_.dd(2,"Finished Weight"),_.fc(),_.bd(3,ot,4,4,"span",8),_.bd(4,at,6,1,"div",22),_.fc()),2&n){var t=_.vc();_.Sb("editable",t.keys.metalWeight&&t._editable),_.Mb(3),_.Cc("ngIf",t.currentlyEditing!==t.keys.metalWeight),_.Mb(1),_.Cc("ngIf",t.currentlyEditing===t.keys.metalWeight)}}function dt(n,e){if(1&n&&(_.gc(0,"li",33),_.gc(1,"span"),_.dd(2,"Est Labour"),_.fc(),_.gc(3,"span"),_.dd(4),_.wc(5,"currency"),_.fc(),_.fc()),2&n){var t=_.vc();_.Cc("ngbTooltip","Submission level estimate"),_.Mb(4),_.ed(_.xc(5,2,t._submissionData.submission.estimatedLaborCost))}}function ut(n,e){if(1&n&&(_.gc(0,"li",33),_.gc(1,"span"),_.dd(2,"Est Labour"),_.fc(),_.gc(3,"span"),_.dd(4),_.wc(5,"currency"),_.fc(),_.fc()),2&n){var t=_.vc();_.Cc("ngbTooltip","Submission level estimate"),_.Mb(4),_.ed(_.xc(5,2,t._submissionData.submission.estimatedMetalCost))}}function lt(n,e){if(1&n&&(_.gc(0,"li"),_.gc(1,"span"),_.dd(2,"Gross Estimate"),_.fc(),_.gc(3,"span"),_.gc(4,"strong"),_.dd(5),_.wc(6,"currency"),_.fc(),_.fc(),_.fc()),2&n){var t=_.vc();_.Mb(5),_.ed(_.xc(6,1,t._submissionData.submission.estimatedLaborCost+t._submissionData.submission.estimatedMetalCost))}}function gt(n,e){if(1&n&&(_.ec(0),_.gc(1,"li"),_.bc(2,"hr"),_.fc(),_.gc(3,"li"),_.gc(4,"span"),_.dd(5,"Estimate Profit"),_.fc(),_.gc(6,"span"),_.dd(7),_.wc(8,"currency"),_.fc(),_.fc(),_.dc()),2&n){var t=_.vc();_.Mb(7),_.fd(" ",_.xc(8,1,t._submissionData.submission.amountPaid-(t._submissionData.submission.estimatedMetalCost+t._submissionData.submission.estimatedLaborCost))," ")}}function ft(n,e){if(1&n&&(_.gc(0,"span",34),_.dd(1),_.wc(2,"currency"),_.fc()),2&n){var t=_.vc(2);_.Mb(1),_.fd(" (Diff: ",_.xc(2,1,t._submissionData.submission.estimatedLaborCost+t._submissionData.submission.estimatedMetalCost-t._castingCode.estimatedCost),") ")}}function bt(n,e){if(1&n&&(_.ec(0),_.gc(1,"li"),_.bc(2,"hr"),_.fc(),_.gc(3,"li"),_.gc(4,"span"),_.dd(5,"Kit Cost"),_.fc(),_.gc(6,"span"),_.dd(7),_.wc(8,"currency"),_.bc(9,"br"),_.gc(10,"span",34),_.dd(11,"Based on the casting code"),_.fc(),_.bd(12,ft,3,3,"span",35),_.fc(),_.fc(),_.dc()),2&n){var t=_.vc();_.Mb(7),_.fd(" ",_.xc(8,2,t._castingCode.estimatedCost),""),_.Mb(5),_.Cc("ngIf",0!==t._castingCode.estimatedCost)}}function mt(n,e){1&n&&(_.gc(0,"li"),_.gc(1,"p",36),_.dd(2,"No jobs have been started yet for this submission"),_.fc(),_.fc())}function pt(n,e){if(1&n&&(_.gc(0,"span"),_.dd(1),_.wc(2,"currency"),_.fc()),2&n){var t=_.vc(2);_.Mb(1),_.ed(_.xc(2,1,t._jobs.labourCost))}}function ht(n,e){1&n&&(_.gc(0,"span"),_.gc(1,"app-loading-shimmer"),_.gc(2,"div",38),_.gc(3,"div",39),_.bc(4,"div",40),_.fc(),_.fc(),_.fc(),_.fc())}function vt(n,e){if(1&n&&(_.gc(0,"span"),_.dd(1),_.wc(2,"currency"),_.fc()),2&n){var t=_.vc(2);_.Mb(1),_.ed(_.xc(2,1,t._jobs.metalCost))}}function yt(n,e){1&n&&(_.gc(0,"span"),_.gc(1,"app-loading-shimmer"),_.gc(2,"div",38),_.gc(3,"div",39),_.bc(4,"div",40),_.fc(),_.fc(),_.fc(),_.fc())}function Ct(n,e){if(1&n&&(_.gc(0,"span"),_.gc(1,"strong"),_.dd(2),_.wc(3,"currency"),_.fc(),_.fc()),2&n){var t=_.vc(2);_.Mb(2),_.ed(_.xc(3,1,t._jobs.labourCost+t._jobs.metalCost))}}function Mt(n,e){1&n&&(_.gc(0,"span"),_.gc(1,"app-loading-shimmer"),_.gc(2,"div",38),_.gc(3,"div",39),_.bc(4,"div",40),_.fc(),_.fc(),_.fc(),_.fc())}function St(n,e){if(1&n&&(_.gc(0,"span"),_.gc(1,"strong"),_.dd(2),_.wc(3,"currency"),_.fc(),_.fc()),2&n){var t=_.vc(2);_.Sb("text-danger",t._jobs.labourCost+t._jobs.metalCost>t._submissionData.submission.estimatedLaborCost+t._submissionData.submission.estimatedMetalCost)("text-success",t._jobs.labourCost+t._jobs.metalCost<=t._submissionData.submission.estimatedLaborCost+t._submissionData.submission.estimatedMetalCost),_.Mb(2),_.fd(" ",_.xc(3,5,t._submissionData.submission.estimatedLaborCost+t._submissionData.submission.estimatedMetalCost-(t._jobs.labourCost+t._jobs.metalCost))," ")}}function _t(n,e){1&n&&(_.gc(0,"span"),_.gc(1,"app-loading-shimmer"),_.gc(2,"div",38),_.gc(3,"div",41),_.bc(4,"div",40),_.fc(),_.gc(5,"div",41),_.bc(6,"div",42),_.fc(),_.fc(),_.fc(),_.fc())}function Pt(n,e){if(1&n&&(_.ec(0),_.gc(1,"li"),_.gc(2,"span"),_.dd(3,"Labour"),_.fc(),_.bd(4,pt,3,3,"span",8),_.bd(5,ht,5,0,"span",8),_.fc(),_.gc(6,"li"),_.gc(7,"span"),_.dd(8,"Metal"),_.fc(),_.bd(9,vt,3,3,"span",8),_.bd(10,yt,5,0,"span",8),_.fc(),_.gc(11,"li"),_.gc(12,"span"),_.dd(13,"Gross Cost"),_.fc(),_.bd(14,Ct,4,3,"span",8),_.bd(15,Mt,5,0,"span",8),_.fc(),_.gc(16,"li"),_.bc(17,"hr"),_.fc(),_.gc(18,"li"),_.gc(19,"span"),_.dd(20,"Diff"),_.fc(),_.bd(21,St,4,7,"span",37),_.bd(22,_t,7,0,"span",8),_.fc(),_.gc(23,"li"),_.gc(24,"span"),_.dd(25,"Submission Profit / Loss"),_.fc(),_.gc(26,"span"),_.dd(27),_.wc(28,"currency"),_.fc(),_.fc(),_.dc()),2&n){var t=_.vc();_.Mb(4),_.Cc("ngIf",!t.state._loadingJobActions),_.Mb(1),_.Cc("ngIf",t.state._loadingJobActions),_.Mb(4),_.Cc("ngIf",!t.state._loadingJobActions),_.Mb(1),_.Cc("ngIf",t.state._loadingJobActions),_.Mb(4),_.Cc("ngIf",!t.state._loadingJobActions),_.Mb(1),_.Cc("ngIf",t.state._loadingJobActions),_.Mb(6),_.Cc("ngIf",!t.state._loadingJobActions),_.Mb(1),_.Cc("ngIf",t.state._loadingJobActions),_.Mb(4),_.Sb("text-danger",t._submissionData.submission.amountPaid-t._jobs.labourCost-t._jobs.metalCost<0)("text-success",t._submissionData.submission.amountPaid-t._jobs.labourCost-t._jobs.metalCost>0),_.Mb(1),_.fd(" ",_.xc(28,13,t._submissionData.submission.amountPaid-t._jobs.labourCost-t._jobs.metalCost)," ")}}function kt(n,e){1&n&&(_.gc(0,"div",12),_.gc(1,"div",2),_.bc(2,"loading-ring",43),_.fc(),_.fc())}function wt(n,e){1&n&&(_.gc(0,"li"),_.bc(1,"hr",48),_.fc())}function It(n,e){if(1&n&&(_.gc(0,"li"),_.gc(1,"span"),_.dd(2,"Cost"),_.fc(),_.gc(3,"span"),_.dd(4),_.wc(5,"currency"),_.fc(),_.fc()),2&n){var t=_.vc().$implicit;_.Mb(4),_.ed(_.xc(5,1,t.cost))}}function xt(n,e){if(1&n&&(_.gc(0,"li"),_.gc(1,"span"),_.dd(2,"Profit"),_.fc(),_.gc(3,"span"),_.dd(4),_.wc(5,"currency"),_.fc(),_.fc()),2&n){var t=_.vc().$implicit;_.Mb(4),_.gd("",_.xc(5,2,t.profit)," (",100*t.margin,"%)")}}function $t(n,e){if(1&n&&(_.gc(0,"div",45),_.gc(1,"div",46),_.gc(2,"p"),_.gc(3,"strong"),_.dd(4),_.fc(),_.fc(),_.gc(5,"ul",47),_.gc(6,"li"),_.gc(7,"span"),_.dd(8,"RRP"),_.fc(),_.gc(9,"span"),_.dd(10),_.wc(11,"currency"),_.fc(),_.fc(),_.gc(12,"li"),_.gc(13,"span"),_.dd(14,"Weight"),_.fc(),_.gc(15,"span"),_.dd(16),_.fc(),_.fc(),_.bd(17,wt,2,0,"li",8),_.bd(18,It,6,3,"li",8),_.bd(19,xt,6,4,"li",8),_.fc(),_.fc(),_.fc()),2&n){var t=e.$implicit,i=_.vc(2);_.Mb(1),_.Sb("focus",t.name===i._submissionData.submission.baseMetal.name),_.Mb(3),_.ed(t.name),_.Mb(6),_.ed(_.xc(11,8,t.price)),_.Mb(6),_.fd("",t.weight,"g"),_.Mb(1),_.Cc("ngIf",t.cost),_.Mb(1),_.Cc("ngIf",t.cost),_.Mb(1),_.Cc("ngIf",null!==t.margin&&null!==t.profit)}}function At(n,e){if(1&n&&(_.gc(0,"div",12),_.bd(1,$t,20,10,"div",44),_.fc()),2&n){var t=_.vc();_.Mb(1),_.Cc("ngForOf",t.data.metalWeightsAndPrices)}}var Tt=function(){return function(){}}(),jt=function(){return function(){this.metalWeight="metalWeight",this.waxWeight="waxWeight",this.baseMetal="baseMetal",this.baseMetalPaid="baseMetalPaid",this.baseMetalPrice="baseMetalPricePaid",this.plating="plating",this.finish="finish",this.castingCode="castingCode",this.castingPrice="castingPrice",this.castingEstimateCode="castingEstimateCode",this.castingEstimateLaborSubmission="castingEstimateLaborSubmission",this.castingEstimateMetalSubmission="castingEstimateMetalSubmission",this.ringThickness="ringThickness",this.ringResize="ringResize",this.originalRingSize="originalRingSize",this.ringSizeCustom="ringSizeCustom",this.measuredRingSize="measuredRingSize",this.jumpRing="jumpRing",this.jumpRingPlacement="jumpRingPlacement",this.chainType="chainType",this.chainLength="chainLength",this.chainPlating="chainPlating",this.earringConfig="earringConfig",this.showEngravingSection="showEngravingSection",this.engravingFont="engravingFont",this.engravingText="engravingText",this.submittedAt="submittedAt",this.dateReceived="dateReceived",this.isEvent="isEvent",this.customerNotes="customerNotes",this.internalNotes="internalNotes",this.totalPrice="totalPrice",this.amountPaid="amountPaid",this.notes="notes"}}(),Ot=function(){return function(){this.labourCost=0,this.metalCost=0,this.totalCost=0}}(),Et=function(){function n(n,e,t){this.submissionService=n,this.metalWeightAndPriceService=e,this.toastrService=t,this._castingCode=null,this.clickEvent=null,this.currentlyEditing=null,this._editable=!1,this._isAdmin=!1,this._hasStones=!1,this.keys=new jt,this._originalCastingCode=null,this.showEngravingSection=!1,this._submission=new Tt,this._submissionData=new Dn.b,this._jobs=new Ot,this.data={metalWeightsAndPrices:[]},this.state={_loadingCastingCode:!0,_loadingJobActions:!0,loadingPrices:!0,updating:!1},this.chainTypeNone=Xe.b,this.kitTypeEarring=l.e,this.kitTypePendant=l.f,this.kitTypeRing=l.g,this.platingTypeNoPlating=Ye.a,this.silverBaseMetalName=Je.m}return n.prototype.editing=function(n,e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),this._editable&&(t&&(this._submission[n]=i.find((function(n){return n.node.id===t.id})).node),e.stopPropagation(),this.currentlyEditing=n)},n.prototype.stopEditing=function(n){this.currentlyEditing=null},n.prototype.toggleEngraving=function(){this.showEngravingSection&&(this._submission.engravingText=null,this._submission.engravingFont=null)},n.prototype.toggleRingResize=function(){this._submission.ringResize&&(this._submission.originalRingSize=null)},n.prototype.updateSubmission=function(n){var e=this;this.state.updating=!0,this.toastrService.success("","Updating Submission Information");for(var t=JSON.parse(JSON.stringify(this._submission)),i=0,s=Object.keys(t);i<s.length;i++){var c=s[i];t[c]&&t[c].id&&(t[c]=t[c].id)}t.updatedAt=(new Date).toISOString(),this.submissionService.updateEdit(t).subscribe((function(t){e.state.updating=!1,e.toastrService.success("","Submission Information Updated"),n.form.markAsPristine()}))},Object.defineProperty(n.prototype,"castingCode",{set:function(n){this._castingCode=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"castingEstimateCode",{set:function(n){this._submission.castingEstimateCode=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"editable",{set:function(n){this._editable=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAdmin",{set:function(n){this._isAdmin=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"loadingCastingCode",{set:function(n){this.state._loadingCastingCode=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"originalCastingCode",{set:function(n){this._originalCastingCode=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"submission",{set:function(n){var e=this;n.node&&(n=n.node),this._submission.id=n.id,this._submission.status=n.status,this._submission.kitType=n.kitType,this._submission.castingType=n.castingType?n.castingType:null,this._submission.waxWeight=n.waxWeight,this._submission.expectedFinishWeight=n.expectedFinishWeight,this._submission.metalWeight=n.metalWeight,this._submission.baseMetal=n.baseMetal,this._submission.plating=n.plating,this._submission.finish=n.finish,this._submission.castingCode=n.castingCode,this._submission.castingPrice=n.castingPrice,this._submission.castingEstimateLaborSubmission=n.estimatedLaborCost,this._submission.castingEstimateMetalSubmission=n.estimatedMetalCost,this._submission.ringThickness=n.ringThickness?n.ringThickness:null,this._submission.ringSizeCustom=n.ringSizeCustom?n.ringSizeCustom:null,this._submission.measuredRingSize=n.measuredRingSize?n.measuredRingSize:null,this._submission.originalRingSize=n.originalRingSize?n.originalRingSize:null,this._submission.ringResize=n.ringResize,this._submission.jumpRing=n.jumpRing,this._submission.jumpRingPlacement=n.jumpRingPlacement,this._submission.chainType=n.chainType?n.chainType:null,this._submission.chainLength=n.chainLength?n.chainLength:null,this._submission.chainPlating=n.chainPlating?n.chainPlating:null,this._submission.earringConfig=n.earringConfig?n.earringConfig:null,this._submission.engravingFont=n.engravingFont,this._submission.engravingText=n.engravingText,this._submission.submittedAt=n.submittedAt,this._submission.dateReceived=n.dateReceived,this._submission.isEvent=!!n.customer.event,this._submission.customerNotes=n.customerNotes,this._submission.internalNotes=n.internalNotes,this._submission.totalPrice=n.totalPrice,this._submission.amountPaid=n.amountPaid,this._submission.baseMetalPaid=n.baseMetalPaid,this._submission.baseMetalPrice=n.baseMetalPrice,this._isAdmin&&this._submission.waxWeight?this.metalWeightAndPriceService.get(this._submission.waxWeight,n.kitType.id,n.earringConfig?n.earringConfig.id:null,n.castingType?n.castingType.name:null).subscribe((function(n){e.data.metalWeightsAndPrices=n,e.state.loadingPrices=!1})):this.state.loadingPrices=!1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"submissionData",{set:function(n){this._submissionData=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"jobActions",{set:function(n){if(n)for(var e=0,t=n;e<t.length;e++){var i=t[e];this._jobs.labourCost+=i.node.estimatedLaborCost,this._jobs.metalCost+=i.node.estimatedMetalCost,this._jobs.totalCost+=i.node.estimatedMetalCost+i.node.estimatedLaborCost}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"loadingJobActions",{set:function(n){this.state._loadingJobActions=n},enumerable:!1,configurable:!0}),n.\u0275fac=function(e){return new(e||n)(_.ac(a.a),_.ac(He.a),_.ac(w.b))},n.\u0275cmp=_.Ub({type:n,selectors:[["submission-view-finance"]],hostBindings:function(n,e){1&n&&_.rc("click",(function(n){return e.stopEditing(n)}),!1,_.Nc)("keyup.Enter",(function(n){return e.stopEditing(n)}),!1,_.Nc)},inputs:{castingCode:"castingCode",castingEstimateCode:"castingEstimateCode",editable:"editable",isAdmin:"isAdmin",loadingCastingCode:"loadingCastingCode",originalCastingCode:"originalCastingCode",submission:"submission",submissionData:"submissionData",jobActions:"jobActions",loadingJobActions:"loadingJobActions"},decls:57,vars:17,consts:[["submissionFinanceForm","ngForm"],[1,"row","py-3","box-divider-bottom","justify-content-start","mb-4"],[1,"col"],[1,"mb-2"],[1,"row","mb-5"],[1,"col-md-6"],[1,"box-title"],[1,"card-details"],[4,"ngIf"],[3,"editable",4,"ngIf"],[1,"text-muted"],["class","col-12 tc mt-3",4,"ngIf"],[1,"row"],[3,"ngbTooltip",4,"ngIf"],[1,"row","py-3","box-divider-bottom","justify-content-start","my-4"],["class","row",4,"ngIf"],[3,"no","yes",4,"ngIf"],["class","checkbox-wrapper m-0",3,"click",4,"ngIf"],["type","button",1,"btn","ml-1","icon-btn-outline","hover","icon-btn-small","fas","fa-pencil-alt",3,"click"],[1,"checkbox-wrapper","m-0",3,"click"],["id","baseMetalPaid","name","baseMetalPaid","type","checkbox",3,"ngModel","ngModelChange"],["for","baseMetalPaid"],["class","form-row w-100 align-items-center",4,"ngIf"],[1,"form-row","w-100","align-items-center"],[1,"col","flex-grow-1",3,"click"],["id","amountPaid","name","amountPaid","placeholder","How much did the item cost the customer","type","number",1,"form-control",3,"ngModel","ngModelChange"],["amountPaid","ngModel"],[1,"col-auto"],["type","button",1,"btn","ml-1","icon-btn-outline","icon-btn-small","fas","fa-check",3,"click"],[1,"col-12","tc","mt-3"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["id","metalWeight","name","metalWeight","placeholder","Finished item weight","type","number",1,"form-control",3,"ngModel","ngModelChange"],["metalWeight","ngModel"],[3,"ngbTooltip"],[1,"sub-value"],["class","sub-value",4,"ngIf"],[1,"text-muted","mb-0"],[3,"text-danger","text-success",4,"ngIf"],[1,"row","align-items-center","justify-content-start"],[1,"col-6"],[1,"shimmer","py-2"],[1,"col-2"],[1,"shimmer","py-2","ml-1"],["size","30"],["class","col-6 col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-6","col-md-4","mb-3"],[1,"ItemWithBorder","p-3"],[1,"item-details"],[2,"width","40%","margin-left","0"]],template:function(n,e){if(1&n&&(_.gc(0,"form",null,0),_.gc(2,"div",1),_.gc(3,"div",2),_.gc(4,"h5",3),_.dd(5,"Payment Information"),_.fc(),_.fc(),_.fc(),_.gc(6,"div",4),_.gc(7,"div",5),_.gc(8,"h6",6),_.dd(9,"Basic Details"),_.fc(),_.gc(10,"ul",7),_.bd(11,qe,6,3,"li",8),_.bd(12,Ve,6,3,"li",8),_.bd(13,Ke,5,4,"li",9),_.gc(14,"li"),_.gc(15,"span"),_.dd(16,"Initial Payment"),_.fc(),_.gc(17,"span"),_.dd(18,"See amount paid"),_.fc(),_.fc(),_.bd(19,nt,7,5,"li",8),_.gc(20,"li"),_.bc(21,"hr"),_.fc(),_.bd(22,it,6,4,"li",9),_.fc(),_.fc(),_.gc(23,"div",5),_.gc(24,"h6",6),_.dd(25,"Transactions"),_.fc(),_.gc(26,"p",10),_.dd(27,"Coming Soon."),_.fc(),_.fc(),_.fc(),_.bd(28,st,3,1,"div",11),_.gc(29,"div",1),_.gc(30,"div",2),_.gc(31,"h5",3),_.dd(32,"Finance Details"),_.fc(),_.fc(),_.fc(),_.gc(33,"div",12),_.gc(34,"div",5),_.gc(35,"h6",6),_.dd(36,"Estimates & Accruals"),_.fc(),_.gc(37,"ul",7),_.bd(38,ct,6,4,"li",8),_.bd(39,rt,5,4,"li",9),_.bd(40,dt,6,4,"li",13),_.bd(41,ut,6,4,"li",13),_.bd(42,lt,7,3,"li",8),_.bd(43,gt,9,3,"ng-container",8),_.bd(44,bt,13,4,"ng-container",8),_.fc(),_.fc(),_.gc(45,"div",5),_.gc(46,"h6",6),_.dd(47,"Sub Job Costs"),_.fc(),_.gc(48,"ul",7),_.bd(49,mt,3,0,"li",8),_.bd(50,Pt,29,15,"ng-container",8),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(51,"div",14),_.gc(52,"div",2),_.gc(53,"h5",3),_.dd(54,"Base Metal Prices"),_.fc(),_.fc(),_.fc(),_.bd(55,kt,3,0,"div",15),_.bd(56,At,2,1,"div",15)),2&n){var t=_.Mc(1);_.Mb(11),_.Cc("ngIf",!e._submission.isEvent&&!e._castingCode),_.Mb(1),_.Cc("ngIf",e._castingCode&&e._castingCode.castingPricePaid),_.Mb(1),_.Cc("ngIf",null!==e._submission.baseMetalPaid),_.Mb(6),_.Cc("ngIf",e._castingCode),_.Mb(3),_.Cc("ngIf",e._isAdmin),_.Mb(6),_.Cc("ngIf",t.dirty),_.Mb(10),_.Cc("ngIf",e._submissionData.submission.waxWeight),_.Mb(1),_.Cc("ngIf",e._submissionData.submission.status.manufacturerComplete),_.Mb(1),_.Cc("ngIf",e._submissionData.submission.estimatedLaborCost),_.Mb(1),_.Cc("ngIf",e._submissionData.submission.estimatedMetalCost),_.Mb(1),_.Cc("ngIf",e._submissionData.submission.estimatedLaborCost&&e._submissionData.submission.estimatedLaborCost),_.Mb(1),_.Cc("ngIf",e._submissionData.submission.estimatedLaborCost&&e._submissionData.submission.estimatedMetalCost),_.Mb(1),_.Cc("ngIf",e._submissionData.submission.kit&&e._castingCode),_.Mb(5),_.Cc("ngIf",!e._submissionData.jobs||!e._submissionData.jobs.length),_.Mb(1),_.Cc("ngIf",e._submissionData.jobs&&e._submissionData.jobs.length>0),_.Mb(5),_.Cc("ngIf",e.state.loadingPrices),_.Mb(1),_.Cc("ngIf",!e.state.loadingPrices&&e._submission.waxWeight&&e._isAdmin)}},directives:[c.z,c.l,c.m,s.u,c.a,c.k,c.n,c.q,c.d,P.m,j.a,O.a,s.t],pipes:[F.a,s.g],styles:[""]}),n}(),Nt=t("HEvJ"),Bt=t("b44C"),Dt=t("oy+2"),zt=t("0UpH"),Rt=t("KWY1"),Ft=t("dkTK"),Lt=function(){function n(){}return n.prototype.transform=function(n,e,t){return n&&e&&t?n.replace(new RegExp(this.escapeStr(e),"g"),t):n},n.prototype.escapeStr=function(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=_.Zb({name:"replace",type:n,pure:!0}),n}(),Wt=t("G0jp"),Ut=t("RNmn"),Gt=t("9WpQ"),Jt=function(){function n(){}return n.\u0275mod=_.Yb({type:n}),n.\u0275inj=_.Xb({factory:function(e){return new(e||n)},imports:[[s.c,c.f,P.g,le.c,Ce.f,Ce.j,o.a,ye,N.b]]}),n}();_.Tc(Dn.a,[s.r,s.s,s.t,s.u,s.B,s.x,s.y,s.z,s.A,s.v,s.w,c.z,c.p,c.y,c.d,c.q,c.t,c.a,c.v,c.w,c.s,c.k,c.l,c.u,c.h,c.g,c.r,c.b,c.e,c.n,c.o,c.m,P.c,P.d,P.h,P.f,P.e,P.k,le.a,le.g,le.d,le.b,le.e,le.f,Ce.b,Ce.k,Ce.g,Ce.e,Ce.c,Ce.d,Ce.i,Ce.l,Ce.h,Me.a,Pe,ke.a,we.a,Ie.a,xe.a,z.a,$e.a,Ae.a,Te.a,je.a,Oe.a,j.a,Ee.a,O.a,Ne.a,Be.a,D.a,E.a,P.m,I.a,r.a,De.a,B.a,ze.a,Re.a,Fe.a,Le.a,We.a,Ue.a,Ge.a,Et,$.a,Nt.a,T.a,x.a,Bt.a,A.a,k.g,k.c,k.e,k.d,k.h,N.a,N.n,N.d,N.c,N.e,N.f,N.g,N.h,N.i,N.j,N.k,N.l,N.m,Bn,he,Zn,se,Dn.a],[s.b,s.I,s.q,s.l,s.F,s.g,s.D,s.G,s.d,s.f,s.j,s.k,s.m,Dt.a,F.a,zt.a,R.a,W.a,Rt.a,Ft.a,Lt,Wt.a,L.a,Ut.a,Gt.a])},dkTK:function(n,e,t){"use strict";t.d(e,"a",(function(){return s}));var i=t("fXoL"),s=function(){function n(){}return n.prototype.transform=function(n,e,t){void 0===t&&(t="min"),n.length=0;var i=0;"min"===t&&(i=Math.min.apply(Math,e));for(var s=0;s<i;s++)n.push(s);return n},n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=i.Zb({name:"range",type:n,pure:!1}),n}()},i7jn:function(n,e,t){"use strict";t.d(e,"a",(function(){return C}));var i,s,c,o,a,r,d,u=t("EY2u"),l=t("lTCR"),g=t.n(l),f=g()(i||(r=["\n    query jobActionsByJobs(\n        $jobs: [String]!,\n    ) {\n        jobActions(\n            first: 999,\n            job_list: $jobs,\n        ) {\n            edges  {\n                node {\n                    id\n                    job {\n                        id\n                        currentlyWith {\n                            id\n                            company\n                        }\n                    }\n                    action {\n                        id\n                        name\n                    }\n                    supplier {\n                        id\n                        company\n                    }\n                    started\n                    startedAt\n                    completed\n                    completedAt\n                }\n            }\n        }\n    }\n"],d=["\n    query jobActionsByJobs(\n        $jobs: [String]!,\n    ) {\n        jobActions(\n            first: 999,\n            job_list: $jobs,\n        ) {\n            edges  {\n                node {\n                    id\n                    job {\n                        id\n                        currentlyWith {\n                            id\n                            company\n                        }\n                    }\n                    action {\n                        id\n                        name\n                    }\n                    supplier {\n                        id\n                        company\n                    }\n                    started\n                    startedAt\n                    completed\n                    completedAt\n                }\n            }\n        }\n    }\n"],Object.defineProperty?Object.defineProperty(r,"raw",{value:d}):r.raw=d,i=r)),b=g()(s||(s=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation updateJobAction(\n        $id: ID!,\n        $started: Boolean,\n        $startedAt: String,\n        $completed: Boolean,\n        $completedAt: String,\n    ) {\n        updateJobAction(input: {\n            id: $id\n            started: $started,\n            startedAt: $startedAt,\n            completed: $completed,\n            completedAt: $completedAt,\n            clientMutationId: "",\n        }) {\n            id\n            action {\n                id\n                name\n            }\n        }\n    }\n'],['\n    mutation updateJobAction(\n        $id: ID!,\n        $started: Boolean,\n        $startedAt: String,\n        $completed: Boolean,\n        $completedAt: String,\n    ) {\n        updateJobAction(input: {\n            id: $id\n            started: $started,\n            startedAt: $startedAt,\n            completed: $completed,\n            completedAt: $completedAt,\n            clientMutationId: "",\n        }) {\n            id\n            action {\n                id\n                name\n            }\n        }\n    }\n']))),m=g()(c||(c=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation createJobAction(\n        $job: String!,\n        $action: String!,\n        $supplier: String,\n        $started: Boolean,\n        $startedAt: String,\n        $completed: Boolean!,\n        $completedAt: String,\n    ) {\n        createJobAction(input: {\n            clientMutationId: ""\n            job: $job,\n            action: $action,\n            supplier: $supplier,\n            started: $started,\n            startedAt: $startedAt,\n            completed: $completed,\n            completedAt: $completedAt,\n        }) {\n            id\n            action {\n                id\n                name\n            }\n        }\n    }\n'],['\n    mutation createJobAction(\n        $job: String!,\n        $action: String!,\n        $supplier: String,\n        $started: Boolean,\n        $startedAt: String,\n        $completed: Boolean!,\n        $completedAt: String,\n    ) {\n        createJobAction(input: {\n            clientMutationId: ""\n            job: $job,\n            action: $action,\n            supplier: $supplier,\n            started: $started,\n            startedAt: $startedAt,\n            completed: $completed,\n            completedAt: $completedAt,\n        }) {\n            id\n            action {\n                id\n                name\n            }\n        }\n    }\n']))),p=g()(o||(o=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation deleteJobAction($id: ID!) {\n        deleteJobAction (\n            input: {\n                id: $id,\n                clientMutationId: ""\n            }\n        ) {\n            id\n        }\n    }\n'],['\n    mutation deleteJobAction($id: ID!) {\n        deleteJobAction (\n            input: {\n                id: $id,\n                clientMutationId: ""\n            }\n        ) {\n            id\n        }\n    }\n']))),h=g()(a||(a=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(["\n    query jobActionsFinanceByJobs(\n        $jobs: [String]!,\n    ) {\n        jobActions(\n            first: 999,\n            job_list: $jobs,\n        ) {\n            edges  {\n                node {\n                    id\n                    estimatedLaborCost\n                    estimatedMetalCost\n                }\n            }\n        }\n    }\n"],["\n    query jobActionsFinanceByJobs(\n        $jobs: [String]!,\n    ) {\n        jobActions(\n            first: 999,\n            job_list: $jobs,\n        ) {\n            edges  {\n                node {\n                    id\n                    estimatedLaborCost\n                    estimatedMetalCost\n                }\n            }\n        }\n    }\n"]))),v=t("fXoL"),y=t("/IUn"),C=function(){function n(n){this.apollo=n}return n.prototype.getFinanceByJobIds=function(n){return n.length?this.apollo.query({query:h,variables:{jobs:n}}):u.a},n.prototype.getByJobIds=function(n){return n.length?this.apollo.query({query:f,variables:{jobs:n},fetchPolicy:"network-only"}):u.a},n.prototype.update=function(n){return this.apollo.mutate({mutation:b,variables:n})},n.prototype.create=function(n){return this.apollo.mutate({mutation:m,variables:n})},n.prototype.delete=function(n){return e=this,void 0,i=function(){return function(n,e){var t,i,s,c,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(c){return function(a){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,i&&(s=2&c[0]?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,i=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){o.label=c[1];break}if(6===c[0]&&o.label<s[1]){o.label=s[1],s=c;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(c);break}s[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(n,o)}catch(a){c=[6,a],i=0}finally{t=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}}(this,(function(e){switch(e.label){case 0:return[4,this.apollo.mutate({mutation:p,variables:{id:n}}).toPromise()];case 1:return[2,e.sent()]}}))},new((t=void 0)||(t=Promise))((function(n,s){function c(n){try{a(i.next(n))}catch(e){s(e)}}function o(n){try{a(i.throw(n))}catch(e){s(e)}}function a(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(n){n(i)}))).then(c,o)}a((i=i.apply(e,[])).next())}));var e,t,i},n.\u0275fac=function(e){return new(e||n)(v.oc(y.b))},n.\u0275prov=v.Wb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()},iUZM:function(n,e,t){"use strict";t.d(e,"a",(function(){return D}));var i=t("f3+V"),s=t("fXoL"),c=t("5eHb"),o=t("3Pt+"),a=t("ofXK"),r=t("ZOsW");function d(n,e){if(1&n){var t=s.hc();s.gc(0,"span",13),s.dd(1),s.wc(2,"titlecase"),s.gc(3,"button",14),s.rc("click",(function(n){s.Pc(t);var e=s.vc();return e.editing(e.keys.fullName,n)})),s.fc(),s.fc()}if(2&n){var i=s.vc();s.Mb(1),s.fd(" ",s.xc(2,1,i._customer.fullName)," ")}}function u(n,e){if(1&n){var t=s.hc();s.gc(0,"span",20),s.rc("click",(function(n){s.Pc(t);var e=s.vc(2);return e.editing(e.keys.fullName,n)})),s.gc(1,"input",21),s.rc("ngModelChange",(function(n){return s.Pc(t),s.vc(2)._customer.fullName=n})),s.fc(),s.fc()}if(2&n){var i=s.vc(2);s.Mb(1),s.Cc("ngModel",i._customer.fullName)}}function l(n,e){if(1&n){var t=s.hc();s.gc(0,"div",15),s.gc(1,"div",16),s.bd(2,u,2,1,"span",17),s.fc(),s.gc(3,"div",18),s.gc(4,"button",19),s.rc("click",(function(n){return s.Pc(t),s.vc().stopEditing(n)})),s.fc(),s.fc(),s.fc()}if(2&n){var i=s.vc();s.Mb(2),s.Cc("ngIf",i.currentlyEditing===i.keys.fullName)}}function g(n,e){if(1&n){var t=s.hc();s.gc(0,"span",13),s.gc(1,"a",22),s.dd(2),s.fc(),s.gc(3,"button",14),s.rc("click",(function(n){s.Pc(t);var e=s.vc(2);return e.editing(e.keys.email,n)})),s.fc(),s.fc()}if(2&n){var i=s.vc(2);s.Mb(1),s.Ec("href","mailto:",i._customer.email,"",s.Sc),s.Mb(1),s.ed(i._customer.email)}}function f(n,e){if(1&n){var t=s.hc();s.gc(0,"div",15),s.gc(1,"div",16),s.gc(2,"span",23),s.rc("click",(function(n){s.Pc(t);var e=s.vc(2);return e.editing(e.keys.email,n)})),s.gc(3,"input",24),s.rc("ngModelChange",(function(n){return s.Pc(t),s.vc(2)._customer.email=n})),s.fc(),s.fc(),s.fc(),s.gc(4,"div",18),s.gc(5,"button",19),s.rc("click",(function(n){return s.Pc(t),s.vc(2).stopEditing(n)})),s.fc(),s.fc(),s.fc()}if(2&n){var i=s.vc(2);s.Mb(3),s.Cc("ngModel",i._customer.email)}}function b(n,e){if(1&n&&(s.gc(0,"li"),s.gc(1,"span"),s.dd(2,"Email Address"),s.fc(),s.bd(3,g,4,2,"span",8),s.bd(4,f,6,1,"div",9),s.fc()),2&n){var t=s.vc();s.Sb("editable",t.keys.email&&t._editable),s.Mb(3),s.Cc("ngIf",t.currentlyEditing!==t.keys.email),s.Mb(1),s.Cc("ngIf",t.currentlyEditing===t.keys.email)}}function m(n,e){if(1&n){var t=s.hc();s.gc(0,"span",13),s.gc(1,"a",22),s.dd(2),s.fc(),s.gc(3,"button",14),s.rc("click",(function(n){s.Pc(t);var e=s.vc(2);return e.editing(e.keys.phone,n)})),s.fc(),s.fc()}if(2&n){var i=s.vc(2);s.Mb(1),s.Ec("href","tel:",i._customer.phone,"",s.Sc),s.Mb(1),s.ed(i._customer.phone)}}function p(n,e){if(1&n){var t=s.hc();s.gc(0,"div",15),s.gc(1,"div",16),s.gc(2,"span",23),s.rc("click",(function(n){s.Pc(t);var e=s.vc(2);return e.editing(e.keys.phone,n)})),s.gc(3,"input",25),s.rc("ngModelChange",(function(n){return s.Pc(t),s.vc(2)._customer.phone=n})),s.fc(),s.fc(),s.fc(),s.gc(4,"div",18),s.gc(5,"button",19),s.rc("click",(function(n){return s.Pc(t),s.vc(2).stopEditing(n)})),s.fc(),s.fc(),s.fc()}if(2&n){var i=s.vc(2);s.Mb(3),s.Cc("ngModel",i._customer.phone)}}function h(n,e){if(1&n&&(s.gc(0,"li"),s.gc(1,"span"),s.dd(2,"Phone"),s.fc(),s.bd(3,m,4,2,"span",8),s.bd(4,p,6,1,"div",9),s.fc()),2&n){var t=s.vc();s.Sb("editable",t.keys.phone&&t._editable),s.Mb(3),s.Cc("ngIf",t.currentlyEditing!==t.keys.phone),s.Mb(1),s.Cc("ngIf",t.currentlyEditing===t.keys.phone)}}function v(n,e){if(1&n){var t=s.hc();s.gc(0,"span"),s.dd(1),s.gc(2,"button",14),s.rc("click",(function(n){s.Pc(t);var e=s.vc(2);return e.editing(e.keys.address1,n)})),s.fc(),s.fc()}if(2&n){var i=s.vc(2);s.Mb(1),s.fd(" ",i._customer.address1," ")}}function y(n,e){if(1&n){var t=s.hc();s.gc(0,"div",15),s.gc(1,"div",27),s.rc("click",(function(n){s.Pc(t);var e=s.vc(2);return e.editing(e.keys.address1,n)})),s.gc(2,"input",28),s.rc("ngModelChange",(function(n){return s.Pc(t),s.vc(2)._customer.address1=n})),s.fc(),s.fc(),s.gc(3,"div",18),s.gc(4,"button",19),s.rc("click",(function(n){return s.Pc(t),s.vc(2).stopEditing(n)})),s.fc(),s.fc(),s.fc()}if(2&n){var i=s.vc(2);s.Mb(2),s.Cc("ngModel",i._customer.address1)}}function C(n,e){if(1&n){var t=s.hc();s.gc(0,"span"),s.dd(1),s.gc(2,"button",14),s.rc("click",(function(n){s.Pc(t);var e=s.vc(3);return e.editing(e.keys.address2,n)})),s.fc(),s.fc()}if(2&n){var i=s.vc(3);s.Mb(1),s.fd(" ",i._customer.address2," ")}}function M(n,e){if(1&n){var t=s.hc();s.gc(0,"div",15),s.gc(1,"div",27),s.rc("click",(function(n){s.Pc(t);var e=s.vc(3);return e.editing(e.keys.address2,n)})),s.gc(2,"input",29),s.rc("ngModelChange",(function(n){return s.Pc(t),s.vc(3)._customer.address2=n})),s.fc(),s.fc(),s.gc(3,"div",18),s.gc(4,"button",19),s.rc("click",(function(n){return s.Pc(t),s.vc(3).stopEditing(n)})),s.fc(),s.fc(),s.fc()}if(2&n){var i=s.vc(3);s.Mb(2),s.Cc("ngModel",i._customer.address2)}}function S(n,e){if(1&n&&(s.gc(0,"li"),s.gc(1,"span"),s.dd(2,"Address Line 2"),s.fc(),s.bd(3,C,3,1,"span",26),s.bd(4,M,5,1,"div",9),s.fc()),2&n){var t=s.vc(2);s.Sb("editable",t.keys.address2&&t._editable),s.Mb(3),s.Cc("ngIf",t.currentlyEditing!==t.keys.address2),s.Mb(1),s.Cc("ngIf",t.currentlyEditing===t.keys.address2)}}function _(n,e){if(1&n){var t=s.hc();s.gc(0,"span"),s.dd(1),s.gc(2,"button",14),s.rc("click",(function(n){s.Pc(t);var e=s.vc(2);return e.editing(e.keys.city,n)})),s.fc(),s.fc()}if(2&n){var i=s.vc(2);s.Mb(1),s.fd(" ",i._customer.city," ")}}function P(n,e){if(1&n){var t=s.hc();s.gc(0,"div",15),s.gc(1,"div",27),s.rc("click",(function(n){s.Pc(t);var e=s.vc(2);return e.editing(e.keys.city,n)})),s.gc(2,"input",30),s.rc("ngModelChange",(function(n){return s.Pc(t),s.vc(2)._customer.city=n})),s.fc(),s.fc(),s.gc(3,"div",18),s.gc(4,"button",19),s.rc("click",(function(n){return s.Pc(t),s.vc(2).stopEditing(n)})),s.fc(),s.fc(),s.fc()}if(2&n){var i=s.vc(2);s.Mb(2),s.Cc("ngModel",i._customer.city)}}function k(n,e){if(1&n){var t=s.hc();s.gc(0,"span"),s.dd(1),s.gc(2,"button",14),s.rc("click",(function(n){s.Pc(t);var e=s.vc(3);return e.editing(e.keys.county,n)})),s.fc(),s.fc()}if(2&n){var i=s.vc(3);s.Mb(1),s.fd(" ",i._customer.county," ")}}function w(n,e){if(1&n){var t=s.hc();s.gc(0,"div",15),s.gc(1,"div",27),s.rc("click",(function(n){s.Pc(t);var e=s.vc(3);return e.editing(e.keys.county,n)})),s.gc(2,"input",31),s.rc("ngModelChange",(function(n){return s.Pc(t),s.vc(3)._customer.county=n})),s.fc(),s.fc(),s.gc(3,"div",18),s.gc(4,"button",19),s.rc("click",(function(n){return s.Pc(t),s.vc(3).stopEditing(n)})),s.fc(),s.fc(),s.fc()}if(2&n){var i=s.vc(3);s.Mb(2),s.Cc("ngModel",i._customer.county)}}function I(n,e){if(1&n&&(s.gc(0,"li"),s.gc(1,"span"),s.dd(2,"County / State"),s.fc(),s.bd(3,k,3,1,"span",26),s.bd(4,w,5,1,"div",9),s.fc()),2&n){var t=s.vc(2);s.Sb("editable",t.keys.county&&t._editable),s.Mb(3),s.Cc("ngIf",t.currentlyEditing!==t.keys.county),s.Mb(1),s.Cc("ngIf",t.currentlyEditing===t.keys.county)}}function x(n,e){if(1&n){var t=s.hc();s.gc(0,"span"),s.dd(1),s.wc(2,"uppercase"),s.gc(3,"button",14),s.rc("click",(function(n){s.Pc(t);var e=s.vc(2);return e.editing(e.keys.postcode,n)})),s.fc(),s.fc()}if(2&n){var i=s.vc(2);s.Mb(1),s.fd(" ",s.xc(2,1,i._customer.postcode)," ")}}function $(n,e){if(1&n){var t=s.hc();s.gc(0,"div",15),s.gc(1,"div",27),s.rc("click",(function(n){s.Pc(t);var e=s.vc(2);return e.editing(e.keys.postcode,n)})),s.gc(2,"input",32),s.rc("ngModelChange",(function(n){return s.Pc(t),s.vc(2)._customer.postcode=n})),s.fc(),s.fc(),s.gc(3,"div",18),s.gc(4,"button",19),s.rc("click",(function(n){return s.Pc(t),s.vc(2).stopEditing(n)})),s.fc(),s.fc(),s.fc()}if(2&n){var i=s.vc(2);s.Mb(2),s.Cc("ngModel",i._customer.postcode)}}function A(n,e){if(1&n){var t=s.hc();s.gc(0,"span"),s.dd(1),s.gc(2,"button",14),s.rc("click",(function(n){s.Pc(t);var e=s.vc(2);return e.editing(e.keys.country,n)})),s.fc(),s.fc()}if(2&n){var i=s.vc(2);s.Mb(1),s.fd(" ",i._customer.country," ")}}function T(n,e){if(1&n&&(s.gc(0,"ng-option",35),s.dd(1),s.wc(2,"titlecase"),s.fc()),2&n){var t=e.$implicit;s.Cc("value",t.node.name),s.Mb(1),s.fd(" ",s.xc(2,2,t.node.name)," ")}}function j(n,e){if(1&n){var t=s.hc();s.gc(0,"div",15),s.gc(1,"div",27),s.rc("click",(function(n){s.Pc(t);var e=s.vc(2);return e.editing(e.keys.country,n)})),s.gc(2,"ng-select",33),s.rc("ngModelChange",(function(n){return s.Pc(t),s.vc(2)._customer.country=n})),s.bd(3,T,3,4,"ng-option",34),s.fc(),s.fc(),s.gc(4,"div",18),s.gc(5,"button",19),s.rc("click",(function(n){return s.Pc(t),s.vc(2).stopEditing(n)})),s.fc(),s.fc(),s.fc()}if(2&n){var i=s.vc(2);s.Mb(2),s.Cc("ngModel",i._customer.country)("searchable",!0),s.Mb(1),s.Cc("ngForOf",i._countries)}}function O(n,e){if(1&n&&(s.gc(0,"div",5),s.gc(1,"h6",6),s.dd(2,"Address Information"),s.fc(),s.gc(3,"ul",7),s.gc(4,"li"),s.gc(5,"span"),s.dd(6,"Address Line 1"),s.fc(),s.bd(7,v,3,1,"span",26),s.bd(8,y,5,1,"div",9),s.fc(),s.bd(9,S,5,4,"li",10),s.gc(10,"li"),s.gc(11,"span"),s.dd(12,"Town / City"),s.fc(),s.bd(13,_,3,1,"span",26),s.bd(14,P,5,1,"div",9),s.fc(),s.bd(15,I,5,4,"li",10),s.gc(16,"li"),s.gc(17,"span"),s.dd(18,"Postcode"),s.fc(),s.bd(19,x,4,3,"span",26),s.bd(20,$,5,1,"div",9),s.fc(),s.gc(21,"li"),s.gc(22,"span"),s.dd(23,"Country"),s.fc(),s.bd(24,A,3,1,"span",26),s.bd(25,j,6,3,"div",9),s.fc(),s.fc(),s.fc()),2&n){var t=s.vc();s.Mb(4),s.Sb("editable",t.keys.address1&&t._editable),s.Mb(3),s.Cc("ngIf",t.currentlyEditing!==t.keys.address1),s.Mb(1),s.Cc("ngIf",t.currentlyEditing===t.keys.address1),s.Mb(1),s.Cc("ngIf",t._customer.address2||t._editable),s.Mb(1),s.Sb("editable",t.keys.city&&t._editable),s.Mb(3),s.Cc("ngIf",t.currentlyEditing!==t.keys.city),s.Mb(1),s.Cc("ngIf",t.currentlyEditing===t.keys.city),s.Mb(1),s.Cc("ngIf",t._customer.county||t._editable),s.Mb(1),s.Sb("editable",t.keys.postcode&&t._editable),s.Mb(3),s.Cc("ngIf",t.currentlyEditing!==t.keys.postcode),s.Mb(1),s.Cc("ngIf",t.currentlyEditing===t.keys.postcode),s.Mb(1),s.Sb("editable",t.keys.country&&t._editable),s.Mb(3),s.Cc("ngIf",t.currentlyEditing!==t.keys.country),s.Mb(1),s.Cc("ngIf",t.currentlyEditing===t.keys.country)}}function E(n,e){if(1&n){var t=s.hc();s.gc(0,"div",36),s.gc(1,"button",37),s.rc("click",(function(){s.Pc(t);var n=s.vc(),e=s.Mc(1);return n.updateCustomer(e)})),s.dd(2,"Update Customer "),s.fc(),s.fc()}if(2&n){var i=s.vc();s.Mb(1),s.Cc("disabled",i.updating)}}var N=function(){return function(){}}(),B=function(){return function(){this.fullName="fullName",this.address1="address1",this.address2="address2",this.city="city",this.county="county",this.country="country",this.postcode="postcode",this.phone="phone",this.email="email",this.event="event"}}(),D=function(){function n(n,e){this.customerService=n,this.toastrService=e,this._countries=[],this.currentlyEditing=null,this._customer=new N,this._editable=!1,this._isAdmin=!1,this.keys=new B,this.updating=!1}return n.prototype.editing=function(n,e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),this._editable&&(t&&(this._customer[n]=i.find((function(n){return n.node.name===t})).node.name),e.stopPropagation(),this.currentlyEditing=n)},n.prototype.stopEditing=function(n){this.currentlyEditing=null},n.prototype.updateCustomer=function(n){var e=this;this._customer.fullName&&this._customer.email&&this._customer.phone&&this._customer.address1&&this._customer.city&&this._customer.postcode&&this._customer.country?(this.updating=!0,this.toastrService.success("","Updating Customer Information"),this.customerService.updateEdit(this._customer).subscribe((function(t){e.updating=!1,e.toastrService.success("","Customer Information Updated"),n.form.markAsPristine()}))):this.toastrService.error("","Please fill in all required customer data")},Object.defineProperty(n.prototype,"countries",{set:function(n){this._countries=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"customer",{set:function(n){n.node&&(n=n.node),this._customer.id=n.id,this._customer.fullName=n.fullName,this._customer.address1=n.address1,this._customer.address2=n.address2,this._customer.city=n.city,this._customer.county=n.county,this._customer.country=n.country,this._customer.postcode=n.postcode,this._customer.phone=n.phone,this._customer.email=n.email,this._customer.event=n.event?n.event.name:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"editable",{set:function(n){this._editable=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAdmin",{set:function(n){this._isAdmin=n},enumerable:!1,configurable:!0}),n.\u0275fac=function(e){return new(e||n)(s.ac(i.a),s.ac(c.b))},n.\u0275cmp=s.Ub({type:n,selectors:[["submission-view-customer"]],hostBindings:function(n,e){1&n&&s.rc("click",(function(n){return e.stopEditing(n)}),!1,s.Nc)("keyup.Enter",(function(n){return e.stopEditing(n)}),!1,s.Nc)},inputs:{countries:"countries",customer:"customer",editable:"editable",isAdmin:"isAdmin"},decls:20,vars:8,consts:[["customerViewForm","ngForm"],[1,"row","py-3","box-divider-bottom","justify-content-start","mb-4"],[1,"col"],[1,"mb-2"],[1,"row"],[1,"col-md-6"],[1,"box-title"],[1,"card-details"],["class","value",4,"ngIf"],["class","form-row w-100 align-items-center",4,"ngIf"],[3,"editable",4,"ngIf"],["class","col-md-6",4,"ngIf"],["class","col-12 tc mt-3",4,"ngIf"],[1,"value"],["type","button",1,"btn","ml-1","icon-btn-outline","hover","icon-btn-small","fas","fa-pencil-alt",3,"click"],[1,"form-row","w-100","align-items-center"],[1,"col","flex-grow-1"],[3,"click",4,"ngIf"],[1,"col-auto"],["type","button",1,"btn","ml-1","icon-btn-outline","icon-btn-small","fas","fa-times",3,"click"],[3,"click"],["name","fullName","type","text",1,"form-control",3,"ngModel","ngModelChange"],[3,"href"],[1,"w-100",3,"click"],["name","email","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","phone","type","text",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"col","flex-grow-1",3,"click"],["name","address1","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","address2","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","city","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","county","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","postcode","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","country",3,"ngModel","searchable","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-12","tc","mt-3"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(n,e){if(1&n&&(s.gc(0,"form",null,0),s.gc(2,"div",1),s.gc(3,"div",2),s.gc(4,"h5",3),s.dd(5,"Customer Details"),s.fc(),s.fc(),s.fc(),s.gc(6,"div",4),s.gc(7,"div",5),s.gc(8,"h6",6),s.dd(9,"Personal Information"),s.fc(),s.gc(10,"ul",7),s.gc(11,"li"),s.gc(12,"span"),s.dd(13,"Full Name"),s.fc(),s.bd(14,d,4,3,"span",8),s.bd(15,l,5,1,"div",9),s.fc(),s.bd(16,b,5,4,"li",10),s.bd(17,h,5,4,"li",10),s.fc(),s.fc(),s.bd(18,O,26,18,"div",11),s.fc(),s.bd(19,E,3,1,"div",12),s.fc()),2&n){var t=s.Mc(1);s.Mb(11),s.Sb("editable",e.keys.fullName&&e._editable),s.Mb(3),s.Cc("ngIf",e.currentlyEditing!==e.keys.fullName),s.Mb(1),s.Cc("ngIf",e.currentlyEditing===e.keys.fullName),s.Mb(1),s.Cc("ngIf",e._customer.email&&e._isAdmin),s.Mb(1),s.Cc("ngIf",e._isAdmin&&e._customer.phone),s.Mb(1),s.Cc("ngIf",e._isAdmin),s.Mb(1),s.Cc("ngIf",t.dirty)}},directives:[o.z,o.l,o.m,a.u,o.d,o.k,o.n,r.a,a.t,r.n],pipes:[a.G,a.I],styles:[""]}),n}()},jmmt:function(n,e,t){"use strict";t.d(e,"a",(function(){return r}));var i=t("DHi0"),s=t("fXoL"),c=t("ofXK"),o=t("mm/Q");function a(n,e){if(1&n&&(s.gc(0,"div",5),s.bc(1,"img",6),s.fc()),2&n){var t=e.$implicit,i=e.index;s.Mb(1),s.Cc("gallery","submissionPhotos")("lightbox",i)("src",t.data.thumb,s.Sc)}}var r=function(){function n(n){this.gallery=n,this.items=[],this.galleryId="submissionPhotos"}return Object.defineProperty(n.prototype,"photos",{set:function(n){for(var e=0,t=n;e<t.length;e++){var s=t[e];s.node&&(s=s.node),s.signedMidsizeDownloadUrl||(s.signedMidsizeDownloadUrl=s.signedDownloadUrl),s.signedThumbnailDownloadUrl||(s.signedThumbnailDownloadUrl=s.signedDownloadUrl),this.items.push(new i.d({src:s.signedMidsizeDownloadUrl,thumb:s.signedThumbnailDownloadUrl}))}var c=this.gallery.ref(this.galleryId);c.setConfig({loadingStrategy:"lazy",imageSize:"contain"}),c.load(this.items)},enumerable:!1,configurable:!0}),n.\u0275fac=function(e){return new(e||n)(s.ac(i.a))},n.\u0275cmp=s.Ub({type:n,selectors:[["submission-view-photos"]],inputs:{photos:"photos"},decls:6,vars:1,consts:[[1,"row","py-3","box-divider-bottom","justify-content-start","mb-4"],[1,"col"],[1,"mb-2"],[1,"row"],["class","col-sm-4 col-lg-3 col-xl-2 mb-1",4,"ngFor","ngForOf"],[1,"col-sm-4","col-lg-3","col-xl-2","mb-1"],["alt","Reload the page. If you are seeing this, the link may have expired.",3,"gallery","lightbox","src"]],template:function(n,e){1&n&&(s.gc(0,"div",0),s.gc(1,"div",1),s.gc(2,"h5",2),s.dd(3,"Photos"),s.fc(),s.fc(),s.fc(),s.gc(4,"div",3),s.bd(5,a,2,3,"div",4),s.fc()),2&n&&(s.Mb(5),s.Cc("ngForOf",e.items))},directives:[c.t,o.b],styles:[""]}),n}()},"kvL/":function(n,e,t){"use strict";t.d(e,"c",(function(){return j})),t.d(e,"a",(function(){return x})),t.d(e,"d",(function(){return w})),t.d(e,"b",(function(){return $})),t.d(e,"f",(function(){return T})),t.d(e,"e",(function(){return A})),t.d(e,"g",(function(){return _}));var i=t("Ji7U"),s=t("LK+K"),c=t("o0o1"),o=t.n(c),a=t("vuIU"),r=t("1OyB"),d=t("fXoL"),u=t("uA/v"),l=t("ofXK"),g=t("jhN1");function f(n,e){if(1&n){var t=d.hc();d.gc(0,"ngx-dropzone-remove-badge",1),d.rc("click",(function(n){return d.Pc(t),d.vc()._remove(n)})),d.fc()}}var b=[[["ngx-dropzone-label"]]],m=["ngx-dropzone-label"],p=["fileInput"];function h(n,e){1&n&&d.Ac(0,2,["*ngIf","!_hasPreviews"])}var v=[[["ngx-dropzone-preview"]],"*",[["ngx-dropzone-label"]]],y=["ngx-dropzone-preview","*","ngx-dropzone-label"];function C(n,e){if(1&n){var t=d.hc();d.gc(0,"ngx-dropzone-remove-badge",2),d.rc("click",(function(n){return d.Pc(t),d.vc()._remove(n)})),d.fc()}}function M(n,e){if(1&n){var t=d.hc();d.gc(0,"video",2),d.rc("click",(function(n){return d.Pc(t),n.stopPropagation()})),d.bc(1,"source",3),d.fc()}if(2&n){var i=d.vc();d.Mb(1),d.Cc("src",i.sanitizedVideoSrc,d.Sc)}}function S(n,e){if(1&n){var t=d.hc();d.gc(0,"ngx-dropzone-remove-badge",4),d.rc("click",(function(n){return d.Pc(t),d.vc()._remove(n)})),d.fc()}}var _=function(){var n=function n(){Object(r.a)(this,n)};return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=d.Vb({type:n,selectors:[["ngx-dropzone-label"]]}),n}();function P(n){return null!=n&&"false"!=="".concat(n)}var k=function(){var n={BACKSPACE:8,DELETE:46};return n[n.BACKSPACE]="BACKSPACE",n[n.DELETE]="DELETE",n}(),w=function(){var n=function(){function n(e){Object(r.a)(this,n),this.sanitizer=e,this._removable=!1,this.removed=new d.q,this.tabIndex=0}return Object(a.a)(n,[{key:"keyEvent",value:function(n){switch(n.keyCode){case k.BACKSPACE:case k.DELETE:this.remove()}}},{key:"_remove",value:function(n){n.stopPropagation(),this.remove()}},{key:"remove",value:function(){this._removable&&this.removed.next(this.file)}},{key:"readFile",value:function(){return Object(u.b)(this,void 0,void 0,o.a.mark((function n(){var e=this;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,t){var i=new FileReader;if(i.onload=function(e){n(e.target.result)},i.onerror=function(n){console.error("FileReader failed on file ".concat(e.file.name,".")),t(n)},!e.file)return t("No file to read. Please provide a file using the [file] Input property.");i.readAsDataURL(e.file)})));case 1:case"end":return n.stop()}}),n)})))}},{key:"removable",get:function(){return this._removable},set:function(n){this._removable=P(n)}},{key:"hostStyle",get:function(){return this.sanitizer.bypassSecurityTrustStyle("\n\t\t\tdisplay: flex;\n\t\t\theight: 140px;\n\t\t\tmin-height: 140px;\n\t\t\tmin-width: 180px;\n\t\t\tmax-width: 180px;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 20px;\n\t\t\tmargin: 10px;\n\t\t\tborder-radius: 5px;\n\t\t\tposition: relative;\n\t\t")}}]),n}();return n.\u0275fac=function(e){return new(e||n)(d.ac(g.b))},n.\u0275cmp=d.Ub({type:n,selectors:[["ngx-dropzone-preview"]],hostVars:3,hostBindings:function(n,e){1&n&&d.rc("keyup",(function(n){return e.keyEvent(n)})),2&n&&(d.jc("tabindex",e.tabIndex),d.Xc(e.hostStyle))},inputs:{removable:"removable",file:"file"},outputs:{removed:"removed"},ngContentSelectors:m,decls:2,vars:1,consts:[[3,"click",4,"ngIf"],[3,"click"]],template:function(n,e){1&n&&(d.Bc(b),d.Ac(0),d.bd(1,f,1,0,"ngx-dropzone-remove-badge",0)),2&n&&(d.Mb(1),d.Cc("ngIf",e.removable))},directives:function(){return[l.u,A]},styles:["[_nghost-%COMP%]{background-image:linear-gradient(to top,#ededed,#efefef,#f1f1f1,#f4f4f4,#f6f6f6)}[_nghost-%COMP%]:focus, [_nghost-%COMP%]:hover{background-image:linear-gradient(to top,#e3e3e3,#ebeaea,#e8e7e7,#ebeaea,#f4f4f4);outline:0}[_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]     ngx-dropzone-label{overflow-wrap:break-word}"]}),n}(),I=function(){var n=function(){function n(){Object(r.a)(this,n)}return Object(a.a)(n,[{key:"parseFileList",value:function(n,e,t,i){for(var s=[],c=[],o=0;o<n.length;o++){var a=n.item(o);this.isAccepted(a,e)?t&&a.size>t?this.rejectFile(c,a,"size"):!i&&s.length>=1?this.rejectFile(c,a,"no_multiple"):s.push(a):this.rejectFile(c,a,"type")}return{addedFiles:s,rejectedFiles:c}}},{key:"isAccepted",value:function(n,e){if("*"===e)return!0;var t=e.split(",").map((function(n){return n.toLowerCase().trim()})),i=n.type.toLowerCase(),s=n.name.toLowerCase();return!!t.find((function(n){return n.endsWith("/*")?i.split("/")[0]===n.split("/")[0]:n.startsWith(".")?s.endsWith(n):n==i}))}},{key:"rejectFile",value:function(n,e,t){var i=e;i.reason=t,n.push(i)}}]),n}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=d.Wb({token:n,factory:n.\u0275fac}),n}(),x=function(){var n=function(){function n(e){Object(r.a)(this,n),this.service=e,this.change=new d.q,this.accept="*",this._disabled=!1,this._multiple=!0,this._maxFileSize=void 0,this._expandable=!1,this._disableClick=!1,this._isHovered=!1}return Object(a.a)(n,[{key:"_onClick",value:function(){this.disableClick||this.showFileSelector()}},{key:"_onDragOver",value:function(n){this.disabled||(this.preventDefault(n),this._isHovered=!0)}},{key:"_onDragLeave",value:function(){this._isHovered=!1}},{key:"_onDrop",value:function(n){this.disabled||(this.preventDefault(n),this._isHovered=!1,this.handleFileDrop(n.dataTransfer.files))}},{key:"showFileSelector",value:function(){this.disabled||this._fileInput.nativeElement.click()}},{key:"_onFilesSelected",value:function(n){this.handleFileDrop(n.target.files),this._fileInput.nativeElement.value="",this.preventDefault(n)}},{key:"handleFileDrop",value:function(n){var e=this.service.parseFileList(n,this.accept,this.maxFileSize,this.multiple);this.change.next({addedFiles:e.addedFiles,rejectedFiles:e.rejectedFiles,source:this})}},{key:"preventDefault",value:function(n){n.preventDefault(),n.stopPropagation()}},{key:"_hasPreviews",get:function(){return!!this._previewChildren.length}},{key:"disabled",get:function(){return this._disabled},set:function(n){this._disabled=P(n),this._isHovered&&(this._isHovered=!1)}},{key:"multiple",get:function(){return this._multiple},set:function(n){this._multiple=P(n)}},{key:"maxFileSize",get:function(){return this._maxFileSize},set:function(n){this._maxFileSize=function(n){return isNaN(parseFloat(n))||isNaN(Number(n))?null:Number(n)}(n)}},{key:"expandable",get:function(){return this._expandable},set:function(n){this._expandable=P(n)}},{key:"disableClick",get:function(){return this._disableClick},set:function(n){this._disableClick=P(n)}}]),n}();return n.\u0275fac=function(e){return new(e||n)(d.ac(I,2))},n.\u0275cmp=d.Ub({type:n,selectors:[["ngx-dropzone"],["","ngx-dropzone",""]],contentQueries:function(n,e,t){var i;1&n&&d.Tb(t,w,!0),2&n&&d.Lc(i=d.sc())&&(e._previewChildren=i)},viewQuery:function(n,e){var t;1&n&&d.jd(p,!0),2&n&&d.Lc(t=d.sc())&&(e._fileInput=t.first)},hostVars:8,hostBindings:function(n,e){1&n&&d.rc("click",(function(){return e._onClick()}))("dragover",(function(n){return e._onDragOver(n)}))("dragleave",(function(){return e._onDragLeave()}))("drop",(function(n){return e._onDrop(n)})),2&n&&d.Sb("ngx-dz-hovered",e._isHovered)("ngx-dz-disabled",e.disabled)("expandable",e.expandable)("unclickable",e.disableClick)},inputs:{accept:"accept",disabled:"disabled",multiple:"multiple",maxFileSize:"maxFileSize",expandable:"expandable",disableClick:"disableClick",id:"id",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedBy:["aria-describedby","ariaDescribedBy"]},outputs:{change:"change"},features:[d.Lb([I])],ngContentSelectors:y,decls:5,vars:8,consts:[["type","file",3,"id","multiple","accept","disabled","change"],["fileInput",""],[4,"ngIf"]],template:function(n,e){1&n&&(d.Bc(v),d.gc(0,"input",0,1),d.rc("change",(function(n){return e._onFilesSelected(n)})),d.fc(),d.bd(2,h,1,0,"ng-content",2),d.Ac(3),d.Ac(4,1)),2&n&&(d.Cc("id",e.id)("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled),d.Nb("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledby)("aria-describedby",e.ariaDescribedBy),d.Mb(2),d.Cc("ngIf",!e._hasPreviews))},directives:[l.u],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:180px;background:#fff;cursor:pointer;color:#717386;border:2px dashed #717386;border-radius:5px;font-size:16px;overflow-x:auto}.ngx-dz-hovered[_nghost-%COMP%]{border-style:solid}.ngx-dz-disabled[_nghost-%COMP%]{opacity:.5;cursor:no-drop;pointer-events:none}.expandable[_nghost-%COMP%]{overflow:hidden;height:unset;min-height:180px;flex-wrap:wrap}.unclickable[_nghost-%COMP%]{cursor:default}[_nghost-%COMP%]     ngx-dropzone-label{text-align:center;z-index:10;margin:10px auto}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus +   ngx-dropzone-label{outline:#000 dotted 1px;outline:-webkit-focus-ring-color auto 5px}"]}),n}(),$=function(){var n=function(n){Object(i.a)(t,n);var e=Object(s.a)(t);function t(n){var i;return Object(r.a)(this,t),(i=e.call(this,n)).defualtImgLoading="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBzdHlsZT0ibWFyZ2luOiBhdXRvOyBiYWNrZ3JvdW5kOiByZ2IoMjQxLCAyNDIsIDI0Mykgbm9uZSByZXBlYXQgc2Nyb2xsIDAlIDAlOyBkaXNwbGF5OiBibG9jazsgc2hhcGUtcmVuZGVyaW5nOiBhdXRvOyIgd2lkdGg9IjIyNHB4IiBoZWlnaHQ9IjIyNHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPgo8Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSIxNCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiM4NWEyYjYiIHN0cm9rZS1kYXNoYXJyYXk9IjIxLjk5MTE0ODU3NTEyODU1MiAyMS45OTExNDg1NzUxMjg1NTIiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+CiAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGR1cj0iMS4xNjI3OTA2OTc2NzQ0MTg0cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGtleVRpbWVzPSIwOzEiIHZhbHVlcz0iMCA1MCA1MDszNjAgNTAgNTAiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9jaXJjbGU+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjEwIiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZT0iI2JiY2VkZCIgc3Ryb2tlLWRhc2hhcnJheT0iMTUuNzA3OTYzMjY3OTQ4OTY2IDE1LjcwNzk2MzI2Nzk0ODk2NiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjE1LjcwNzk2MzI2Nzk0ODk2NiIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj4KICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZHVyPSIxLjE2Mjc5MDY5NzY3NDQxODRzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIga2V5VGltZXM9IjA7MSIgdmFsdWVzPSIwIDUwIDUwOy0zNjAgNTAgNTAiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9jaXJjbGU+CjwhLS0gW2xkaW9dIGdlbmVyYXRlZCBieSBodHRwczovL2xvYWRpbmcuaW8vIC0tPjwvc3ZnPg==",i.imageSrc=i.sanitizer.bypassSecurityTrustUrl(i.defualtImgLoading),i}return Object(a.a)(t,[{key:"ngOnInit",value:function(){var n=this;this.readFile().then((function(e){return setTimeout((function(){return n.imageSrc=e}))})).catch((function(n){return console.error(n)}))}}]),t}(w);return n.\u0275fac=function(e){return new(e||n)(d.ac(g.b))},n.\u0275cmp=d.Ub({type:n,selectors:[["ngx-dropzone-image-preview"]],features:[d.Lb([{provide:w,useExisting:n}]),d.Jb],ngContentSelectors:m,decls:3,vars:2,consts:[[3,"src"],[3,"click",4,"ngIf"],[3,"click"]],template:function(n,e){1&n&&(d.Bc(b),d.bc(0,"img",0),d.Ac(1),d.bd(2,C,1,0,"ngx-dropzone-remove-badge",1)),2&n&&(d.Cc("src",e.imageSrc,d.Sc),d.Mb(2),d.Cc("ngIf",e.removable))},directives:function(){return[l.u,A]},styles:["[_nghost-%COMP%]{min-width:unset!important;max-width:unset!important;padding:0!important}[_nghost-%COMP%]:focus   img[_ngcontent-%COMP%], [_nghost-%COMP%]:hover   img[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;border-radius:5px;opacity:.8}[_nghost-%COMP%]     ngx-dropzone-label{position:absolute;overflow-wrap:break-word}"]}),n}(),A=function(){var n=function n(){Object(r.a)(this,n)};return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=d.Ub({type:n,selectors:[["ngx-dropzone-remove-badge"]],decls:3,vars:0,consts:[["x1","0","y1","0","x2","10","y2","10"],["x1","0","y1","10","x2","10","y2","0"]],template:function(n,e){1&n&&(d.uc(),d.gc(0,"svg"),d.bc(1,"line",0),d.bc(2,"line",1),d.fc())},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:22px;width:22px;position:absolute;top:5px;right:5px;border-radius:50%;background:#bbb;color:#333;cursor:pointer}[_nghost-%COMP%]:hover{background:#aeaeae}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{height:10px;width:10px}[_nghost-%COMP%] > svg[_ngcontent-%COMP%] > line[_ngcontent-%COMP%]{stroke-width:2px;stroke:#fff}"]}),n}(),T=function(){var n=function(n){Object(i.a)(t,n);var e=Object(s.a)(t);function t(n){return Object(r.a)(this,t),e.call(this,n)}return Object(a.a)(t,[{key:"ngOnInit",value:function(){this.file?(this.videoSrc=URL.createObjectURL(this.file),this.sanitizedVideoSrc=this.sanitizer.bypassSecurityTrustUrl(this.videoSrc)):console.error("No file to read. Please provide a file using the [file] Input property.")}},{key:"ngOnDestroy",value:function(){URL.revokeObjectURL(this.videoSrc)}}]),t}(w);return n.\u0275fac=function(e){return new(e||n)(d.ac(g.b))},n.\u0275cmp=d.Ub({type:n,selectors:[["ngx-dropzone-video-preview"]],features:[d.Lb([{provide:w,useExisting:n}]),d.Jb],ngContentSelectors:m,decls:3,vars:2,consts:[["controls","",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["controls","",3,"click"],[3,"src"],[3,"click"]],template:function(n,e){1&n&&(d.Bc(b),d.bd(0,M,2,1,"video",0),d.Ac(1),d.bd(2,S,1,0,"ngx-dropzone-remove-badge",1)),2&n&&(d.Cc("ngIf",e.sanitizedVideoSrc),d.Mb(2),d.Cc("ngIf",e.removable))},directives:[l.u,A],styles:["[_nghost-%COMP%]{min-width:unset!important;max-width:unset!important;padding:0!important}[_nghost-%COMP%]:focus   video[_ngcontent-%COMP%], [_nghost-%COMP%]:hover   video[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   video[_ngcontent-%COMP%]{max-height:100%;border-radius:5px}[_nghost-%COMP%]     ngx-dropzone-label{position:absolute;overflow-wrap:break-word}"]}),n}(),j=function(){var n=function n(){Object(r.a)(this,n)};return n.\u0275mod=d.Yb({type:n}),n.\u0275inj=d.Xb({factory:function(e){return new(e||n)},imports:[[l.c]]}),n}()},lbMj:function(n,e,t){"use strict";t.d(e,"a",(function(){return s}));var i=t("fXoL"),s=function(){function n(){this._prefix="\xa3"}return Object.defineProperty(n.prototype,"prefix",{set:function(n){this._prefix=n},enumerable:!1,configurable:!0}),n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=i.Ub({type:n,selectors:[["input-prefix"]],inputs:{prefix:"prefix"},decls:3,vars:1,consts:[[1,"input-group-prepend"],[1,"input-group-text"]],template:function(n,e){1&n&&(i.gc(0,"div",0),i.gc(1,"div",1),i.dd(2),i.fc(),i.fc()),2&n&&(i.Mb(2),i.ed(e._prefix))},encapsulation:2}),n}()},o973:function(n,e,t){"use strict";t.d(e,"a",(function(){return u}));var i=t("fXoL"),s=t("ofXK"),c=t("wOBz");function o(n,e){1&n&&(i.gc(0,"div",3),i.gc(1,"div",4),i.gc(2,"h5",5),i.dd(3,"Stone Setting"),i.fc(),i.fc(),i.fc())}function a(n,e){1&n&&(i.gc(0,"div",6),i.gc(1,"div",4),i.bc(2,"loading-ring",7),i.fc(),i.fc())}function r(n,e){if(1&n&&(i.gc(0,"div",12),i.gc(1,"div",13),i.gc(2,"p"),i.gc(3,"strong"),i.dd(4),i.fc(),i.fc(),i.gc(5,"ul",14),i.gc(6,"li"),i.gc(7,"span"),i.dd(8,"Type"),i.fc(),i.gc(9,"span",15),i.dd(10),i.fc(),i.fc(),i.gc(11,"li"),i.gc(12,"span"),i.dd(13,"Size"),i.fc(),i.gc(14,"span",15),i.dd(15),i.fc(),i.fc(),i.gc(16,"li"),i.gc(17,"span"),i.dd(18,"Qty"),i.fc(),i.gc(19,"span",15),i.dd(20),i.fc(),i.fc(),i.fc(),i.fc(),i.fc()),2&n){var t=e.$implicit,s=e.index;i.Mb(4),i.fd("Placement #",s+1,""),i.Mb(6),i.ed(t.node.stoneType.name),i.Mb(5),i.ed(t.node.stoneSize.name),i.Mb(5),i.ed(t.node.number)}}function d(n,e){if(1&n&&(i.ec(0),i.gc(1,"div",8),i.gc(2,"div",4),i.gc(3,"h6",9),i.dd(4,"Stone Description"),i.fc(),i.gc(5,"pre",10),i.dd(6),i.fc(),i.fc(),i.fc(),i.gc(7,"div",6),i.bd(8,r,21,4,"div",11),i.fc(),i.dc()),2&n){var t=i.vc();i.Mb(6),i.ed(t._stoneDescription),i.Mb(2),i.Cc("ngForOf",t._stones)}}var u=function(){function n(){this._loading=!0}return Object.defineProperty(n.prototype,"stones",{set:function(n){this._stones=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stoneDescription",{set:function(n){this._stoneDescription=n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"loadingStones",{set:function(n){this._loading=n},enumerable:!1,configurable:!0}),n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=i.Ub({type:n,selectors:[["submission-view-stones"]],inputs:{stones:"stones",stoneDescription:"stoneDescription",loadingStones:"loadingStones"},decls:3,vars:3,consts:[["class","row py-3 box-divider-bottom justify-content-start mb-4",4,"ngIf"],["class","row",4,"ngIf"],[4,"ngIf"],[1,"row","py-3","box-divider-bottom","justify-content-start","mb-4"],[1,"col"],[1,"mb-2"],[1,"row"],["size","30"],[1,"row","mb-4"],[1,"card-title"],[1,"submissionNote"],["class","col-6 col-md-3",4,"ngFor","ngForOf"],[1,"col-6","col-md-3"],[1,"ItemWithBorder","p-3"],[1,"item-details"],[1,"d-block"]],template:function(n,e){1&n&&(i.bd(0,o,4,0,"div",0),i.bd(1,a,3,0,"div",1),i.bd(2,d,9,2,"ng-container",2)),2&n&&(i.Cc("ngIf",!e._loading&&e._stones&&e._stones.length),i.Mb(1),i.Cc("ngIf",e._loading),i.Mb(1),i.Cc("ngIf",!e._loading&&e._stones&&e._stones.length))},directives:[s.u,c.a,s.t],styles:[""]}),n}()},oZ8P:function(n,e,t){"use strict";t.d(e,"b",(function(){return W})),t.d(e,"a",(function(){return U}));var i=t("1uah"),s=t("Nlbt"),c=t("S6Vu"),o=t("CIHE"),a=t("9TxS"),r=t("P7K/"),d=t("mW4X"),u=t("AytR"),l=t("fXoL"),g=t("/IUn"),f=t("tk/3"),b=function(){function n(n,e){this.apollo=n,this.http=e}return n.prototype.list=function(n,e){return this.http.get(u.a.apiNonGraphQLUrl+"audit/App-Entity-"+n+"/"+e)},n.\u0275fac=function(e){return new(e||n)(l.oc(g.b),l.oc(f.b))},n.\u0275prov=l.Wb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),m=t("i7jn"),p=t("1kSV"),h=t("tyNb"),v=["viewAuditsModal"];function y(n,e){if(1&n){var t=l.hc();l.gc(0,"button",20),l.rc("click",(function(){return l.Pc(t),l.vc(2).viewAudits()})),l.dd(1,"Audit Log"),l.fc()}}function C(n,e){if(1&n&&(l.gc(0,"div",29),l.gc(1,"p",25),l.dd(2,"Casting Type"),l.fc(),l.gc(3,"p",26),l.dd(4),l.wc(5,"titlecase"),l.fc(),l.fc()),2&n){var t=l.vc(4);l.Mb(4),l.fd(" ",l.xc(5,1,t.data.submission.castingType.name)," ")}}function M(n,e){if(1&n&&(l.ec(0),l.gc(1,"div",27),l.gc(2,"p",25),l.dd(3,"Kit Details"),l.fc(),l.gc(4,"p",26),l.dd(5),l.fc(),l.fc(),l.gc(6,"div",27),l.gc(7,"p",25),l.dd(8,"Casting Code"),l.fc(),l.gc(9,"p",26),l.dd(10),l.wc(11,"uppercase"),l.fc(),l.fc(),l.bd(12,C,6,3,"div",28),l.dc()),2&n){var t=l.vc(3);l.Mb(5),l.ed(t.data.submission.kit?t.data.submission.kit.regCode:"No Kit"),l.Mb(5),l.fd(" ",l.xc(11,3,t.data.submission.castingCode)," "),l.Mb(2),l.Cc("ngIf",t.data.submission.castingType)}}function S(n,e){if(1&n&&(l.ec(0),l.gc(1,"div",29),l.gc(2,"p",25),l.dd(3,"Event"),l.fc(),l.gc(4,"p",26),l.dd(5),l.fc(),l.fc(),l.dc()),2&n){var t=l.vc(3);l.Mb(5),l.ed(t.data.submission.customer.event.name)}}function _(n,e){if(1&n&&(l.gc(0,"div",21),l.gc(1,"div",22),l.gc(2,"div",23),l.gc(3,"div",24),l.gc(4,"p",25),l.dd(5,"Date Submitted"),l.fc(),l.gc(6,"p",26),l.dd(7),l.wc(8,"simpleDateTime"),l.fc(),l.fc(),l.gc(9,"div",27),l.gc(10,"p",25),l.dd(11,"Date Received"),l.fc(),l.gc(12,"p",26),l.dd(13),l.wc(14,"simpleDateTime"),l.fc(),l.fc(),l.bd(15,M,13,5,"ng-container",1),l.bd(16,S,6,1,"ng-container",1),l.fc(),l.fc(),l.fc()),2&n){var t=l.vc(2);l.Mb(7),l.ed(l.xc(8,6,t.data.submission.submittedAt)),l.Mb(5),l.Sb("text-danger",!t.data.submission.dateReceived),l.Mb(1),l.fd(" ",t.data.submission.dateReceived?l.xc(14,8,t.data.submission.dateReceived):"Not yet received"," "),l.Mb(2),l.Cc("ngIf",t.data.submission.castingCode||t.data.submission.kit),l.Mb(1),l.Cc("ngIf",t.data.submission.customer.event)}}function P(n,e){if(1&n&&(l.gc(0,"div",9),l.bc(1,"submission-view-finance",30),l.fc()),2&n){var t=l.vc(2);l.Mb(1),l.Cc("castingCode",t.data.castingCode)("castingEstimateCode",t.data.castingCode?t.data.castingCode.estimatedCost:null)("editable",t.state.isAdmin)("isAdmin",t.state.isAdmin)("jobActions",t.data.jobActions)("loadingCastingCode",t.state.loadingCastingCode)("loadingJobActions",t.state.loadingJobActions)("submissionData",t.data)("submission",t.model)}}function k(n,e){if(1&n&&(l.gc(0,"div",9),l.bc(1,"submission-view-photos",31),l.fc()),2&n){var t=l.vc(2);l.Mb(1),l.Cc("photos",t.model.submissionPhotos.edges)}}function w(n,e){if(1&n&&(l.gc(0,"div",9),l.bc(1,"submission-view-jobs",32),l.fc()),2&n){var t=l.vc(2);l.Mb(1),l.Cc("jobs",t.data.jobs)}}function I(n,e){if(1&n&&(l.gc(0,"div",9),l.bc(1,"submission-view-customer",33),l.fc()),2&n){var t=l.vc(2);l.Mb(1),l.Cc("countries",t.data.countries)("customer",t.model.customer)("editable",t.state.isAdmin)("isAdmin",t.state.isAdmin)}}function x(n,e){if(1&n){var t=l.hc();l.gc(0,"form",4,5),l.rc("submit",(function(){return l.Pc(t),l.vc().onSubmit()})),l.gc(2,"div",6),l.gc(3,"div",7),l.gc(4,"div",8),l.gc(5,"div",9),l.gc(6,"div",10),l.gc(7,"div",11),l.gc(8,"h6",12),l.dd(9),l.wc(10,"numericId"),l.fc(),l.gc(11,"h4"),l.dd(12),l.gc(13,"span"),l.wc(14,"lowercaseDashes"),l.gc(15,"span"),l.dd(16),l.fc(),l.fc(),l.fc(),l.fc(),l.gc(17,"div",13),l.bd(18,y,2,0,"button",14),l.fc(),l.fc(),l.bd(19,_,17,10,"div",15),l.fc(),l.gc(20,"div",9),l.bc(21,"submission-view-submission",16),l.fc(),l.ec(22),l.gc(23,"div",9),l.bc(24,"submission-view-stones",17),l.fc(),l.dc(),l.gc(25,"div",9),l.bc(26,"submission-view-notes",18),l.fc(),l.bd(27,P,2,9,"div",19),l.bd(28,k,2,1,"div",19),l.bd(29,w,2,1,"div",19),l.bd(30,I,2,4,"div",19),l.fc(),l.fc(),l.fc(),l.fc()}if(2&n){var i=l.vc();l.Mb(9),l.hd(" ",i.data.submission.customer.event?"Event ":""," ",i.data.submission.castingCode||i.data.submission.kit?"Kit ":"","Submission - #",l.xc(10,29,i.data.submission.id)," "),l.Mb(3),l.fd(" ",i.data.submission.customer.fullName," "),l.Mb(1),l.Pb("status-pill status-",l.xc(14,31,i.data.submission.status.name)," ml-md-2"),l.Mb(3),l.ed(i.data.submission.status.name),l.Mb(2),l.Cc("ngIf",i.state.isAdmin),l.Mb(1),l.Cc("ngIf",i.state.isAdmin),l.Mb(2),l.Cc("castingCode",i.data.castingCode)("castingEstimateCode",i.data.castingCode?i.data.castingCode.estimatedCost:null)("editable",i.state.isAdmin)("isAdmin",i.state.isAdmin)("loadingCastingCode",i.state.loadingCastingCode)("submissionData",i.data)("submission",i.model)("hasStones",i.data.stones&&i.data.stones.length>0),l.Mb(3),l.Cc("stoneDescription",i.data.submission.stoneDescription)("loadingStones",i.state.loadingStones)("stones",i.data.stones),l.Mb(2),l.Cc("customerNote",i.data.submission.customerNotes)("isAdmin",i.state.isAdmin)("notes",i.data.submission.notes.edges)("submissionId",i.data.submission.id),l.Mb(1),l.Cc("ngIf",i.state.isAdmin),l.Mb(1),l.Cc("ngIf",i.model.submissionPhotos&&i.model.submissionPhotos.edges.length),l.Mb(1),l.Cc("ngIf",i.data.jobs&&i.data.jobs.length),l.Mb(1),l.Cc("ngIf",i.state.isAdmin)}}function $(n,e){1&n&&(l.gc(0,"h3"),l.dd(1,"Submission not Found"),l.fc())}function A(n,e){1&n&&l.bc(0,"loading-ring",34),2&n&&l.Cc("size",60)}function T(n,e){if(1&n&&(l.gc(0,"td"),l.dd(1),l.fc()),2&n){var t=l.vc().$implicit;l.Mb(1),l.ed(t.old)}}function j(n,e){1&n&&(l.gc(0,"td"),l.dd(1,"[Not Set]"),l.fc())}function O(n,e){if(1&n&&(l.gc(0,"td"),l.dd(1),l.fc()),2&n){var t=l.vc().$implicit;l.Mb(1),l.ed(t.new)}}function E(n,e){1&n&&(l.gc(0,"td"),l.dd(1,"[Not Set]"),l.fc())}function N(n,e){if(1&n&&(l.ec(0),l.gc(1,"tr"),l.gc(2,"td"),l.dd(3),l.fc(),l.gc(4,"td"),l.dd(5),l.wc(6,"simpleDateTime"),l.fc(),l.gc(7,"td"),l.dd(8),l.fc(),l.bd(9,T,2,1,"td",1),l.bd(10,j,2,0,"td",1),l.bd(11,O,2,1,"td",1),l.bd(12,E,2,0,"td",1),l.fc(),l.dc()),2&n){var t=e.$implicit,i=l.vc().$implicit;l.Mb(3),l.ed(i.blame_user),l.Mb(2),l.ed(l.xc(6,7,i.created_at)),l.Mb(3),l.ed(t.label),l.Mb(1),l.Cc("ngIf",t.old),l.Mb(1),l.Cc("ngIf",!t.old),l.Mb(1),l.Cc("ngIf",t.new),l.Mb(1),l.Cc("ngIf",!t.new)}}function B(n,e){if(1&n&&(l.ec(0),l.bd(1,N,13,9,"ng-container",42),l.dc()),2&n){var t=e.$implicit;l.Mb(1),l.Cc("ngForOf",t.diffs)}}function D(n,e){if(1&n&&(l.ec(0),l.gc(1,"div",40),l.gc(2,"table",41),l.gc(3,"thead"),l.gc(4,"tr"),l.gc(5,"th"),l.dd(6,"User"),l.fc(),l.gc(7,"th"),l.dd(8,"Date"),l.fc(),l.gc(9,"th"),l.dd(10,"Field"),l.fc(),l.gc(11,"th"),l.dd(12,"Original"),l.fc(),l.gc(13,"th"),l.dd(14,"New"),l.fc(),l.fc(),l.fc(),l.gc(15,"tbody"),l.bd(16,B,2,1,"ng-container",42),l.fc(),l.fc(),l.fc(),l.dc()),2&n){var t=l.vc(3);l.Mb(16),l.Cc("ngForOf",t.data.submissionAudit.paginator.results)}}function z(n,e){if(1&n&&(l.gc(0,"div",38),l.gc(1,"h5",39),l.dd(2,"Submission Edits"),l.fc(),l.bd(3,D,17,1,"ng-container",1),l.fc()),2&n){var t=l.vc(2);l.Mb(3),l.Cc("ngIf",!t.state.loadingAudit)}}function R(n,e){1&n&&l.bc(0,"loading-ring",34),2&n&&l.Cc("size",60)}function F(n,e){if(1&n&&(l.bc(0,"modal-header",35),l.gc(1,"div",36),l.bd(2,z,4,1,"div",37),l.bd(3,R,1,1,"loading-ring",2),l.fc()),2&n){var t=e.$implicit,i=l.vc();l.Cc("modal",t),l.Mb(2),l.Cc("ngIf",i.data.submissionAudit),l.Mb(1),l.Cc("ngIf",i.state.loadingAudit)}}var L=function(){return function(){}}(),W=function(){return function(){this.appUser=null,this.baseMetals=[],this.chainLengths=[],this.chainTypes=[],this.countries=[],this.customersOtherSubmissions=[],this.earringConfigs=[],this.engravingFonts=r.a.list(),this.finishes=[],this.id=null,this.platings=[],this.ringSizeCustoms=[],this.ringThicknesses=[],this.stoneQuantities=[1,2,3,4,5,6,7,8,9],this.stones=[],this.stoneSizes=[],this.stoneTypes=[],this.submission=null,this.submissionAudit=null,this.jobs=[],this.jobActions=[]}}(),U=function(){function n(n,e,t,i,s,c,o,a,r,d){this.appUserService=n,this.auditService=e,this.castingCodeService=t,this.countryService=i,this.modalService=s,this.route=c,this.router=o,this.stoneSubmissionService=a,this.submissionService=r,this.jobActionService=d,this.state={found:!1,loading:!0,loadingAudit:!1,loadingCastingCode:!0,loadingJobActions:!0,loadingStones:!0,isAdmin:!1,isSupplier:!1},this.model=new L,this.data=new W,this.jobIds=[]}return n.prototype.ngOnInit=function(){var n=this;this.route.paramMap.subscribe((function(e){n.data.id=e.get("id"),Object(i.a)(n.appUserService.getMe(),n.submissionService.getById("/submissions/"+n.data.id),n.stoneSubmissionService.listBySubmission(["/submissions/"+n.data.id])).subscribe((function(e){var t=e[0],i=e[1],s=e[2];if(i.data.submission){if(n.state.found=!0,n.model=JSON.parse(JSON.stringify(i.data.submission)),n.data.appUser=t.data.appUser,n.data.submission=i.data.submission,n.data.stones=s.data.stoneSubmissions.edges,n.state.loadingStones=!1,i.data.submission.jobs){n.data.jobs=i.data.submission.jobs.edges;for(var c=0,o=i.data.submission.jobs.edges;c<o.length;c++)n.jobIds.push(o[c].node.id)}n.state.isAdmin=n.appUserService.isAdmin(n.data.appUser.roles),n.state.isSupplier=n.appUserService.isSupplier(n.data.appUser.roles),n.submissionService.listByCustomerId(n.data.submission.customer.id).subscribe((function(e){n.data.customersOtherSubmissions=e.data.submissions.edges})),n.data.submission.kit&&n.data.submission.castingCode&&n.state.isAdmin?n.castingCodeService.findByCode(n.data.submission.castingCode).subscribe((function(e){e.data.castingCodes.edges.length&&(n.data.castingCode=e.data.castingCodes.edges[0].node),n.state.loadingCastingCode=!1})):n.state.loadingCastingCode=!1,n.state.loading=!1,n.jobIds.length&&n.jobActionService.getFinanceByJobIds(n.jobIds).subscribe((function(e){n.data.jobActions=e.data.jobActions.edges,n.state.loadingJobActions=!1}))}else n.state.loading=!1})),n.submissionService.getKitSubmissionData().subscribe((function(e){n.data.baseMetals=e.data.baseMetals.edges,n.data.chainLengths=e.data.chainLengths.edges,n.data.chainTypes=e.data.chainTypes.edges,n.data.earringConfigs=e.data.earringConfigs.edges,n.data.finishes=e.data.finishes.edges,n.data.platings=e.data.platings.edges,n.data.ringThicknesses=e.data.ringThicknesses.edges,n.data.ringSizeCustoms=e.data.ringSizeCustoms.edges,n.data.stoneSizes=e.data.stoneSizes.edges,n.data.stoneTypes=e.data.stoneTypes.edges})),n.countryService.list().subscribe((function(e){n.data.countries=e.data.countries.edges}))}))},n.prototype.viewSubmission=function(n){this.router.navigate(["submission","view",n.replace(/\D/g,"")])},n.prototype.viewAudits=function(){var n=this;this.state.loadingAudit=!0,this.modalService.open(this.viewAuditsModal,{size:"lg"}),this.auditService.list("Submission",this.data.id).subscribe((function(e){n.data.submissionAudit=e,n.state.loadingAudit=!1}))},n.prototype.onSubmit=function(){},n.\u0275fac=function(e){return new(e||n)(l.ac(s.a),l.ac(b),l.ac(a.a),l.ac(d.a),l.ac(p.i),l.ac(h.a),l.ac(h.b),l.ac(o.a),l.ac(c.a),l.ac(m.a))},n.\u0275cmp=l.Ub({type:n,selectors:[["ng-component"]],viewQuery:function(n,e){var t;1&n&&l.jd(v,!0),2&n&&l.Lc(t=l.sc())&&(e.viewAuditsModal=t.first)},decls:5,vars:3,consts:[["class","portal-view","novalidate","",3,"submit",4,"ngIf"],[4,"ngIf"],[3,"size",4,"ngIf"],["viewAuditsModal",""],["novalidate","",1,"portal-view",3,"submit"],["viewSubmissionForm","ngForm"],[1,"container-fluid"],[1,"row"],[1,"col","main-content","CardlessUI"],[1,"col","Section","mb-5"],[1,"row","py-3","box-divider-bottom","justify-content-start","align-items-start"],[1,"col-md-6","col-12","mb-sm-2"],[1,"text-muted","mb-2"],[1,"col","align-self-end","text-md-right"],["class","btn btn-outline-secondary","type","button",3,"click",4,"ngIf"],["class","row py-3 justify-content-start",4,"ngIf"],[3,"castingCode","castingEstimateCode","editable","isAdmin","loadingCastingCode","submissionData","submission","hasStones"],[3,"stoneDescription","loadingStones","stones"],[3,"customerNote","isAdmin","notes","submissionId"],["class","col Section mb-5",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"row","py-3","justify-content-start"],[1,"col"],[1,"row","mx-0","justify-content-start","submission-info"],[1,"submission-info-block","box-border-right","pr-4"],[1,"label"],[1,"value"],[1,"submission-info-block","box-border-right","px-4"],["class","submission-info-block pl-4",4,"ngIf"],[1,"submission-info-block","pl-4"],[3,"castingCode","castingEstimateCode","editable","isAdmin","jobActions","loadingCastingCode","loadingJobActions","submissionData","submission"],[3,"photos"],[3,"jobs"],[3,"countries","customer","editable","isAdmin"],[3,"size"],["title","View Submission History",3,"modal"],[1,"modal-body"],["class","col-md-12 my-2",4,"ngIf"],[1,"col-md-12","my-2"],[1,"card-title"],[1,"table-responsive"],[1,"data-table"],[4,"ngFor","ngForOf"]],template:function(n,e){1&n&&(l.bd(0,x,31,33,"form",0),l.bd(1,$,2,0,"h3",1),l.bd(2,A,1,1,"loading-ring",2),l.bd(3,F,4,3,"ng-template",null,3,l.cd)),2&n&&(l.Cc("ngIf",!e.state.loading&&e.state.found),l.Mb(1),l.Cc("ngIf",!e.state.loading&&!e.state.found),l.Mb(1),l.Cc("ngIf",e.state.loading))},styles:[""]}),n}()},"oy+2":function(n,e,t){"use strict";t.d(e,"a",(function(){return s}));var i=t("fXoL"),s=function(){function n(){}return n.prototype.transform=function(n){if(n.hasOwnProperty("line1")){var e=Object.assign({},n);delete e.__typename,delete e.postcode,n=Object.values(e)}if(Array.isArray(n)){for(var t="",i=0,s=n;i<s.length;i++){var c=s[i];c&&(t+=", "+c)}return t.substr(2,t.length)}},n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=i.Zb({name:"address",type:n,pure:!0}),n}()},rYPC:function(n,e,t){"use strict";t.d(e,"a",(function(){return m}));var i,s,c,o,a=t("lTCR"),r=t.n(a),d=r()(i||(c=['\nmutation createImageLoggingSession(\n  $startTime: String!\n  $submission: String!\n) {\n  createImageLoggingSession(input: {\n    clientMutationId: ""\n    startTime: $startTime\n    submission: $submission\n  }) {\n  id\n  }\n}\n'],o=['\nmutation createImageLoggingSession(\n  $startTime: String!\n  $submission: String!\n) {\n  createImageLoggingSession(input: {\n    clientMutationId: ""\n    startTime: $startTime\n    submission: $submission\n  }) {\n  id\n  }\n}\n'],Object.defineProperty?Object.defineProperty(c,"raw",{value:o}):c.raw=o,i=c)),u=r()(s||(s=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation updateImageLoggingSessionEndTime(\n        $id: ID!\n        $endTime: String!\n    ) {\n        updateImageLoggingSession(input: {\n            id: $id,\n            endTime: $endTime,\n            clientMutationId: ""\n        }) {\n            id\n        }\n    }\n'],['\n    mutation updateImageLoggingSessionEndTime(\n        $id: ID!\n        $endTime: String!\n    ) {\n        updateImageLoggingSession(input: {\n            id: $id,\n            endTime: $endTime,\n            clientMutationId: ""\n        }) {\n            id\n        }\n    }\n']))),l=t("fXoL"),g=t("/IUn"),f=function(n,e,t,i){return new(t||(t=Promise))((function(s,c){function o(n){try{r(i.next(n))}catch(e){c(e)}}function a(n){try{r(i.throw(n))}catch(e){c(e)}}function r(n){var e;n.done?s(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(o,a)}r((i=i.apply(n,e||[])).next())}))},b=function(n,e){var t,i,s,c,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(c){return function(a){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,i&&(s=2&c[0]?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,i=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){o.label=c[1];break}if(6===c[0]&&o.label<s[1]){o.label=s[1],s=c;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(c);break}s[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(n,o)}catch(a){c=[6,a],i=0}finally{t=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}},m=function(){function n(n){this.apollo=n}return n.prototype.create=function(n){return f(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return[4,this.apollo.mutate({mutation:d,variables:n}).toPromise()];case 1:return[2,e.sent().data]}}))}))},n.prototype.updateEndTime=function(n){return f(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return[4,this.apollo.mutate({mutation:u,variables:n}).toPromise()];case 1:return[2,e.sent().data]}}))}))},n.\u0275fac=function(e){return new(e||n)(l.oc(g.b))},n.\u0275prov=l.Wb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()},uA1o:function(n,e,t){"use strict";t.d(e,"a",(function(){return y}));var i,s,c,o,a,r,d,u=t("lTCR"),l=t.n(u),g=l()(i||(r=['\n    mutation createSubmissionBatch(\n        $status: String!\n        $partner: String\n        $createdAt: String!\n        $updatedAt: String!\n        $supplier: String\n        $notes: String\n    ) {\n        createSubmissionBatch(input: {\n            clientMutationId: ""\n            status: $status\n            partner: $partner\n            createdAt: $createdAt\n            updatedAt: $updatedAt\n            supplier: $supplier\n            notes: $notes\n        }) {\n            id\n            status {\n                id\n                name\n            }\n            partner {\n                id\n                name\n            }\n            supplier {\n                id\n                company\n            }\n            updatedAt\n            createdAt\n        }\n    }\n'],d=['\n    mutation createSubmissionBatch(\n        $status: String!\n        $partner: String\n        $createdAt: String!\n        $updatedAt: String!\n        $supplier: String\n        $notes: String\n    ) {\n        createSubmissionBatch(input: {\n            clientMutationId: ""\n            status: $status\n            partner: $partner\n            createdAt: $createdAt\n            updatedAt: $updatedAt\n            supplier: $supplier\n            notes: $notes\n        }) {\n            id\n            status {\n                id\n                name\n            }\n            partner {\n                id\n                name\n            }\n            supplier {\n                id\n                company\n            }\n            updatedAt\n            createdAt\n        }\n    }\n'],Object.defineProperty?Object.defineProperty(r,"raw",{value:d}):r.raw=d,i=r)),f=l()(s||(s=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(["\n    query submissionBatchList(\n        $after: String,\n        $partnerComplete: Boolean,\n        $manufacturerComplete: Boolean,\n        $supplierExists: Boolean\n        $order: String,\n        $inProduction: Boolean,\n        $inQualityControl: Boolean,\n    ) {\n        submissionBatches (\n            after: $after,\n            status_partnerComplete: $partnerComplete,\n            status_manufacturerComplete: $manufacturerComplete,\n            status_inProduction: $inProduction,\n            status_inQualityControl: $inQualityControl\n            order: {createdAt: $order}\n            supplier: {exists: $supplierExists},\n        ) {\n            edges  {\n                node {\n                    id\n                    invoice\n                    invoiced\n                    status {\n                        id\n                        name\n                    }\n                    partner {\n                        id\n                        name\n                    }\n                    supplier {\n                        id\n                        company\n                    }\n                    updatedAt\n                    createdAt\n                    dateSent\n                }\n                cursor\n            }\n            pageInfo {\n                hasNextPage\n            }\n        }\n    }\n"],["\n    query submissionBatchList(\n        $after: String,\n        $partnerComplete: Boolean,\n        $manufacturerComplete: Boolean,\n        $supplierExists: Boolean\n        $order: String,\n        $inProduction: Boolean,\n        $inQualityControl: Boolean,\n    ) {\n        submissionBatches (\n            after: $after,\n            status_partnerComplete: $partnerComplete,\n            status_manufacturerComplete: $manufacturerComplete,\n            status_inProduction: $inProduction,\n            status_inQualityControl: $inQualityControl\n            order: {createdAt: $order}\n            supplier: {exists: $supplierExists},\n        ) {\n            edges  {\n                node {\n                    id\n                    invoice\n                    invoiced\n                    status {\n                        id\n                        name\n                    }\n                    partner {\n                        id\n                        name\n                    }\n                    supplier {\n                        id\n                        company\n                    }\n                    updatedAt\n                    createdAt\n                    dateSent\n                }\n                cursor\n            }\n            pageInfo {\n                hasNextPage\n            }\n        }\n    }\n"]))),b=l()(c||(c=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(["\n    query submissionBatchById($id: ID!) {\n        submissionBatch(id: $id) {\n            id\n            status {\n                id\n                name\n                incomingBatched\n            }\n            partner {\n                id\n                name\n            }\n            supplier {\n                id\n                company\n            }\n            dateSent\n            notes\n            createdAt\n            updatedAt\n            invoiced\n            invoice\n            invoiceLabourCost\n            invoiceSilverCost\n            invoice9ctYellowGoldCost\n            invoice9ctRoseGoldCost\n            invoice9ctWhiteGoldCost\n            invoice14ctYellowGoldCost\n            invoice14ctRoseGoldCost\n            invoice14ctWhiteGoldCost\n            invoice18ctYellowGoldCost\n            invoice18ctRoseGoldCost\n            invoice18ctWhiteGoldCost\n            invoicePlatinumCost\n            invoiceDeliveryCost\n        }\n    }\n\n"],["\n    query submissionBatchById($id: ID!) {\n        submissionBatch(id: $id) {\n            id\n            status {\n                id\n                name\n                incomingBatched\n            }\n            partner {\n                id\n                name\n            }\n            supplier {\n                id\n                company\n            }\n            dateSent\n            notes\n            createdAt\n            updatedAt\n            invoiced\n            invoice\n            invoiceLabourCost\n            invoiceSilverCost\n            invoice9ctYellowGoldCost\n            invoice9ctRoseGoldCost\n            invoice9ctWhiteGoldCost\n            invoice14ctYellowGoldCost\n            invoice14ctRoseGoldCost\n            invoice14ctWhiteGoldCost\n            invoice18ctYellowGoldCost\n            invoice18ctRoseGoldCost\n            invoice18ctWhiteGoldCost\n            invoicePlatinumCost\n            invoiceDeliveryCost\n        }\n    }\n\n"]))),m=l()(o||(o=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation updateSubmissionBatch(\n        $id: ID!,\n        $updatedAt: String!,\n        $status: String,\n        $dateSent: String,\n        $invoiced: Boolean,\n        $invoice: String,\n        $invoiceLabourCost: Int,\n        $invoiceDeliveryCost: Int,\n        $invoiceSilverCost: Int,\n        $invoice9ctYellowGoldCost: Int,\n        $invoice9ctRoseGoldCost: Int,\n        $invoice9ctWhiteGoldCost: Int,\n        $invoice14ctYellowGoldCost: Int,\n        $invoice14ctRoseGoldCost: Int,\n        $invoice14ctWhiteGoldCost: Int,\n        $invoice18ctYellowGoldCost: Int,\n        $invoice18ctRoseGoldCost: Int,\n        $invoice18ctWhiteGoldCost: Int,\n        $invoicePlatinumCost: Int\n    ) {\n        updateSubmissionBatch(input: {\n            id: $id,\n            updatedAt: $updatedAt,\n            status: $status,\n            dateSent: $dateSent,\n            invoiced: $invoiced,\n            invoice: $invoice,\n            invoiceLabourCost: $invoiceLabourCost,\n            invoiceDeliveryCost: $invoiceDeliveryCost,\n            invoiceSilverCost: $invoiceSilverCost,\n            invoice9ctYellowGoldCost: $invoice9ctYellowGoldCost,\n            invoice9ctRoseGoldCost: $invoice9ctRoseGoldCost,\n            invoice9ctWhiteGoldCost: $invoice9ctWhiteGoldCost,\n            invoice14ctYellowGoldCost: $invoice14ctYellowGoldCost,\n            invoice14ctRoseGoldCost: $invoice14ctRoseGoldCost,\n            invoice14ctWhiteGoldCost: $invoice14ctWhiteGoldCost,\n            invoice18ctYellowGoldCost: $invoice18ctYellowGoldCost,\n            invoice18ctRoseGoldCost: $invoice18ctRoseGoldCost,\n            invoice18ctWhiteGoldCost: $invoice18ctWhiteGoldCost,\n            invoicePlatinumCost: $invoicePlatinumCost,\n            clientMutationId: "",\n        }) {\n            id\n            dateSent\n            invoiced\n            status {\n                id\n                name\n                incomingBatched\n            }\n            invoice\n            invoiceLabourCost\n            invoiceDeliveryCost\n            invoiceSilverCost\n            invoice9ctYellowGoldCost\n            invoice9ctRoseGoldCost\n            invoice9ctWhiteGoldCost\n            invoice14ctYellowGoldCost\n            invoice14ctRoseGoldCost\n            invoice14ctWhiteGoldCost\n            invoice18ctYellowGoldCost\n            invoice18ctRoseGoldCost\n            invoice18ctWhiteGoldCost\n            invoicePlatinumCost\n        }\n    }\n'],['\n    mutation updateSubmissionBatch(\n        $id: ID!,\n        $updatedAt: String!,\n        $status: String,\n        $dateSent: String,\n        $invoiced: Boolean,\n        $invoice: String,\n        $invoiceLabourCost: Int,\n        $invoiceDeliveryCost: Int,\n        $invoiceSilverCost: Int,\n        $invoice9ctYellowGoldCost: Int,\n        $invoice9ctRoseGoldCost: Int,\n        $invoice9ctWhiteGoldCost: Int,\n        $invoice14ctYellowGoldCost: Int,\n        $invoice14ctRoseGoldCost: Int,\n        $invoice14ctWhiteGoldCost: Int,\n        $invoice18ctYellowGoldCost: Int,\n        $invoice18ctRoseGoldCost: Int,\n        $invoice18ctWhiteGoldCost: Int,\n        $invoicePlatinumCost: Int\n    ) {\n        updateSubmissionBatch(input: {\n            id: $id,\n            updatedAt: $updatedAt,\n            status: $status,\n            dateSent: $dateSent,\n            invoiced: $invoiced,\n            invoice: $invoice,\n            invoiceLabourCost: $invoiceLabourCost,\n            invoiceDeliveryCost: $invoiceDeliveryCost,\n            invoiceSilverCost: $invoiceSilverCost,\n            invoice9ctYellowGoldCost: $invoice9ctYellowGoldCost,\n            invoice9ctRoseGoldCost: $invoice9ctRoseGoldCost,\n            invoice9ctWhiteGoldCost: $invoice9ctWhiteGoldCost,\n            invoice14ctYellowGoldCost: $invoice14ctYellowGoldCost,\n            invoice14ctRoseGoldCost: $invoice14ctRoseGoldCost,\n            invoice14ctWhiteGoldCost: $invoice14ctWhiteGoldCost,\n            invoice18ctYellowGoldCost: $invoice18ctYellowGoldCost,\n            invoice18ctRoseGoldCost: $invoice18ctRoseGoldCost,\n            invoice18ctWhiteGoldCost: $invoice18ctWhiteGoldCost,\n            invoicePlatinumCost: $invoicePlatinumCost,\n            clientMutationId: "",\n        }) {\n            id\n            dateSent\n            invoiced\n            status {\n                id\n                name\n                incomingBatched\n            }\n            invoice\n            invoiceLabourCost\n            invoiceDeliveryCost\n            invoiceSilverCost\n            invoice9ctYellowGoldCost\n            invoice9ctRoseGoldCost\n            invoice9ctWhiteGoldCost\n            invoice14ctYellowGoldCost\n            invoice14ctRoseGoldCost\n            invoice14ctWhiteGoldCost\n            invoice18ctYellowGoldCost\n            invoice18ctRoseGoldCost\n            invoice18ctWhiteGoldCost\n            invoicePlatinumCost\n        }\n    }\n']))),p=l()(a||(a=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(['\n    mutation deleteSubmissionBatch($id: ID!) {\n        deleteSubmissionBatch (\n            input: {\n                id: $id,\n                clientMutationId: ""\n            }\n        ) {\n            id\n        }\n    }\n'],['\n    mutation deleteSubmissionBatch($id: ID!) {\n        deleteSubmissionBatch (\n            input: {\n                id: $id,\n                clientMutationId: ""\n            }\n        ) {\n            id\n        }\n    }\n']))),h=t("fXoL"),v=t("/IUn"),y=function(){function n(n){this.apollo=n}return n.prototype.list=function(n,e,t,i,s,c,o){return void 0===n&&(n=null),void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i=null),void 0===s&&(s="DESC"),void 0===c&&(c=null),void 0===o&&(o=null),this.apollo.query({query:f,variables:{after:n,partnerComplete:e,manufacturerComplete:t,supplierExists:i,order:s,inProduction:c,inQualityControl:o},fetchPolicy:"network-only"})},n.prototype.get=function(n){return this.apollo.query({query:b,variables:{id:n}})},n.prototype.create=function(n){return this.apollo.mutate({mutation:g,variables:n})},n.prototype.update=function(n){return this.apollo.mutate({mutation:m,variables:n})},n.prototype.delete=function(n){return this.apollo.mutate({mutation:p,variables:{id:n}})},n.\u0275fac=function(e){return new(e||n)(h.oc(v.b))},n.\u0275prov=h.Wb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()},zoH9:function(n,e,t){"use strict";t.d(e,"a",(function(){return s}));var i=t("fXoL"),s=function(){function n(){}return n.prototype.ngOnInit=function(){},n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=i.Ub({type:n,selectors:[["app-loading-spinner"]],decls:2,vars:0,template:function(n,e){1&n&&(i.gc(0,"p"),i.dd(1," loading-spinner works!\n"),i.fc())},styles:[""]}),n}()}}]);